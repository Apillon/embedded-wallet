(function(K,m){typeof exports=="object"&&typeof module<"u"?m(exports,require("react/jsx-runtime"),require("react"),require("react-dom"),require("@headlessui/react"),require("@oasisprotocol/sapphire-paratime"),require("pbkdf2"),require("cbor-redux"),require("asn1js"),require("mitt"),require("viem"),require("abitype"),require("ethers"),require("react-qr-code")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react","react-dom","@headlessui/react","@oasisprotocol/sapphire-paratime","pbkdf2","cbor-redux","asn1js","mitt","viem","abitype","ethers","react-qr-code"],m):(K=typeof globalThis<"u"?globalThis:K||self,m(K.EmbeddedWalletUi={},K.jsxRuntime,K.React,K.require$$0,K.react,K.Au,K.pbkdf2,K.cborRedux,K.pr,K.sa,K.viem,K.abitype,K.ethers,K.QRCode))})(this,function(K,m,F,rs,nn,yf,mf,Al,bf,Af,El,Ef,pa,vf){"use strict";var G0=Object.defineProperty;var hf=K=>{throw TypeError(K)};var V0=(K,m,F)=>m in K?G0(K,m,{enumerable:!0,configurable:!0,writable:!0,value:F}):K[m]=F;var E=(K,m,F)=>V0(K,typeof m!="symbol"?m+"":m,F),ol=(K,m,F)=>m.has(K)||hf("Cannot "+F);var d=(K,m,F)=>(ol(K,m,"read from private field"),F?F.call(K):m.get(K)),N=(K,m,F)=>m.has(K)?hf("Cannot add the same private member more than once"):m instanceof WeakSet?m.add(K):m.set(K,F),p=(K,m,F,rs)=>(ol(K,m,"write to private field"),rs?rs.call(K,F):m.set(K,F),F),U=(K,m,F)=>(ol(K,m,"access private method"),F);var ua=(K,m,F,rs)=>({set _(nn){p(K,m,nn,F)},get _(){return d(K,m,rs)}});var Ps,Sn,Mr,Ss,Bs,ke,lr,Us,Rs,Tt,ee,ur,Bn,Un,Rn,_e,Ce,Hr,Dn,ha,Wi,Zi,Yi,re,Ds,Ln,Oe,it,zt,nt,es,Ir,cl,ll,ul,hl,Ls,hr,Fn,Ms,wo,Yt,ne,Mn,Hn,Vr,Gn,dl,df,Hs,Gs,Vs,Vn,dr,jn,je,_s,js,Qs,zs,Js,Ks,qs,Ws,Zs,Ys,Xs,Qn,_r,pr,jr,$s,yo,Xi,wr,ti,lo,pf,Bt,Se,$i,fl,ei,mo,Qr,bi,Qe,ze,Je,Lt,Ke,bo,Ao,yr,ta,zr,ri,ea,ra,uf,Jr,Jn,Kr,Ai,fo,gf,sa,ia,si,ii,qr,mr,we,Wr,qe,oi,Eo,Kn,qn,Zr,ci,br,po,li,Ar,ui,hi,Yr,ye,go,wf,Ft,Xr,Mt,di,se,Wn,$r,Er,aa,me,fi,pi,Y,ce,pl,gl,da,wl,fa,vo,gi,xo,Jt,We,Zn,tn,Yn,wi,en,yl,ml,Xn,$n,yi,vr,Ze,Be,be,Xt,oa,bl,rn,mi;var vl=document.createElement("style");vl.textContent=`@import"https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap";*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }#oaw-wallet-widget .fixed{position:fixed}#oaw-wallet-widget .absolute{position:absolute}#oaw-wallet-widget .relative{position:relative}#oaw-wallet-widget .inset-0{top:0;right:0;bottom:0;left:0}#oaw-wallet-widget .right-2{right:.5rem}#oaw-wallet-widget .top-2{top:.5rem}#oaw-wallet-widget .my-3{margin-top:.75rem;margin-bottom:.75rem}#oaw-wallet-widget .my-6{margin-top:1.5rem;margin-bottom:1.5rem}#oaw-wallet-widget .-mb-6{margin-bottom:-1.5rem}#oaw-wallet-widget .-mr-8{margin-right:-2rem}#oaw-wallet-widget .-mt-0\\.5{margin-top:-.125rem}#oaw-wallet-widget .-mt-4{margin-top:-1rem}#oaw-wallet-widget .mb-1{margin-bottom:.25rem}#oaw-wallet-widget .mb-12{margin-bottom:3rem}#oaw-wallet-widget .mb-2{margin-bottom:.5rem}#oaw-wallet-widget .mb-3{margin-bottom:.75rem}#oaw-wallet-widget .mb-4{margin-bottom:1rem}#oaw-wallet-widget .mb-6{margin-bottom:1.5rem}#oaw-wallet-widget .mb-8{margin-bottom:2rem}#oaw-wallet-widget .mr-2{margin-right:.5rem}#oaw-wallet-widget .mt-12{margin-top:3rem}#oaw-wallet-widget .mt-2{margin-top:.5rem}#oaw-wallet-widget .mt-4{margin-top:1rem}#oaw-wallet-widget .mt-6{margin-top:1.5rem}#oaw-wallet-widget .inline-block{display:inline-block}#oaw-wallet-widget .flex{display:flex}#oaw-wallet-widget .h-14{height:3.5rem}#oaw-wallet-widget .max-h-\\[134px\\]{max-height:134px}#oaw-wallet-widget .min-h-\\[600px\\]{min-height:600px}#oaw-wallet-widget .min-h-full{min-height:100%}#oaw-wallet-widget .w-14{width:3.5rem}#oaw-wallet-widget .w-full{width:100%}#oaw-wallet-widget .w-screen{width:100vw}#oaw-wallet-widget .min-w-0{min-width:0px}#oaw-wallet-widget .max-w-lg{max-width:32rem}#oaw-wallet-widget .shrink-0{flex-shrink:0}#oaw-wallet-widget .scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}#oaw-wallet-widget .scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}#oaw-wallet-widget .flex-col{flex-direction:column}#oaw-wallet-widget .items-start{align-items:flex-start}#oaw-wallet-widget .items-end{align-items:flex-end}#oaw-wallet-widget .items-center{align-items:center}#oaw-wallet-widget .justify-center{justify-content:center}#oaw-wallet-widget .justify-between{justify-content:space-between}#oaw-wallet-widget .gap-1{gap:.25rem}#oaw-wallet-widget .gap-2{gap:.5rem}#oaw-wallet-widget .gap-3{gap:.75rem}#oaw-wallet-widget .gap-4{gap:1rem}#oaw-wallet-widget .overflow-auto{overflow:auto}#oaw-wallet-widget .overflow-y-auto{overflow-y:auto}#oaw-wallet-widget .whitespace-pre-wrap{white-space:pre-wrap}#oaw-wallet-widget .break-all{word-break:break-all}#oaw-wallet-widget .rounded-lg{border-radius:.5rem}#oaw-wallet-widget .rounded-md{border-radius:.375rem}#oaw-wallet-widget .rounded-sm{border-radius:.125rem}#oaw-wallet-widget .border{border-width:1px}#oaw-wallet-widget .border-x-0{border-left-width:0px;border-right-width:0px}#oaw-wallet-widget .border-b-\\[4px\\]{border-bottom-width:4px}#oaw-wallet-widget .border-t-\\[4px\\]{border-top-width:4px}#oaw-wallet-widget .border-brightdark{--tw-border-opacity: 1;border-color:rgb(49 52 66 / var(--tw-border-opacity))}#oaw-wallet-widget .border-b-lightdark{--tw-border-opacity: 1;border-bottom-color:rgb(30 33 43 / var(--tw-border-opacity))}#oaw-wallet-widget .border-b-yellow{--tw-border-opacity: 1;border-bottom-color:rgb(249 255 115 / var(--tw-border-opacity))}#oaw-wallet-widget .border-b-yellow\\/50{border-bottom-color:#f9ff7380}#oaw-wallet-widget .border-t-lightdark{--tw-border-opacity: 1;border-top-color:rgb(30 33 43 / var(--tw-border-opacity))}#oaw-wallet-widget .border-t-yellow{--tw-border-opacity: 1;border-top-color:rgb(249 255 115 / var(--tw-border-opacity))}#oaw-wallet-widget .bg-black\\/50{background-color:#00000080}#oaw-wallet-widget .bg-dark{--tw-bg-opacity: 1;background-color:rgb(20 23 33 / var(--tw-bg-opacity))}#oaw-wallet-widget .bg-lightdark{--tw-bg-opacity: 1;background-color:rgb(30 33 43 / var(--tw-bg-opacity))}#oaw-wallet-widget .bg-offwhite\\/25{background-color:#f0f2da40}#oaw-wallet-widget .bg-offwhite\\/5{background-color:#f0f2da0d}#oaw-wallet-widget .bg-red\\/75{background-color:#ff6188bf}#oaw-wallet-widget .bg-yellow{--tw-bg-opacity: 1;background-color:rgb(249 255 115 / var(--tw-bg-opacity))}#oaw-wallet-widget .p-3{padding:.75rem}#oaw-wallet-widget .p-4{padding:1rem}#oaw-wallet-widget .p-8{padding:2rem}#oaw-wallet-widget .px-2{padding-left:.5rem;padding-right:.5rem}#oaw-wallet-widget .px-4{padding-left:1rem;padding-right:1rem}#oaw-wallet-widget .py-1{padding-top:.25rem;padding-bottom:.25rem}#oaw-wallet-widget .py-2{padding-top:.5rem;padding-bottom:.5rem}#oaw-wallet-widget .py-2\\.5{padding-top:.625rem;padding-bottom:.625rem}#oaw-wallet-widget .pl-3{padding-left:.75rem}#oaw-wallet-widget .pr-2{padding-right:.5rem}#oaw-wallet-widget .pr-8{padding-right:2rem}#oaw-wallet-widget .text-left{text-align:left}#oaw-wallet-widget .text-center{text-align:center}#oaw-wallet-widget .text-sm{font-size:.875rem;line-height:1.25rem}#oaw-wallet-widget .text-xl{font-size:1.25rem;line-height:1.75rem}#oaw-wallet-widget .text-xs{font-size:.75rem;line-height:1rem}#oaw-wallet-widget .font-bold{font-weight:700}#oaw-wallet-widget .font-normal{font-weight:400}#oaw-wallet-widget .\\!text-white\\/50{color:#ffffff80!important}#oaw-wallet-widget .text-\\[\\#A9DC76\\]{--tw-text-opacity: 1;color:rgb(169 220 118 / var(--tw-text-opacity))}#oaw-wallet-widget .text-\\[\\#F7AF39\\]{--tw-text-opacity: 1;color:rgb(247 175 57 / var(--tw-text-opacity))}#oaw-wallet-widget .text-\\[\\#FF6188\\]{--tw-text-opacity: 1;color:rgb(255 97 136 / var(--tw-text-opacity))}#oaw-wallet-widget .text-dark{--tw-text-opacity: 1;color:rgb(20 23 33 / var(--tw-text-opacity))}#oaw-wallet-widget .text-offwhite{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget .text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}#oaw-wallet-widget .opacity-0{opacity:0}#oaw-wallet-widget .opacity-100{opacity:1}#oaw-wallet-widget .opacity-50{opacity:.5}#oaw-wallet-widget .opacity-60{opacity:.6}#oaw-wallet-widget .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}#oaw-wallet-widget .transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}#oaw-wallet-widget .transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}#oaw-wallet-widget .duration-200{transition-duration:.2s}#oaw-wallet-widget .duration-300{transition-duration:.3s}#oaw-wallet-widget .ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}#oaw-wallet-widget .ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}#oaw-wallet-widget .ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}#oaw-wallet-widget{all:initial}#oaw-wallet-widget:before,#oaw-wallet-widget:after,#oaw-wallet-widget *:before,#oaw-wallet-widget *:after{all:unset}#oaw-wallet-widget{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity));font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#oaw-wallet-widget h2{font-size:1.875rem;line-height:2.25rem}#oaw-wallet-widget h2{font-weight:700}#oaw-wallet-widget h2{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget h3{font-size:1.25rem;line-height:1.75rem}#oaw-wallet-widget h3{font-weight:700}#oaw-wallet-widget h3{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget input{border-radius:.5rem}#oaw-wallet-widget input{border-width:1px}#oaw-wallet-widget input{border-color:#9d9e9140}#oaw-wallet-widget input{--tw-bg-opacity: 1;background-color:rgb(30 33 43 / var(--tw-bg-opacity))}#oaw-wallet-widget input{padding-left:1.25rem;padding-right:1.25rem}#oaw-wallet-widget input{padding-top:.75rem;padding-bottom:.75rem}#oaw-wallet-widget input{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget input{outline:2px solid transparent;outline-offset:2px}#oaw-wallet-widget input:focus{--tw-border-opacity: 1;border-color:rgb(157 158 145 / var(--tw-border-opacity))}#oaw-wallet-widget a{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget button:not(.oaw-button){min-height:0px}#oaw-wallet-widget button:not(.oaw-button){min-width:0px}#oaw-wallet-widget button:not(.oaw-button){transform:none}#oaw-wallet-widget button:not(.oaw-button){cursor:pointer}#oaw-wallet-widget button:not(.oaw-button){border-radius:.125rem}#oaw-wallet-widget button:not(.oaw-button){border-style:none}#oaw-wallet-widget button:not(.oaw-button){background-color:transparent}#oaw-wallet-widget button:not(.oaw-button){padding:0}#oaw-wallet-widget button:not(.oaw-button){font-weight:400}#oaw-wallet-widget button:not(.oaw-button){--tw-text-opacity: 1;color:rgb(157 158 145 / var(--tw-text-opacity))}#oaw-wallet-widget button:not(.oaw-button):hover{--tw-text-opacity: 1;color:rgb(240 242 218 / var(--tw-text-opacity))}#oaw-wallet-widget input::-moz-placeholder{--tw-text-opacity: 1;color:rgb(157 158 145 / var(--tw-text-opacity))}#oaw-wallet-widget input::placeholder{--tw-text-opacity: 1;color:rgb(157 158 145 / var(--tw-text-opacity))}#oaw-wallet-widget ::-moz-selection{--tw-bg-opacity: 1;background-color:rgb(240 242 218 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(20 23 33 / var(--tw-text-opacity))}#oaw-wallet-widget ::selection{--tw-bg-opacity: 1;background-color:rgb(240 242 218 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(20 23 33 / var(--tw-text-opacity))}.oaw-btn-default-style{position:relative;display:inline-block;border-radius:.5rem;border-left-width:0px;border-right-width:0px;border-bottom-width:4px;border-top-width:4px;border-bottom-color:rgb(120 220 232 / var(--tw-border-opacity));--tw-border-opacity: 1;border-top-color:rgb(120 220 232 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(120 220 232 / var(--tw-bg-opacity));padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(20 23 33 / var(--tw-text-opacity));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.oaw-btn-default-style:hover{--tw-translate-y: -2px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-bottom-color:#f0f2da80}.oaw-btn-default-style:focus{--tw-translate-y: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-bottom-color:#f9ff7380}.oaw-btn-default-style{min-width:160px;min-height:40px;font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#oaw-wallet-widget *:focus,#oaw-wallet-widget *:focus-visible,.oaw-btn-default-style:focus,.oaw-btn-default-style:focus-visible{outline-style:solid;outline-width:2px;outline-offset:2px;outline-color:#f9ff7380}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dashoffset:0}50%{stroke-dashoffset:-35}to{stroke-dashoffset:-124}}#oaw-wallet-widget .hover\\:translate-y-\\[-2px\\]:hover{--tw-translate-y: -2px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}#oaw-wallet-widget .hover\\:border-b-blue\\/50:hover{border-bottom-color:#78dce880}#oaw-wallet-widget .hover\\:\\!text-white:hover{--tw-text-opacity: 1 !important;color:rgb(255 255 255 / var(--tw-text-opacity))!important}#oaw-wallet-widget .hover\\:opacity-100:hover{opacity:1}#oaw-wallet-widget .focus\\:translate-y-px:focus{--tw-translate-y: 1px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}#oaw-wallet-widget .focus\\:border-b-yellow\\/50:focus{border-bottom-color:#f9ff7380}@media (min-width: 640px){#oaw-wallet-widget .sm\\:-mr-12{margin-right:-3rem}#oaw-wallet-widget .sm\\:-mt-8{margin-top:-2rem}#oaw-wallet-widget .sm\\:px-12{padding-left:3rem;padding-right:3rem}#oaw-wallet-widget .sm\\:py-16{padding-top:4rem;padding-bottom:4rem}#oaw-wallet-widget .sm\\:pr-12{padding-right:3rem}}
`,document.head.appendChild(vl);function xl(r){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const e in r)if(e!=="default"){const n=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:()=>r[e]})}}return t.default=r,Object.freeze(t)}const xf=xl(yf),ga=xl(bf);function Nf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Nl={exports:{}},gt=Nl.exports={},Re,De;function No(){throw new Error("setTimeout has not been defined")}function Io(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Re=setTimeout:Re=No}catch{Re=No}try{typeof clearTimeout=="function"?De=clearTimeout:De=Io}catch{De=Io}})();function Il(r){if(Re===setTimeout)return setTimeout(r,0);if((Re===No||!Re)&&setTimeout)return Re=setTimeout,setTimeout(r,0);try{return Re(r,0)}catch{try{return Re.call(null,r,0)}catch{return Re.call(this,r,0)}}}function If(r){if(De===clearTimeout)return clearTimeout(r);if((De===Io||!De)&&clearTimeout)return De=clearTimeout,clearTimeout(r);try{return De(r)}catch{try{return De.call(null,r)}catch{return De.call(this,r)}}}var Ye=[],ns=!1,sn,wa=-1;function Tf(){!ns||!sn||(ns=!1,sn.length?Ye=sn.concat(Ye):wa=-1,Ye.length&&Tl())}function Tl(){if(!ns){var r=Il(Tf);ns=!0;for(var t=Ye.length;t;){for(sn=Ye,Ye=[];++wa<t;)sn&&sn[wa].run();wa=-1,t=Ye.length}sn=null,ns=!1,If(r)}}gt.nextTick=function(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];Ye.push(new kl(r,t)),Ye.length===1&&!ns&&Il(Tl)};function kl(r,t){this.fun=r,this.array=t}kl.prototype.run=function(){this.fun.apply(null,this.array)},gt.title="browser",gt.browser=!0,gt.env={},gt.argv=[],gt.version="",gt.versions={};function Xe(){}gt.on=Xe,gt.addListener=Xe,gt.once=Xe,gt.off=Xe,gt.removeListener=Xe,gt.removeAllListeners=Xe,gt.emit=Xe,gt.prependListener=Xe,gt.prependOnceListener=Xe,gt.listeners=function(r){return[]},gt.binding=function(r){throw new Error("process.binding is not supported")},gt.cwd=function(){return"/"},gt.chdir=function(r){throw new Error("process.chdir is not supported")},gt.umask=function(){return 0};var kf=Nl.exports;const Cf=Nf(kf);var Ei={},vi=rs;if(Cf.env.NODE_ENV==="production")Ei.createRoot=vi.createRoot,Ei.hydrateRoot=vi.hydrateRoot;else{var ya=vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ei.createRoot=function(r,t){ya.usingClientEntryPoint=!0;try{return vi.createRoot(r,t)}finally{ya.usingClientEntryPoint=!1}},Ei.hydrateRoot=function(r,t,e){ya.usingClientEntryPoint=!0;try{return vi.hydrateRoot(r,t,e)}finally{ya.usingClientEntryPoint=!1}}}const Of="6.13.1";function Pf(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function Ht(r){const t=Object.keys(r);return(await Promise.all(t.map(e=>Promise.resolve(r[e])))).reduce((e,n,s)=>(e[t[s]]=n,e),{})}function Q(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&Pf(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function ss(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(ss).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let e="0x";for(let n=0;n<r.length;n++)e+=t[r[n]>>4],e+=t[r[n]&15];return e}if(typeof r=="object"&&typeof r.toJSON=="function")return ss(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(e=>`${ss(e)}: ${ss(r[e])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Rt(r,t){return r&&r.code===t}function To(r){return Rt(r,"CALL_EXCEPTION")}function dt(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${ss(e)}`);for(const a in e){if(a==="shortMessage")continue;const o=e[a];i.push(a+"="+ss(o))}}i.push(`code=${t}`),i.push(`version=${Of}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return Q(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&Q(s,{shortMessage:n}),s}function P(r,t,e,n){if(!r)throw dt(t,e,n)}function A(r,t,e,n){P(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function Cl(r,t,e){e==null&&(e=""),e&&(e=": "+e),P(r>=t,"missing arguemnt"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),P(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function xi(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),P(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Ol(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}A(!1,"invalid BytesLike value",t||"value",r)}function q(r,t){return Ol(r,t,!1)}function Gt(r,t){return Ol(r,t,!0)}function ot(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function ko(r){return ot(r,!0)||r instanceof Uint8Array}const Pl="0123456789abcdef";function H(r){const t=q(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=Pl[(s&240)>>4]+Pl[s&15]}return e}function ut(r){return"0x"+r.map(t=>H(t).substring(2)).join("")}function an(r){return ot(r,!0)?(r.length-2)/2:q(r).length}function ft(r,t,e){const n=q(r);return e!=null&&e>n.length&&P(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),H(n.slice(t??0,e??n.length))}function Sl(r,t,e){const n=q(r);P(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),H(s)}function Le(r,t){return Sl(r,t,!0)}function Co(r,t){return Sl(r,t,!1)}const ma=BigInt(0),Ae=BigInt(1),is=9007199254740991;function ba(r,t){const e=Aa(r,"value"),n=BigInt(W(t,"width"));if(P(e>>n===ma,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-Ae){const s=(Ae<<n)-Ae;return-((~e&s)+Ae)}return e}function Oo(r,t){let e=V(r,"value");const n=BigInt(W(t,"width")),s=Ae<<n-Ae;if(e<ma){e=-e,P(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(Ae<<n)-Ae;return(~e&i)+Ae}else P(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function on(r,t){const e=Aa(r,"value"),n=BigInt(W(t,"bits"));return e&(Ae<<n)-Ae}function V(r,t){switch(typeof r){case"bigint":return r;case"number":return A(Number.isInteger(r),"underflow",t||"value",r),A(r>=-is&&r<=is,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){A(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}A(!1,"invalid BigNumberish value",t||"value",r)}function Aa(r,t){const e=V(r,t);return P(e>=ma,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Bl="0123456789abcdef";function as(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Bl[e>>4],t+=Bl[e&15];return BigInt(t)}return V(r)}function W(r,t){switch(typeof r){case"bigint":return A(r>=-is&&r<=is,"overflow",t||"value",r),Number(r);case"number":return A(Number.isInteger(r),"underflow",t||"value",r),A(r>=-is&&r<=is,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return W(BigInt(r),t)}catch(e){A(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}A(!1,"invalid numeric value",t||"value",r)}function Sf(r){return W(as(r))}function Tr(r,t){let e=Aa(r,"value").toString(16);if(t==null)e.length%2&&(e="0"+e);else{const n=W(t,"width");for(P(n*2>=e.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});e.length<n*2;)e="0"+e}return"0x"+e}function Et(r){const t=Aa(r,"value");if(t===ma)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(e.substring(i,i+2),16)}return n}function os(r){let t=H(ko(r)?r:Et(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const Ul="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Rl=BigInt(58);function Bf(r){const t=q(r);let e=as(t),n="";for(;e;)n=Ul[Number(e%Rl)]+n,e/=Rl;for(let s=0;s<t.length&&!t[s];s++)n=Ul[0]+n;return n}function Uf(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return q(t)}function Rf(r){const t=q(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}class Dl{constructor(t,e,n){E(this,"filter");E(this,"emitter");N(this,Ps);p(this,Ps,e),Q(this,{emitter:t,filter:n})}async removeListener(){d(this,Ps)!=null&&await this.emitter.off(this.filter,d(this,Ps))}}Ps=new WeakMap;function Df(r,t,e,n,s){A(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function Ll(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let a=t+1;a<e.length&&e[a]>>6===2;a++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function Lf(r,t,e,n,s){return r==="OVERLONG"?(A(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),Ll(r,t,e))}const Ff=Object.freeze({error:Df,ignore:Ll,replace:Lf});function Mf(r,t){t==null&&(t=Ff.error);const e=q(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(!(i>>7)){n.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+a>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-a-1)-1;for(let l=0;l<a;l++){let h=e[s];if((h&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|h&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-a,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-a,e,n,c);continue}if(c<=o){s+=t("OVERLONG",s-1-a,e,n,c);continue}n.push(c)}}return n}function Ee(r,t){A(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);A(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const a=65536+((s&1023)<<10)+(i&1023);e.push(a>>18|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function Hf(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Ea(r,t){return Hf(Mf(r,t))}function Fl(r){async function t(e,n){P(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();P(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),P(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const a=new AbortController,o=setTimeout(()=>{i=dt("request timeout","TIMEOUT"),a.abort()},e.timeout);n&&n.addListener(()=>{i=dt("request cancelled","CANCELLED"),a.abort()});const c={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:a.signal};let l;try{l=await fetch(e.url,c)}catch(y){throw clearTimeout(o),i||y}clearTimeout(o);const h={};l.headers.forEach((y,w)=>{h[w.toLowerCase()]=y});const u=await l.arrayBuffer(),f=u==null?null:new Uint8Array(u);return{statusCode:l.status,statusMessage:l.statusText,headers:h,body:f}}return t}const Gf=12,Vf=250;let Ml=Fl();const _f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),jf=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Po=!1;async function Hl(r,t){try{const e=r.match(_f);if(!e)throw new Error("invalid data");return new kr(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?Uf(e[3]):zf(e[3]))}catch{return new kr(599,"BAD REQUEST (invalid data: URI)",{},null,new $e(r))}}function Gl(r){async function t(e,n){try{const s=e.match(jf);if(!s)throw new Error("invalid link");return new $e(`${r}${s[2]}`)}catch{return new kr(599,"BAD REQUEST (invalid IPFS URI)",{},null,new $e(e))}}return t}const va={data:Hl,ipfs:Gl("https://gateway.ipfs.io/ipfs/")},Vl=new WeakMap;class Qf{constructor(t){N(this,Sn);N(this,Mr);p(this,Sn,[]),p(this,Mr,!1),Vl.set(t,()=>{if(!d(this,Mr)){p(this,Mr,!0);for(const e of d(this,Sn))setTimeout(()=>{e()},0);p(this,Sn,[])}})}addListener(t){P(!d(this,Mr),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),d(this,Sn).push(t)}get cancelled(){return d(this,Mr)}checkSignal(){P(!this.cancelled,"cancelled","CANCELLED",{})}}Sn=new WeakMap,Mr=new WeakMap;function xa(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}const co=class co{constructor(t){N(this,Dn);N(this,Ss);N(this,Bs);N(this,ke);N(this,lr);N(this,Us);N(this,Rs);N(this,Tt);N(this,ee);N(this,ur);N(this,Bn);N(this,Un);N(this,Rn);N(this,_e);N(this,Ce);N(this,Hr);p(this,Rs,String(t)),p(this,Ss,!1),p(this,Bs,!0),p(this,ke,{}),p(this,lr,""),p(this,Us,3e5),p(this,Ce,{slotInterval:Vf,maxAttempts:Gf}),p(this,Hr,null)}get url(){return d(this,Rs)}set url(t){p(this,Rs,String(t))}get body(){return d(this,Tt)==null?null:new Uint8Array(d(this,Tt))}set body(t){if(t==null)p(this,Tt,void 0),p(this,ee,void 0);else if(typeof t=="string")p(this,Tt,Ee(t)),p(this,ee,"text/plain");else if(t instanceof Uint8Array)p(this,Tt,t),p(this,ee,"application/octet-stream");else if(typeof t=="object")p(this,Tt,Ee(JSON.stringify(t))),p(this,ee,"application/json");else throw new Error("invalid body")}hasBody(){return d(this,Tt)!=null}get method(){return d(this,lr)?d(this,lr):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),p(this,lr,String(t).toUpperCase())}get headers(){const t=Object.assign({},d(this,ke));return d(this,ur)&&(t.authorization=`Basic ${Rf(Ee(d(this,ur)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&d(this,ee)&&(t["content-type"]=d(this,ee)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){d(this,ke)[String(t).toLowerCase()]=String(e)}clearHeaders(){p(this,ke,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return d(this,ur)||null}setCredentials(t,e){A(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),p(this,ur,`${t}:${e}`)}get allowGzip(){return d(this,Bs)}set allowGzip(t){p(this,Bs,!!t)}get allowInsecureAuthentication(){return!!d(this,Ss)}set allowInsecureAuthentication(t){p(this,Ss,!!t)}get timeout(){return d(this,Us)}set timeout(t){A(t>=0,"timeout must be non-zero","timeout",t),p(this,Us,t)}get preflightFunc(){return d(this,Bn)||null}set preflightFunc(t){p(this,Bn,t)}get processFunc(){return d(this,Un)||null}set processFunc(t){p(this,Un,t)}get retryFunc(){return d(this,Rn)||null}set retryFunc(t){p(this,Rn,t)}get getUrlFunc(){return d(this,Hr)||Ml}set getUrlFunc(t){p(this,Hr,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${d(this,Tt)?H(d(this,Tt)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(d(this,Ce).slotInterval=t.slotInterval),t.maxAttempts!=null&&(d(this,Ce).maxAttempts=t.maxAttempts)}send(){return P(d(this,_e)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),p(this,_e,new Qf(this)),U(this,Dn,ha).call(this,0,_l()+this.timeout,0,this,new kr(0,"",{},null,this))}cancel(){P(d(this,_e)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Vl.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();P(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new co(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,p(s,ke,Object.assign({},d(this,ke))),d(this,Tt)&&p(s,Tt,new Uint8Array(d(this,Tt))),p(s,ee,d(this,ee)),s}clone(){const t=new co(this.url);return p(t,lr,d(this,lr)),d(this,Tt)&&p(t,Tt,d(this,Tt)),p(t,ee,d(this,ee)),p(t,ke,Object.assign({},d(this,ke))),p(t,ur,d(this,ur)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),p(t,Bn,d(this,Bn)),p(t,Un,d(this,Un)),p(t,Rn,d(this,Rn)),p(t,Ce,Object.assign({},d(this,Ce))),p(t,Hr,d(this,Hr)),t}static lockConfig(){Po=!0}static getGateway(t){return va[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Po)throw new Error("gateways locked");va[t]=e}static registerGetUrl(t){if(Po)throw new Error("gateways locked");Ml=t}static createGetUrlFunc(t){return Fl()}static createDataGateway(){return Hl}static createIpfsGatewayFunc(t){return Gl(t)}};Ss=new WeakMap,Bs=new WeakMap,ke=new WeakMap,lr=new WeakMap,Us=new WeakMap,Rs=new WeakMap,Tt=new WeakMap,ee=new WeakMap,ur=new WeakMap,Bn=new WeakMap,Un=new WeakMap,Rn=new WeakMap,_e=new WeakMap,Ce=new WeakMap,Hr=new WeakMap,Dn=new WeakSet,ha=async function(t,e,n,s,i){var h,u,f;if(t>=d(this,Ce).maxAttempts)return i.makeServerError("exceeded maximum retry limit");P(_l()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await Jf(n);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in va){const y=await va[o](a.url,xa(d(s,_e)));if(y instanceof kr){let w=y;if(this.processFunc){xa(d(s,_e));try{w=await this.processFunc(a,w)}catch(g){(g.throttle==null||typeof g.stall!="number")&&w.makeServerError("error in post-processing function",g).assertOk()}}return w}a=y}this.preflightFunc&&(a=await this.preflightFunc(a));const c=await this.getUrlFunc(a,xa(d(s,_e)));let l=new kr(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const y=l.headers.location||"";return U(h=a.redirect(y),Dn,ha).call(h,t+1,e,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,l,t))){const y=l.headers["retry-after"];let w=d(this,Ce).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof y=="string"&&y.match(/^[1-9][0-9]*$/)&&(w=parseInt(y)),U(u=a.clone(),Dn,ha).call(u,t+1,e,w,s,l)}if(this.processFunc){xa(d(s,_e));try{l=await this.processFunc(a,l)}catch(y){(y.throttle==null||typeof y.stall!="number")&&l.makeServerError("error in post-processing function",y).assertOk();let w=d(this,Ce).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return y.stall>=0&&(w=y.stall),U(f=a.clone(),Dn,ha).call(f,t+1,e,w,s,l)}}return l};let $e=co;const nl=class nl{constructor(t,e,n,s,i){N(this,Wi);N(this,Zi);N(this,Yi);N(this,re);N(this,Ds);N(this,Ln);p(this,Wi,t),p(this,Zi,e),p(this,Yi,Object.keys(n).reduce((a,o)=>(a[o.toLowerCase()]=String(n[o]),a),{})),p(this,re,s==null?null:new Uint8Array(s)),p(this,Ds,i||null),p(this,Ln,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${d(this,re)?H(d(this,re)):"null"}>`}get statusCode(){return d(this,Wi)}get statusMessage(){return d(this,Zi)}get headers(){return Object.assign({},d(this,Yi))}get body(){return d(this,re)==null?null:new Uint8Array(d(this,re))}get bodyText(){try{return d(this,re)==null?"":Ea(d(this,re))}catch{P(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{P(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new nl(599,n,this.headers,this.body,d(this,Ds)||void 0);return p(s,Ln,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:A(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw Q(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return d(this,re)!=null}get request(){return d(this,Ds)}ok(){return d(this,Ln).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=d(this,Ln);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{d(this,re)&&(s=Ea(d(this,re)))}catch{}P(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Wi=new WeakMap,Zi=new WeakMap,Yi=new WeakMap,re=new WeakMap,Ds=new WeakMap,Ln=new WeakMap;let kr=nl;function _l(){return new Date().getTime()}function zf(r){return Ee(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Jf(r){return new Promise(t=>setTimeout(t,r))}const Kf=BigInt(-1),ve=BigInt(0),cs=BigInt(1),qf=BigInt(5),ls={};let us="0000";for(;us.length<80;)us+=us;function cn(r){let t=us;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function Ni(r,t,e){const n=BigInt(t.width);if(t.signed){const s=cs<<n-cs;P(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>ve?r=ba(on(r,n),n):r=-ba(on(-r,n),n)}else{const s=cs<<n;P(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-cs}return r}function So(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);A(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,a=(o,c,l)=>i[o]==null?l:(A(typeof i[o]===c,"invalid fixed format ("+o+" not "+c+")","format."+o,i[o]),i[o]);t=a("signed","boolean",t),e=a("width","number",e),n=a("decimals","number",n)}A(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),A(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function Wf(r,t){let e="";r<ve&&(e="-",r*=Kf);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=us+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}const Gr=class Gr{constructor(t,e,n){N(this,nt);E(this,"format");N(this,Oe);N(this,it);N(this,zt);E(this,"_value");xi(t,ls,"FixedNumber"),p(this,it,e),p(this,Oe,n);const s=Wf(e,n.decimals);Q(this,{format:n.name,_value:s}),p(this,zt,cn(n.decimals))}get signed(){return d(this,Oe).signed}get width(){return d(this,Oe).width}get decimals(){return d(this,Oe).decimals}get value(){return d(this,it)}addUnsafe(t){return U(this,nt,cl).call(this,t)}add(t){return U(this,nt,cl).call(this,t,"add")}subUnsafe(t){return U(this,nt,ll).call(this,t)}sub(t){return U(this,nt,ll).call(this,t,"sub")}mulUnsafe(t){return U(this,nt,ul).call(this,t)}mul(t){return U(this,nt,ul).call(this,t,"mul")}mulSignal(t){U(this,nt,es).call(this,t);const e=d(this,it)*d(t,it);return P(e%d(this,zt)===ve,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),U(this,nt,Ir).call(this,e/d(this,zt),"mulSignal")}divUnsafe(t){return U(this,nt,hl).call(this,t)}div(t){return U(this,nt,hl).call(this,t,"div")}divSignal(t){P(d(t,it)!==ve,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),U(this,nt,es).call(this,t);const e=d(this,it)*d(this,zt);return P(e%d(t,it)===ve,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),U(this,nt,Ir).call(this,e/d(t,it),"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=cn(s):s<0&&(e*=cn(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=d(this,it);return d(this,it)<ve&&(t-=d(this,zt)-cs),t=d(this,it)/d(this,zt)*d(this,zt),U(this,nt,Ir).call(this,t,"floor")}ceiling(){let t=d(this,it);return d(this,it)>ve&&(t+=d(this,zt)-cs),t=d(this,it)/d(this,zt)*d(this,zt),U(this,nt,Ir).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=qf*cn(e-1);let s=this.value+n;const i=cn(e);return s=s/i*i,Ni(s,d(this,Oe),"round"),new Gr(ls,s,d(this,Oe))}isZero(){return d(this,it)===ve}isNegative(){return d(this,it)<ve}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Gr.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:W(e),i=So(n);let a=V(t,"value");const o=s-i.decimals;if(o>0){const c=cn(o);P(a%c===ve,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),a/=c}else o<0&&(a*=cn(-o));return Ni(a,i,"fromValue"),new Gr(ls,a,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);A(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=So(e);let i=n[2]||"0",a=n[3]||"";for(;a.length<s.decimals;)a+=us;P(a.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),a=a.substring(0,s.decimals);const o=BigInt(n[1]+i+a);return Ni(o,s,"fromString"),new Gr(ls,o,s)}static fromBytes(t,e){let n=as(q(t,"value"));const s=So(e);return s.signed&&(n=ba(n,s.width)),Ni(n,s,"fromBytes"),new Gr(ls,n,s)}};Oe=new WeakMap,it=new WeakMap,zt=new WeakMap,nt=new WeakSet,es=function(t){A(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Ir=function(t,e){return t=Ni(t,d(this,Oe),e),new Gr(ls,t,d(this,Oe))},cl=function(t,e){return U(this,nt,es).call(this,t),U(this,nt,Ir).call(this,d(this,it)+d(t,it),e)},ll=function(t,e){return U(this,nt,es).call(this,t),U(this,nt,Ir).call(this,d(this,it)-d(t,it),e)},ul=function(t,e){return U(this,nt,es).call(this,t),U(this,nt,Ir).call(this,d(this,it)*d(t,it)/d(this,zt),e)},hl=function(t,e){return P(d(t,it)!==ve,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),U(this,nt,es).call(this,t),U(this,nt,Ir).call(this,d(this,it)*d(this,zt)/d(t,it),e)};let Bo=Gr;function Zf(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function jl(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Ql(r,t,e,n){const s=[];for(;e<t+1+n;){const i=zl(r,e);s.push(i.result),e+=i.consumed,P(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function zl(r,t){P(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{P(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=jl(r,t+1,n);return e(t+1+n+s),Ql(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Ql(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=jl(r,t+1,n);e(t+1+n+s);const i=H(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=H(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:Zf(r[t])}}function Na(r){const t=q(r,"data"),e=zl(t,0);return A(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Jl(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function Kl(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(Kl(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Jl(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(q(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Jl(t.length);return e.unshift(183+e.length),e.concat(t)}const ql="0123456789abcdef";function ln(r){let t="0x";for(const e of Kl(r))t+=ql[e>>4],t+=ql[e&15];return t}const Yf=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Wl(r,t){let e=18;if(typeof t=="string"){const n=Yf.indexOf(t);A(n>=0,"invalid unit","unit",t),e=3*n}else t!=null&&(e=W(t,"unit"));return Bo.fromValue(r,e,{decimals:e,width:512}).toString()}const Vt=32,Uo=new Uint8Array(Vt),Xf=["then"],Ia={},Zl=new WeakMap;function un(r){return Zl.get(r)}function Yl(r,t){Zl.set(r,t)}function Ii(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function Ro(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof hs?Ro(un(n),n,e):n):r.reduce((n,s,i)=>{let a=t.getValue(s);return s in n||(e&&a instanceof hs&&(a=Ro(un(a),a,e)),n[s]=a),n},{})}const Fs=class Fs extends Array{constructor(...e){const n=e[0];let s=e[1],i=(e[2]||[]).slice(),a=!0;n!==Ia&&(s=e,i=[],a=!1);super(s.length);N(this,Ls);s.forEach((l,h)=>{this[h]=l});const o=i.reduce((l,h)=>(typeof h=="string"&&l.set(h,(l.get(h)||0)+1),l),new Map);if(Yl(this,Object.freeze(s.map((l,h)=>{const u=i[h];return u!=null&&o.get(u)===1?u:null}))),p(this,Ls,[]),d(this,Ls)==null&&d(this,Ls),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(l,h,u)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const y=W(h,"%index");if(y<0||y>=this.length)throw new RangeError("out of result range");const w=l[y];return w instanceof Error&&Ii(`index ${y}`,w),w}if(Xf.indexOf(h)>=0)return Reflect.get(l,h,u);const f=l[h];if(f instanceof Function)return function(...y){return f.apply(this===u?l:this,y)};if(!(h in l))return l.getValue.apply(this===u?l:this,[h])}return Reflect.get(l,h,u)}});return Yl(c,un(this)),c}toArray(e){const n=[];return this.forEach((s,i)=>{s instanceof Error&&Ii(`index ${i}`,s),e&&s instanceof Fs&&(s=s.toArray(e)),n.push(s)}),n}toObject(e){const n=un(this);return n.reduce((s,i,a)=>(P(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Ro(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=un(this),i=[],a=[];for(let o=e;o<n;o++)i.push(this[o]),a.push(s[o]);return new Fs(Ia,i,a)}filter(e,n){const s=un(this),i=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&Ii(`index ${o}`,c),e.call(n,c,o,this)&&(i.push(c),a.push(s[o]))}return new Fs(Ia,i,a)}map(e,n){const s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&Ii(`index ${i}`,a),s.push(e.call(n,a,i,this))}return s}getValue(e){const n=un(this).indexOf(e);if(n===-1)return;const s=this[n];return s instanceof Error&&Ii(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,n){return new Fs(Ia,e,n)}};Ls=new WeakMap;let hs=Fs;function Xl(r){let t=Et(r);return P(t.length<=Vt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Vt,offset:t.length}),t.length!==Vt&&(t=Gt(ut([Uo.slice(t.length%Vt),t]))),t}class tr{constructor(t,e,n,s){E(this,"name");E(this,"type");E(this,"localName");E(this,"dynamic");Q(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){A(!1,t,this.localName,e)}}class Do{constructor(){N(this,Ms);N(this,hr);N(this,Fn);p(this,hr,[]),p(this,Fn,0)}get data(){return ut(d(this,hr))}get length(){return d(this,Fn)}appendWriter(t){return U(this,Ms,wo).call(this,Gt(t.data))}writeBytes(t){let e=Gt(t);const n=e.length%Vt;return n&&(e=Gt(ut([e,Uo.slice(n)]))),U(this,Ms,wo).call(this,e)}writeValue(t){return U(this,Ms,wo).call(this,Xl(t))}writeUpdatableValue(){const t=d(this,hr).length;return d(this,hr).push(Uo),p(this,Fn,d(this,Fn)+Vt),e=>{d(this,hr)[t]=Xl(e)}}}hr=new WeakMap,Fn=new WeakMap,Ms=new WeakSet,wo=function(t){return d(this,hr).push(t),p(this,Fn,d(this,Fn)+t.length),t.length};const sl=class sl{constructor(t,e,n){N(this,Gn);E(this,"allowLoose");N(this,Yt);N(this,ne);N(this,Mn);N(this,Hn);N(this,Vr);Q(this,{allowLoose:!!e}),p(this,Yt,Gt(t)),p(this,Mn,0),p(this,Hn,null),p(this,Vr,n??1024),p(this,ne,0)}get data(){return H(d(this,Yt))}get dataLength(){return d(this,Yt).length}get consumed(){return d(this,ne)}get bytes(){return new Uint8Array(d(this,Yt))}subReader(t){const e=new sl(d(this,Yt).slice(d(this,ne)+t),this.allowLoose,d(this,Vr));return p(e,Hn,this),e}readBytes(t,e){let n=U(this,Gn,df).call(this,0,t,!!e);return U(this,Gn,dl).call(this,t),p(this,ne,d(this,ne)+n.length),n.slice(0,t)}readValue(){return as(this.readBytes(Vt))}readIndex(){return Sf(this.readBytes(Vt))}};Yt=new WeakMap,ne=new WeakMap,Mn=new WeakMap,Hn=new WeakMap,Vr=new WeakMap,Gn=new WeakSet,dl=function(t){var e;if(d(this,Hn))return U(e=d(this,Hn),Gn,dl).call(e,t);p(this,Mn,d(this,Mn)+t),P(d(this,Vr)<1||d(this,Mn)<=d(this,Vr)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${d(this,Vr)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Gt(d(this,Yt)),offset:d(this,ne),length:t,info:{bytesRead:d(this,Mn),dataLength:this.dataLength}})},df=function(t,e,n){let s=Math.ceil(e/Vt)*Vt;return d(this,ne)+s>d(this,Yt).length&&(this.allowLoose&&n&&d(this,ne)+e<=d(this,Yt).length?s=e:P(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Gt(d(this,Yt)),length:d(this,Yt).length,offset:d(this,ne)+s})),d(this,Yt).slice(d(this,ne),d(this,ne)+s)};let Lo=sl;const $l=globalThis||void 0||self;function Ta(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function Fo(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function $f(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ta(r.outputLen),Ta(r.blockLen)}function ds(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function tu(r,t){Fo(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Mo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eu=r=>r instanceof Uint8Array,tp=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Ho=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Fe=(r,t)=>r<<32-t|r>>>t;if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function ep(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function ka(r){if(typeof r=="string"&&(r=ep(r)),!eu(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function rp(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!eu(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}let Go=class{clone(){return this._cloneInto()}};function Vo(r){const t=n=>r().update(ka(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function np(r=32){if(Mo&&typeof Mo.getRandomValues=="function")return Mo.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}let ru=class extends Go{constructor(r,t){super(),this.finished=!1,this.destroyed=!1,$f(r);const e=ka(t);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(e.length>n?r.create().update(e).digest():e);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=r.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(r){return ds(this),this.iHash.update(r),this}digestInto(r){ds(this),Fo(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:e,finished:n,destroyed:s,blockLen:i,outputLen:a}=this;return r=r,r.finished=n,r.destroyed=s,r.blockLen=i,r.outputLen=a,r.oHash=t._cloneInto(r.oHash),r.iHash=e._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const nu=(r,t,e)=>new ru(r,t).update(e).digest();nu.create=(r,t)=>new ru(r,t);function sp(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),o=Number(e&i),c=n?4:0,l=n?0:4;r.setUint32(t+c,a,n),r.setUint32(t+l,o,n)}class su extends Go{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ho(this.buffer)}update(t){ds(this);const{view:e,buffer:n,blockLen:s}=this;t=ka(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Ho(t);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ds(this),tu(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let u=a;u<s;u++)e[u]=0;sp(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=Ho(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)o.setUint32(4*u,h[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%e&&t.buffer.set(n),t}}const ip=(r,t,e)=>r&t^~r&e,ap=(r,t,e)=>r&t^r&e^t&e,op=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Or=new Uint32Array(64);let cp=class extends su{constructor(){super(64,32,8,!1),this.A=Cr[0]|0,this.B=Cr[1]|0,this.C=Cr[2]|0,this.D=Cr[3]|0,this.E=Cr[4]|0,this.F=Cr[5]|0,this.G=Cr[6]|0,this.H=Cr[7]|0}get(){const{A:r,B:t,C:e,D:n,E:s,F:i,G:a,H:o}=this;return[r,t,e,n,s,i,a,o]}set(r,t,e,n,s,i,a,o){this.A=r|0,this.B=t|0,this.C=e|0,this.D=n|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=o|0}process(r,t){for(let h=0;h<16;h++,t+=4)Or[h]=r.getUint32(t,!1);for(let h=16;h<64;h++){const u=Or[h-15],f=Or[h-2],y=Fe(u,7)^Fe(u,18)^u>>>3,w=Fe(f,17)^Fe(f,19)^f>>>10;Or[h]=w+Or[h-7]+y+Or[h-16]|0}let{A:e,B:n,C:s,D:i,E:a,F:o,G:c,H:l}=this;for(let h=0;h<64;h++){const u=Fe(a,6)^Fe(a,11)^Fe(a,25),f=l+u+ip(a,o,c)+op[h]+Or[h]|0,y=(Fe(e,2)^Fe(e,13)^Fe(e,22))+ap(e,n,s)|0;l=c,c=o,o=a,a=i+f|0,i=s,s=n,n=e,e=f+y|0}e=e+this.A|0,n=n+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(e,n,s,i,a,o,c,l)}roundClean(){Or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const iu=Vo(()=>new cp),Ca=BigInt(2**32-1),_o=BigInt(32);function au(r,t=!1){return t?{h:Number(r&Ca),l:Number(r>>_o&Ca)}:{h:Number(r>>_o&Ca)|0,l:Number(r&Ca)|0}}function ou(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:a}=au(r[s],t);[e[s],n[s]]=[i,a]}return[e,n]}const lp=(r,t)=>BigInt(r>>>0)<<_o|BigInt(t>>>0),up=(r,t,e)=>r>>>e,hp=(r,t,e)=>r<<32-e|t>>>e,dp=(r,t,e)=>r>>>e|t<<32-e,fp=(r,t,e)=>r<<32-e|t>>>e,pp=(r,t,e)=>r<<64-e|t>>>e-32,gp=(r,t,e)=>r>>>e-32|t<<64-e,wp=(r,t)=>t,yp=(r,t)=>r,cu=(r,t,e)=>r<<e|t>>>32-e,lu=(r,t,e)=>t<<e|r>>>32-e,uu=(r,t,e)=>t<<e-32|r>>>64-e,hu=(r,t,e)=>r<<e-32|t>>>64-e;function mp(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const bp=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Ap=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Ep=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),vp=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,xp=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Np=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Z={fromBig:au,split:ou,toBig:lp,shrSH:up,shrSL:hp,rotrSH:dp,rotrSL:fp,rotrBH:pp,rotrBL:gp,rotr32H:wp,rotr32L:yp,rotlSH:cu,rotlSL:lu,rotlBH:uu,rotlBL:hu,add:mp,add3L:bp,add3H:Ap,add4L:Ep,add4H:vp,add5H:Np,add5L:xp},[Ip,Tp]=Z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Pr=new Uint32Array(80),Sr=new Uint32Array(80);class kp extends su{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:h,Fh:u,Fl:f,Gh:y,Gl:w,Hh:g,Hl:b}=this;return[t,e,n,s,i,a,o,c,l,h,u,f,y,w,g,b]}set(t,e,n,s,i,a,o,c,l,h,u,f,y,w,g,b){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=h|0,this.Fh=u|0,this.Fl=f|0,this.Gh=y|0,this.Gl=w|0,this.Hh=g|0,this.Hl=b|0}process(t,e){for(let I=0;I<16;I++,e+=4)Pr[I]=t.getUint32(e),Sr[I]=t.getUint32(e+=4);for(let I=16;I<80;I++){const R=Pr[I-15]|0,O=Sr[I-15]|0,T=Z.rotrSH(R,O,1)^Z.rotrSH(R,O,8)^Z.shrSH(R,O,7),S=Z.rotrSL(R,O,1)^Z.rotrSL(R,O,8)^Z.shrSL(R,O,7),B=Pr[I-2]|0,j=Sr[I-2]|0,D=Z.rotrSH(B,j,19)^Z.rotrBH(B,j,61)^Z.shrSH(B,j,6),M=Z.rotrSL(B,j,19)^Z.rotrBL(B,j,61)^Z.shrSL(B,j,6),z=Z.add4L(S,M,Sr[I-7],Sr[I-16]),et=Z.add4H(z,T,D,Pr[I-7],Pr[I-16]);Pr[I]=et|0,Sr[I]=z|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:h,Eh:u,El:f,Fh:y,Fl:w,Gh:g,Gl:b,Hh:v,Hl:C}=this;for(let I=0;I<80;I++){const R=Z.rotrSH(u,f,14)^Z.rotrSH(u,f,18)^Z.rotrBH(u,f,41),O=Z.rotrSL(u,f,14)^Z.rotrSL(u,f,18)^Z.rotrBL(u,f,41),T=u&y^~u&g,S=f&w^~f&b,B=Z.add5L(C,O,S,Tp[I],Sr[I]),j=Z.add5H(B,v,R,T,Ip[I],Pr[I]),D=B|0,M=Z.rotrSH(n,s,28)^Z.rotrBH(n,s,34)^Z.rotrBH(n,s,39),z=Z.rotrSL(n,s,28)^Z.rotrBL(n,s,34)^Z.rotrBL(n,s,39),et=n&i^n&o^i&o,vt=s&a^s&c^a&c;v=g|0,C=b|0,g=y|0,b=w|0,y=u|0,w=f|0,{h:u,l:f}=Z.add(l|0,h|0,j|0,D|0),l=o|0,h=c|0,o=i|0,c=a|0,i=n|0,a=s|0;const x=Z.add3L(D,z,vt);n=Z.add3H(x,j,M,et),s=x|0}({h:n,l:s}=Z.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=Z.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=Z.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:h}=Z.add(this.Dh|0,this.Dl|0,l|0,h|0),{h:u,l:f}=Z.add(this.Eh|0,this.El|0,u|0,f|0),{h:y,l:w}=Z.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:g,l:b}=Z.add(this.Gh|0,this.Gl|0,g|0,b|0),{h:v,l:C}=Z.add(this.Hh|0,this.Hl|0,v|0,C|0),this.set(n,s,i,a,o,c,l,h,u,f,y,w,g,b,v,C)}roundClean(){Pr.fill(0),Sr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Cp=Vo(()=>new kp);function Op(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof $l<"u")return $l;throw new Error("unable to locate global object")}const du=Op();du.crypto||du.msCrypto;function Pp(r){switch(r){case"sha256":return iu.create();case"sha512":return Cp.create()}A(!1,"invalid hashing algorithm name","algorithm",r)}const[fu,pu,gu]=[[],[],[]],Sp=BigInt(0),Ti=BigInt(1),Bp=BigInt(2),Up=BigInt(7),Rp=BigInt(256),Dp=BigInt(113);for(let r=0,t=Ti,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],fu.push(2*(5*n+e)),pu.push((r+1)*(r+2)/2%64);let s=Sp;for(let i=0;i<7;i++)t=(t<<Ti^(t>>Up)*Dp)%Rp,t&Bp&&(s^=Ti<<(Ti<<BigInt(i))-Ti);gu.push(s)}const[Lp,Fp]=ou(gu,!0),wu=(r,t,e)=>e>32?uu(r,t,e):cu(r,t,e),yu=(r,t,e)=>e>32?hu(r,t,e):lu(r,t,e);function Mp(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let a=0;a<10;a++)e[a]=r[a]^r[a+10]^r[a+20]^r[a+30]^r[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=e[c],h=e[c+1],u=wu(l,h,1)^e[o],f=yu(l,h,1)^e[o+1];for(let y=0;y<50;y+=10)r[a+y]^=u,r[a+y+1]^=f}let s=r[2],i=r[3];for(let a=0;a<24;a++){const o=pu[a],c=wu(s,i,o),l=yu(s,i,o),h=fu[a];s=r[h],i=r[h+1],r[h]=c,r[h+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)e[o]=r[a+o];for(let o=0;o<10;o++)r[a+o]^=~e[(o+2)%10]&e[(o+4)%10]}r[0]^=Lp[n],r[1]^=Fp[n]}e.fill(0)}let Hp=class ff extends Go{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ta(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=tp(this.state)}keccak(){Mp(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ds(this);const{blockLen:e,state:n}=this;t=ka(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(e-this.pos,s-i);for(let o=0;o<a;o++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,e&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){ds(this,!1),Fo(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ta(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(tu(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new ff(e,n,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}};const Gp=(r,t,e)=>Vo(()=>new Hp(t,r,e)),Vp=Gp(1,136,256/8);let mu=!1;const bu=function(r){return Vp(r)};let Au=bu;function pt(r){const t=q(r,"data");return H(Au(t))}pt._=bu,pt.lock=function(){mu=!0},pt.register=function(r){if(mu)throw new TypeError("keccak256 is locked");Au=r},Object.freeze(pt);const Eu=function(r){return Pp("sha256").update(r).digest()};let vu=Eu,xu=!1;function Br(r){const t=q(r,"data");return H(vu(t))}Br._=Eu,Br.lock=function(){xu=!0},Br.register=function(r){if(xu)throw new Error("sha256 is locked");vu=r},Object.freeze(Br),Object.freeze(Br);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nu=BigInt(0),Oa=BigInt(1),_p=BigInt(2),Pa=r=>r instanceof Uint8Array,jp=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function fs(r){if(!Pa(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=jp[r[e]];return t}function Iu(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function jo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function ps(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[n]=a}return e}function hn(r){return jo(fs(r))}function Qo(r){if(!Pa(r))throw new Error("Uint8Array expected");return jo(fs(Uint8Array.from(r).reverse()))}function gs(r,t){return ps(r.toString(16).padStart(t*2,"0"))}function zo(r,t){return gs(r,t).reverse()}function Qp(r){return ps(Iu(r))}function xe(r,t,e){let n;if(typeof t=="string")try{n=ps(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Pa(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function ki(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Pa(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function zp(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function Jp(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Kp(r){let t;for(t=0;r>Nu;r>>=Oa,t+=1);return t}function qp(r,t){return r>>BigInt(t)&Oa}const Wp=(r,t,e)=>r|(e?Oa:Nu)<<BigInt(t),Jo=r=>(_p<<BigInt(r-1))-Oa,Ko=r=>new Uint8Array(r),Tu=r=>Uint8Array.from(r);function ku(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=Ko(r),s=Ko(r),i=0;const a=()=>{n.fill(1),s.fill(0),i=0},o=(...h)=>e(s,n,...h),c=(h=Ko())=>{s=o(Tu([0]),h),n=o(),h.length!==0&&(s=o(Tu([1]),h),n=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const u=[];for(;h<t;){n=o();const f=n.slice();u.push(f),h+=n.length}return ki(...u)};return(h,u)=>{a(),c(h);let f;for(;!(f=u(l()));)c();return a(),f}}const Zp={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ci(r,t,e={}){const n=(s,i,a)=>{const o=Zp[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(a&&c===void 0)&&!o(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Yp=Object.freeze(Object.defineProperty({__proto__:null,bitGet:qp,bitLen:Kp,bitMask:Jo,bitSet:Wp,bytesToHex:fs,bytesToNumberBE:hn,bytesToNumberLE:Qo,concatBytes:ki,createHmacDrbg:ku,ensureBytes:xe,equalBytes:zp,hexToBytes:ps,hexToNumber:jo,numberToBytesBE:gs,numberToBytesLE:zo,numberToHexUnpadded:Iu,numberToVarBytesBE:Qp,utf8ToBytes:Jp,validateObject:Ci},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nt=BigInt(0),wt=BigInt(1),dn=BigInt(2),Xp=BigInt(3),qo=BigInt(4),Cu=BigInt(5),Ou=BigInt(8);BigInt(9),BigInt(16);function qt(r,t){const e=r%t;return e>=Nt?e:t+e}function $p(r,t,e){if(e<=Nt||t<Nt)throw new Error("Expected power/modulo > 0");if(e===wt)return Nt;let n=wt;for(;t>Nt;)t&wt&&(n=n*r%e),r=r*r%e,t>>=wt;return n}function le(r,t,e){let n=r;for(;t-- >Nt;)n*=n,n%=e;return n}function Wo(r,t){if(r===Nt||t<=Nt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=qt(r,t),n=t,s=Nt,i=wt;for(;e!==Nt;){const a=n/e,o=n%e,c=s-i*a;n=e,e=o,s=i,i=c}if(n!==wt)throw new Error("invert: does not exist");return qt(s,t)}function tg(r){const t=(r-wt)/dn;let e,n,s;for(e=r-wt,n=0;e%dn===Nt;e/=dn,n++);for(s=dn;s<r&&$p(s,t,r)!==r-wt;s++);if(n===1){const a=(r+wt)/qo;return function(o,c){const l=o.pow(c,a);if(!o.eql(o.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(e+wt)/dn;return function(a,o){if(a.pow(o,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),e),h=a.pow(o,i),u=a.pow(o,e);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let f=1;for(let w=a.sqr(u);f<c&&!a.eql(w,a.ONE);f++)w=a.sqr(w);const y=a.pow(l,wt<<BigInt(c-f-1));l=a.sqr(y),h=a.mul(h,y),u=a.mul(u,l),c=f}return h}}function eg(r){if(r%qo===Xp){const t=(r+wt)/qo;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}if(r%Ou===Cu){const t=(r-Cu)/Ou;return function(e,n){const s=e.mul(n,dn),i=e.pow(s,t),a=e.mul(n,i),o=e.mul(e.mul(a,dn),i),c=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return tg(r)}const rg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ng(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=rg.reduce((n,s)=>(n[s]="function",n),t);return Ci(r,e)}function sg(r,t,e){if(e<Nt)throw new Error("Expected power > 0");if(e===Nt)return r.ONE;if(e===wt)return t;let n=r.ONE,s=t;for(;e>Nt;)e&wt&&(n=r.mul(n,s)),s=r.sqr(s),e>>=wt;return n}function ig(r,t){const e=new Array(t.length),n=t.reduce((i,a,o)=>r.is0(a)?i:(e[o]=i,r.mul(i,a)),r.ONE),s=r.inv(n);return t.reduceRight((i,a,o)=>r.is0(a)?i:(e[o]=r.mul(i,e[o]),r.mul(i,a)),s),e}function Pu(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function ag(r,t,e=!1,n={}){if(r<=Nt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=Pu(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=eg(r),o=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:Jo(s),ZERO:Nt,ONE:wt,create:c=>qt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Nt<=c&&c<r},is0:c=>c===Nt,isOdd:c=>(c&wt)===wt,neg:c=>qt(-c,r),eql:(c,l)=>c===l,sqr:c=>qt(c*c,r),add:(c,l)=>qt(c+l,r),sub:(c,l)=>qt(c-l,r),mul:(c,l)=>qt(c*l,r),pow:(c,l)=>sg(o,c,l),div:(c,l)=>qt(c*Wo(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Wo(c,r),sqrt:n.sqrt||(c=>a(o,c)),invertBatch:c=>ig(o,c),cmov:(c,l,h)=>h?l:c,toBytes:c=>e?zo(c,i):gs(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?Qo(c):hn(c)}});return Object.freeze(o)}function Su(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Bu(r){const t=Su(r);return t+Math.ceil(t/2)}function og(r,t,e=!1){const n=r.length,s=Su(t),i=Bu(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const a=e?hn(r):Qo(r),o=qt(a,t-wt)+wt;return e?zo(o,s):gs(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cg=BigInt(0),Zo=BigInt(1);function lg(r,t){const e=(s,i)=>{const a=i.negate();return s?a:i},n=s=>{const i=Math.ceil(t/s)+1,a=2**(s-1);return{windows:i,windowSize:a}};return{constTimeNegate:e,unsafeLadder(s,i){let a=r.ZERO,o=s;for(;i>cg;)i&Zo&&(a=a.add(o)),o=o.double(),i>>=Zo;return a},precomputeWindow(s,i){const{windows:a,windowSize:o}=n(i),c=[];let l=s,h=l;for(let u=0;u<a;u++){h=l,c.push(h);for(let f=1;f<o;f++)h=h.add(l),c.push(h);l=h.double()}return c},wNAF(s,i,a){const{windows:o,windowSize:c}=n(s);let l=r.ZERO,h=r.BASE;const u=BigInt(2**s-1),f=2**s,y=BigInt(s);for(let w=0;w<o;w++){const g=w*c;let b=Number(a&u);a>>=y,b>c&&(b-=f,a+=Zo);const v=g,C=g+Math.abs(b)-1,I=w%2!==0,R=b<0;b===0?h=h.add(e(I,i[v])):l=l.add(e(R,i[C]))}return{p:l,f:h}},wNAFCached(s,i,a,o){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,o(l))),this.wNAF(c,l,a)}}}function Uu(r){return ng(r.Fp),Ci(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pu(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ug(r){const t=Uu(r);Ci(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:hg,hexToBytes:dg}=Yp,fn={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(r){const{Err:t}=fn;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:hg(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=fn,e=typeof r=="string"?dg(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=fn._parseInt(e.subarray(2)),{d:a,l:o}=fn._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(r){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,e=l=>{const h=l.toString(16);return h.length&1?`0${h}`:h},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,a=s.length/2,o=e(i),c=e(a);return`30${e(a+i+4)}02${c}${s}02${o}${n}`}},er=BigInt(0),ue=BigInt(1);BigInt(2);const Ru=BigInt(3);BigInt(4);function fg(r){const t=ug(r),{Fp:e}=t,n=t.toBytes||((w,g,b)=>{const v=g.toAffine();return ki(Uint8Array.from([4]),e.toBytes(v.x),e.toBytes(v.y))}),s=t.fromBytes||(w=>{const g=w.subarray(1),b=e.fromBytes(g.subarray(0,e.BYTES)),v=e.fromBytes(g.subarray(e.BYTES,2*e.BYTES));return{x:b,y:v}});function i(w){const{a:g,b}=t,v=e.sqr(w),C=e.mul(v,w);return e.add(e.add(C,e.mul(w,g)),b)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return typeof w=="bigint"&&er<w&&w<t.n}function o(w){if(!a(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:g,nByteLength:b,wrapPrivateKey:v,n:C}=t;if(g&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=fs(w)),typeof w!="string"||!g.includes(w.length))throw new Error("Invalid key");w=w.padStart(b*2,"0")}let I;try{I=typeof w=="bigint"?w:hn(xe("private key",w,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof w}`)}return v&&(I=qt(I,C)),o(I),I}const l=new Map;function h(w){if(!(w instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(g,b,v){if(this.px=g,this.py=b,this.pz=v,g==null||!e.isValid(g))throw new Error("x required");if(b==null||!e.isValid(b))throw new Error("y required");if(v==null||!e.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:b,y:v}=g||{};if(!g||!e.isValid(b)||!e.isValid(v))throw new Error("invalid affine point");if(g instanceof u)throw new Error("projective point not allowed");const C=I=>e.eql(I,e.ZERO);return C(b)&&C(v)?u.ZERO:new u(b,v,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const b=e.invertBatch(g.map(v=>v.pz));return g.map((v,C)=>v.toAffine(b[C])).map(u.fromAffine)}static fromHex(g){const b=u.fromAffine(s(xe("pointHex",g)));return b.assertValidity(),b}static fromPrivateKey(g){return u.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:b}=this.toAffine();if(!e.isValid(g)||!e.isValid(b))throw new Error("bad point: x or y not FE");const v=e.sqr(b),C=i(g);if(!e.eql(v,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(e.isOdd)return!e.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){h(g);const{px:b,py:v,pz:C}=this,{px:I,py:R,pz:O}=g,T=e.eql(e.mul(b,O),e.mul(I,C)),S=e.eql(e.mul(v,O),e.mul(R,C));return T&&S}negate(){return new u(this.px,e.neg(this.py),this.pz)}double(){const{a:g,b}=t,v=e.mul(b,Ru),{px:C,py:I,pz:R}=this;let O=e.ZERO,T=e.ZERO,S=e.ZERO,B=e.mul(C,C),j=e.mul(I,I),D=e.mul(R,R),M=e.mul(C,I);return M=e.add(M,M),S=e.mul(C,R),S=e.add(S,S),O=e.mul(g,S),T=e.mul(v,D),T=e.add(O,T),O=e.sub(j,T),T=e.add(j,T),T=e.mul(O,T),O=e.mul(M,O),S=e.mul(v,S),D=e.mul(g,D),M=e.sub(B,D),M=e.mul(g,M),M=e.add(M,S),S=e.add(B,B),B=e.add(S,B),B=e.add(B,D),B=e.mul(B,M),T=e.add(T,B),D=e.mul(I,R),D=e.add(D,D),B=e.mul(D,M),O=e.sub(O,B),S=e.mul(D,j),S=e.add(S,S),S=e.add(S,S),new u(O,T,S)}add(g){h(g);const{px:b,py:v,pz:C}=this,{px:I,py:R,pz:O}=g;let T=e.ZERO,S=e.ZERO,B=e.ZERO;const j=t.a,D=e.mul(t.b,Ru);let M=e.mul(b,I),z=e.mul(v,R),et=e.mul(C,O),vt=e.add(b,v),x=e.add(I,R);vt=e.mul(vt,x),x=e.add(M,z),vt=e.sub(vt,x),x=e.add(b,C);let k=e.add(I,O);return x=e.mul(x,k),k=e.add(M,et),x=e.sub(x,k),k=e.add(v,C),T=e.add(R,O),k=e.mul(k,T),T=e.add(z,et),k=e.sub(k,T),B=e.mul(j,x),T=e.mul(D,et),B=e.add(T,B),T=e.sub(z,B),B=e.add(z,B),S=e.mul(T,B),z=e.add(M,M),z=e.add(z,M),et=e.mul(j,et),x=e.mul(D,x),z=e.add(z,et),et=e.sub(M,et),et=e.mul(j,et),x=e.add(x,et),M=e.mul(z,x),S=e.add(S,M),M=e.mul(k,x),T=e.mul(vt,T),T=e.sub(T,M),M=e.mul(vt,z),B=e.mul(k,B),B=e.add(B,M),new u(T,S,B)}subtract(g){return this.add(g.negate())}is0(){return this.equals(u.ZERO)}wNAF(g){return y.wNAFCached(this,l,g,b=>{const v=e.invertBatch(b.map(C=>C.pz));return b.map((C,I)=>C.toAffine(v[I])).map(u.fromAffine)})}multiplyUnsafe(g){const b=u.ZERO;if(g===er)return b;if(o(g),g===ue)return this;const{endo:v}=t;if(!v)return y.unsafeLadder(this,g);let{k1neg:C,k1:I,k2neg:R,k2:O}=v.splitScalar(g),T=b,S=b,B=this;for(;I>er||O>er;)I&ue&&(T=T.add(B)),O&ue&&(S=S.add(B)),B=B.double(),I>>=ue,O>>=ue;return C&&(T=T.negate()),R&&(S=S.negate()),S=new u(e.mul(S.px,v.beta),S.py,S.pz),T.add(S)}multiply(g){o(g);let b=g,v,C;const{endo:I}=t;if(I){const{k1neg:R,k1:O,k2neg:T,k2:S}=I.splitScalar(b);let{p:B,f:j}=this.wNAF(O),{p:D,f:M}=this.wNAF(S);B=y.constTimeNegate(R,B),D=y.constTimeNegate(T,D),D=new u(e.mul(D.px,I.beta),D.py,D.pz),v=B.add(D),C=j.add(M)}else{const{p:R,f:O}=this.wNAF(b);v=R,C=O}return u.normalizeZ([v,C])[0]}multiplyAndAddUnsafe(g,b,v){const C=u.BASE,I=(O,T)=>T===er||T===ue||!O.equals(C)?O.multiplyUnsafe(T):O.multiply(T),R=I(this,b).add(I(g,v));return R.is0()?void 0:R}toAffine(g){const{px:b,py:v,pz:C}=this,I=this.is0();g==null&&(g=I?e.ONE:e.inv(C));const R=e.mul(b,g),O=e.mul(v,g),T=e.mul(C,g);if(I)return{x:e.ZERO,y:e.ZERO};if(!e.eql(T,e.ONE))throw new Error("invZ was invalid");return{x:R,y:O}}isTorsionFree(){const{h:g,isTorsionFree:b}=t;if(g===ue)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:b}=t;return g===ue?this:b?b(u,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),n(u,this,g)}toHex(g=!0){return fs(this.toRawBytes(g))}}u.BASE=new u(t.Gx,t.Gy,e.ONE),u.ZERO=new u(e.ZERO,e.ONE,e.ZERO);const f=t.nBitLength,y=lg(u,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function pg(r){const t=Uu(r);return Ci(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function gg(r){const t=pg(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function a(x){return er<x&&x<e.ORDER}function o(x){return qt(x,n)}function c(x){return Wo(x,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:h,weierstrassEquation:u,isWithinCurveOrder:f}=fg({...t,toBytes(x,k,L){const J=k.toAffine(),_=e.toBytes(J.x),X=ki;return L?X(Uint8Array.from([k.hasEvenY()?2:3]),_):X(Uint8Array.from([4]),_,e.toBytes(J.y))},fromBytes(x){const k=x.length,L=x[0],J=x.subarray(1);if(k===s&&(L===2||L===3)){const _=hn(J);if(!a(_))throw new Error("Point is not on curve");const X=u(_);let ct=e.sqrt(X);const at=(ct&ue)===ue;return(L&1)===1!==at&&(ct=e.neg(ct)),{x:_,y:ct}}else if(k===i&&L===4){const _=e.fromBytes(J.subarray(0,e.BYTES)),X=e.fromBytes(J.subarray(e.BYTES,2*e.BYTES));return{x:_,y:X}}else throw new Error(`Point of length ${k} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),y=x=>fs(gs(x,t.nByteLength));function w(x){const k=n>>ue;return x>k}function g(x){return w(x)?o(-x):x}const b=(x,k,L)=>hn(x.slice(k,L));class v{constructor(k,L,J){this.r=k,this.s=L,this.recovery=J,this.assertValidity()}static fromCompact(k){const L=t.nByteLength;return k=xe("compactSignature",k,L*2),new v(b(k,0,L),b(k,L,2*L))}static fromDER(k){const{r:L,s:J}=fn.toSig(xe("DER",k));return new v(L,J)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new v(this.r,this.s,k)}recoverPublicKey(k){const{r:L,s:J,recovery:_}=this,X=S(xe("msgHash",k));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const ct=_===2||_===3?L+t.n:L;if(ct>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const at=_&1?"03":"02",kt=l.fromHex(at+y(ct)),xt=c(ct),ie=o(-X*xt),Ue=o(J*xt),Ut=l.BASE.multiplyAndAddUnsafe(kt,ie,Ue);if(!Ut)throw new Error("point at infinify");return Ut.assertValidity(),Ut}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ps(this.toDERHex())}toDERHex(){return fn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ps(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const C={isValidPrivateKey(x){try{return h(x),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const x=Bu(t.n);return og(t.randomBytes(x),t.n)},precompute(x=8,k=l.BASE){return k._setWindowSize(x),k.multiply(BigInt(3)),k}};function I(x,k=!0){return l.fromPrivateKey(x).toRawBytes(k)}function R(x){const k=x instanceof Uint8Array,L=typeof x=="string",J=(k||L)&&x.length;return k?J===s||J===i:L?J===2*s||J===2*i:x instanceof l}function O(x,k,L=!0){if(R(x))throw new Error("first arg must be private key");if(!R(k))throw new Error("second arg must be public key");return l.fromHex(k).multiply(h(x)).toRawBytes(L)}const T=t.bits2int||function(x){const k=hn(x),L=x.length*8-t.nBitLength;return L>0?k>>BigInt(L):k},S=t.bits2int_modN||function(x){return o(T(x))},B=Jo(t.nBitLength);function j(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(er<=x&&x<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return gs(x,t.nByteLength)}function D(x,k,L=M){if(["recovered","canonical"].some(Kt=>Kt in L))throw new Error("sign() legacy options not supported");const{hash:J,randomBytes:_}=t;let{lowS:X,prehash:ct,extraEntropy:at}=L;X==null&&(X=!0),x=xe("msgHash",x),ct&&(x=xe("prehashed msgHash",J(x)));const kt=S(x),xt=h(k),ie=[j(xt),j(kt)];if(at!=null){const Kt=at===!0?_(e.BYTES):at;ie.push(xe("extraEntropy",Kt))}const Ue=ki(...ie),Ut=kt;function ts(Kt){const ae=T(Kt);if(!f(ae))return;const xr=c(ae),At=l.BASE.multiply(ae).toAffine(),oe=o(At.x);if(oe===er)return;const Nr=o(xr*o(Ut+oe*xt));if(Nr===er)return;let ca=(At.x===oe?0:2)|Number(At.y&ue),la=Nr;return X&&w(Nr)&&(la=g(Nr),ca^=1),new v(oe,la,ca)}return{seed:Ue,k2sig:ts}}const M={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function et(x,k,L=M){const{seed:J,k2sig:_}=D(x,k,L),X=t;return ku(X.hash.outputLen,X.nByteLength,X.hmac)(J,_)}l.BASE._setWindowSize(8);function vt(x,k,L,J=z){var xr;const _=x;if(k=xe("msgHash",k),L=xe("publicKey",L),"strict"in J)throw new Error("options.strict was renamed to lowS");const{lowS:X,prehash:ct}=J;let at,kt;try{if(typeof _=="string"||_ instanceof Uint8Array)try{at=v.fromDER(_)}catch(At){if(!(At instanceof fn.Err))throw At;at=v.fromCompact(_)}else if(typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint"){const{r:At,s:oe}=_;at=new v(At,oe)}else throw new Error("PARSE");kt=l.fromHex(L)}catch(At){if(At.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&at.hasHighS())return!1;ct&&(k=t.hash(k));const{r:xt,s:ie}=at,Ue=S(k),Ut=c(ie),ts=o(Ue*Ut),Kt=o(xt*Ut),ae=(xr=l.BASE.multiplyAndAddUnsafe(kt,ts,Kt))==null?void 0:xr.toAffine();return ae?o(ae.x)===xt:!1}return{CURVE:t,getPublicKey:I,getSharedSecret:O,sign:et,verify:vt,ProjectivePoint:l,Signature:v,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wg(r){return{hash:r,hmac:(t,...e)=>nu(r,t,rp(...e)),randomBytes:np}}function yg(r,t){const e=n=>gg({...r,...wg(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Du=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Lu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mg=BigInt(1),Yo=BigInt(2),Fu=(r,t)=>(r+t/Yo)/t;function bg(r){const t=Du,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=r*r*r%t,h=l*l*r%t,u=le(h,e,t)*h%t,f=le(u,e,t)*h%t,y=le(f,Yo,t)*l%t,w=le(y,s,t)*y%t,g=le(w,i,t)*w%t,b=le(g,o,t)*g%t,v=le(b,c,t)*b%t,C=le(v,o,t)*g%t,I=le(C,e,t)*h%t,R=le(I,a,t)*w%t,O=le(R,n,t)*l%t,T=le(O,Yo,t);if(!Xo.eql(Xo.sqr(T),r))throw new Error("Cannot find square root");return T}const Xo=ag(Du,void 0,void 0,{sqrt:bg}),Ur=yg({a:BigInt(0),b:BigInt(7),Fp:Xo,n:Lu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Lu,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-mg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),o=Fu(i*r,t),c=Fu(-n*r,t);let l=qt(r-o*e-c*s,t),h=qt(-o*n-c*i,t);const u=l>a,f=h>a;if(u&&(l=t-l),f&&(h=t-h),l>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:u,k1:l,k2neg:f,k2:h}}}},iu);BigInt(0),Ur.ProjectivePoint;const ws="0x0000000000000000000000000000000000000000",$o="0x0000000000000000000000000000000000000000000000000000000000000000",Mu=BigInt(0),Hu=BigInt(1),Gu=BigInt(2),Vu=BigInt(27),_u=BigInt(28),Sa=BigInt(35),ys={};function ju(r){return Le(Et(r),32)}const Pe=class Pe{constructor(t,e,n,s){N(this,Hs);N(this,Gs);N(this,Vs);N(this,Vn);xi(t,ys,"Signature"),p(this,Hs,e),p(this,Gs,n),p(this,Vs,s),p(this,Vn,null)}get r(){return d(this,Hs)}set r(t){A(an(t)===32,"invalid r","value",t),p(this,Hs,H(t))}get s(){return d(this,Gs)}set s(t){A(an(t)===32,"invalid s","value",t);const e=H(t);A(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),p(this,Gs,e)}get v(){return d(this,Vs)}set v(t){const e=W(t,"value");A(e===27||e===28,"invalid v","v",t),p(this,Vs,e)}get networkV(){return d(this,Vn)}get legacyChainId(){const t=this.networkV;return t==null?null:Pe.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=q(this.s);return this.yParity&&(t[0]|=128),H(t)}get compactSerialized(){return ut([this.r,this.yParityAndS])}get serialized(){return ut([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Pe(ys,this.r,this.s,this.v);return this.networkV&&p(t,Vn,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=V(t,"v");return e==Vu||e==_u?Mu:(A(e>=Sa,"invalid EIP-155 v","v",t),(e-Sa)/Gu)}static getChainIdV(t,e){return V(t)*Gu+BigInt(35+e-27)}static getNormalizedV(t){const e=V(t);return e===Mu||e===Vu?27:e===Hu||e===_u?28:(A(e>=Sa,"invalid v","v",t),e&Hu?27:28)}static from(t){function e(l,h){A(l,h,"signature",t)}if(t==null)return new Pe(ys,$o,$o,27);if(typeof t=="string"){const l=q(t,"signature");if(l.length===64){const h=H(l.slice(0,32)),u=l.slice(32,64),f=u[0]&128?28:27;return u[0]&=127,new Pe(ys,h,H(u),f)}if(l.length===65){const h=H(l.slice(0,32)),u=l.slice(32,64);e((u[0]&128)===0,"non-canonical s");const f=Pe.getNormalizedV(l[64]);return new Pe(ys,h,H(u),f)}e(!1,"invalid raw signature length")}if(t instanceof Pe)return t.clone();const n=t.r;e(n!=null,"missing r");const s=ju(n),i=function(l,h){if(l!=null)return ju(l);if(h!=null){e(ot(h,32),"invalid yParityAndS");const u=q(h);return u[0]&=127,H(u)}e(!1,"missing s")}(t.s,t.yParityAndS);e((q(i)[0]&128)==0,"non-canonical s");const{networkV:a,v:o}=function(l,h,u){if(l!=null){const f=V(l);return{networkV:f>=Sa?f:void 0,v:Pe.getNormalizedV(f)}}if(h!=null)return e(ot(h,32),"invalid yParityAndS"),{v:q(h)[0]&128?28:27};if(u!=null){switch(W(u,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new Pe(ys,s,i,o);return a&&p(c,Vn,a),e(t.yParity==null||W(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Hs=new WeakMap,Gs=new WeakMap,Vs=new WeakMap,Vn=new WeakMap;let he=Pe;const _n=class _n{constructor(t){N(this,dr);A(an(t)===32,"invalid private key","privateKey","[REDACTED]"),p(this,dr,H(t))}get privateKey(){return d(this,dr)}get publicKey(){return _n.computePublicKey(d(this,dr))}get compressedPublicKey(){return _n.computePublicKey(d(this,dr),!0)}sign(t){A(an(t)===32,"invalid digest length","digest",t);const e=Ur.sign(Gt(t),Gt(d(this,dr)),{lowS:!0});return he.from({r:Tr(e.r,32),s:Tr(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=_n.computePublicKey(t);return H(Ur.getSharedSecret(Gt(d(this,dr)),q(e),!1))}static computePublicKey(t,e){let n=q(t,"key");if(n.length===32){const i=Ur.getPublicKey(n,!!e);return H(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=Ur.ProjectivePoint.fromHex(n);return H(s.toRawBytes(e))}static recoverPublicKey(t,e){A(an(t)===32,"invalid digest length","digest",t);const n=he.from(e);let s=Ur.Signature.fromCompact(Gt(ut([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(Gt(t));return A(i!=null,"invalid signautre for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=Ur.ProjectivePoint.fromHex(_n.computePublicKey(t).substring(2)),i=Ur.ProjectivePoint.fromHex(_n.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}};dr=new WeakMap;let Oi=_n;const Ag=BigInt(0),Eg=BigInt(36);function Qu(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=q(pt(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const tc={};for(let r=0;r<10;r++)tc[String(r)]=String(r);for(let r=0;r<26;r++)tc[String.fromCharCode(65+r)]=String(10+r);const zu=15;function vg(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>tc[n]).join("");for(;t.length>=zu;){let n=t.substring(0,zu);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const xg=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function Ng(r){r=r.toLowerCase();let t=Ag;for(let e=0;e<r.length;e++)t=t*Eg+xg[r[e]];return t}function st(r){if(A(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=Qu(r);return A(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){A(r.substring(2,4)===vg(r),"bad icap checksum","address",r);let t=Ng(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Qu("0x"+t)}A(!1,"invalid address","address",r)}function Ig(r){const t=st(r.from);let e=V(r.nonce,"tx.nonce").toString(16);return e==="0"?e="0x":e.length%2?e="0x0"+e:e="0x"+e,st(ft(pt(ln([t,e])),12))}function Ju(r){return r&&typeof r.getAddress=="function"}async function ec(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(P(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),A(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),st(e)}function _t(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?st(r):(P(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),ec(r,t.resolveName(r)));if(Ju(r))return ec(r,r.getAddress());if(r&&typeof r.then=="function")return ec(r,r);A(!1,"unsupported addressable value","target",r)}const rr={};function G(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new Dt(rr,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function rt(r,t){return new Dt(rr,`bytes${t||""}`,r,{size:t})}const Ku=Symbol.for("_ethers_typed"),fr=class fr{constructor(t,e,n,s){E(this,"type");E(this,"value");N(this,jn);E(this,"_typedSymbol");s==null&&(s=null),xi(rr,t,"Typed"),Q(this,{_typedSymbol:Ku,type:e,value:n}),p(this,jn,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return d(this,jn)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return d(this,jn)===!0?-1:d(this,jn)===!1?this.value.length:null}static from(t,e){return new fr(rr,t,e)}static uint8(t){return G(t,8)}static uint16(t){return G(t,16)}static uint24(t){return G(t,24)}static uint32(t){return G(t,32)}static uint40(t){return G(t,40)}static uint48(t){return G(t,48)}static uint56(t){return G(t,56)}static uint64(t){return G(t,64)}static uint72(t){return G(t,72)}static uint80(t){return G(t,80)}static uint88(t){return G(t,88)}static uint96(t){return G(t,96)}static uint104(t){return G(t,104)}static uint112(t){return G(t,112)}static uint120(t){return G(t,120)}static uint128(t){return G(t,128)}static uint136(t){return G(t,136)}static uint144(t){return G(t,144)}static uint152(t){return G(t,152)}static uint160(t){return G(t,160)}static uint168(t){return G(t,168)}static uint176(t){return G(t,176)}static uint184(t){return G(t,184)}static uint192(t){return G(t,192)}static uint200(t){return G(t,200)}static uint208(t){return G(t,208)}static uint216(t){return G(t,216)}static uint224(t){return G(t,224)}static uint232(t){return G(t,232)}static uint240(t){return G(t,240)}static uint248(t){return G(t,248)}static uint256(t){return G(t,256)}static uint(t){return G(t,256)}static int8(t){return G(t,-8)}static int16(t){return G(t,-16)}static int24(t){return G(t,-24)}static int32(t){return G(t,-32)}static int40(t){return G(t,-40)}static int48(t){return G(t,-48)}static int56(t){return G(t,-56)}static int64(t){return G(t,-64)}static int72(t){return G(t,-72)}static int80(t){return G(t,-80)}static int88(t){return G(t,-88)}static int96(t){return G(t,-96)}static int104(t){return G(t,-104)}static int112(t){return G(t,-112)}static int120(t){return G(t,-120)}static int128(t){return G(t,-128)}static int136(t){return G(t,-136)}static int144(t){return G(t,-144)}static int152(t){return G(t,-152)}static int160(t){return G(t,-160)}static int168(t){return G(t,-168)}static int176(t){return G(t,-176)}static int184(t){return G(t,-184)}static int192(t){return G(t,-192)}static int200(t){return G(t,-200)}static int208(t){return G(t,-208)}static int216(t){return G(t,-216)}static int224(t){return G(t,-224)}static int232(t){return G(t,-232)}static int240(t){return G(t,-240)}static int248(t){return G(t,-248)}static int256(t){return G(t,-256)}static int(t){return G(t,-256)}static bytes1(t){return rt(t,1)}static bytes2(t){return rt(t,2)}static bytes3(t){return rt(t,3)}static bytes4(t){return rt(t,4)}static bytes5(t){return rt(t,5)}static bytes6(t){return rt(t,6)}static bytes7(t){return rt(t,7)}static bytes8(t){return rt(t,8)}static bytes9(t){return rt(t,9)}static bytes10(t){return rt(t,10)}static bytes11(t){return rt(t,11)}static bytes12(t){return rt(t,12)}static bytes13(t){return rt(t,13)}static bytes14(t){return rt(t,14)}static bytes15(t){return rt(t,15)}static bytes16(t){return rt(t,16)}static bytes17(t){return rt(t,17)}static bytes18(t){return rt(t,18)}static bytes19(t){return rt(t,19)}static bytes20(t){return rt(t,20)}static bytes21(t){return rt(t,21)}static bytes22(t){return rt(t,22)}static bytes23(t){return rt(t,23)}static bytes24(t){return rt(t,24)}static bytes25(t){return rt(t,25)}static bytes26(t){return rt(t,26)}static bytes27(t){return rt(t,27)}static bytes28(t){return rt(t,28)}static bytes29(t){return rt(t,29)}static bytes30(t){return rt(t,30)}static bytes31(t){return rt(t,31)}static bytes32(t){return rt(t,32)}static address(t){return new fr(rr,"address",t)}static bool(t){return new fr(rr,"bool",!!t)}static bytes(t){return new fr(rr,"bytes",t)}static string(t){return new fr(rr,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new fr(rr,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Ku}static dereference(t,e){if(fr.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};jn=new WeakMap;let Dt=fr;class Tg extends tr{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=Dt.dereference(e,"string");try{n=st(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return st(Tr(t.readValue(),20))}}class kg extends tr{constructor(e){super(e.name,e.type,"_",e.dynamic);E(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function qu(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(l=>{const h=l.localName;return P(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),P(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),c[h]=!0,e[h]})}else A(!1,"invalid tuple value","tuple",e);A(t.length===n.length,"types/value length mismatch","tuple",e);let s=new Do,i=new Do,a=[];t.forEach((c,l)=>{let h=n[l];if(c.dynamic){let u=i.length;c.encode(i,h);let f=s.writeUpdatableValue();a.push(y=>{f(y+u)})}else c.encode(s,h)}),a.forEach(c=>{c(s.length)});let o=r.appendWriter(s);return o+=r.appendWriter(i),o}function Wu(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let a=null;if(i.dynamic){let o=r.readIndex(),c=s.subReader(o);try{a=i.decode(c)}catch(l){if(Rt(l,"BUFFER_OVERRUN"))throw l;a=l,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(r)}catch(o){if(Rt(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");e.push(a),n.push(i.localName||null)}),hs.fromItems(e,n)}class Cg extends tr{constructor(e,n,s){const i=e.type+"["+(n>=0?n:"")+"]",a=n===-1||e.dynamic;super("array",i,s,a);E(this,"coder");E(this,"length");Q(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(e);return n}encode(e,n){const s=Dt.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),Cl(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<s.length;o++)a.push(this.coder);return qu(e,a,s)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),P(n*Vt<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*Vt,length:e.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new kg(this.coder));return Wu(e,s)}}class Og extends tr{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=Dt.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class Zu extends tr{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Gt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class Pg extends Zu{constructor(t){super("bytes",t)}decode(t){return H(super.decode(t))}}class Sg extends tr{constructor(e,n){let s="bytes"+String(e);super(s,s,n,!1);E(this,"size");Q(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let s=Gt(Dt.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(s)}decode(e){return H(e.readBytes(this.size))}}const Bg=new Uint8Array([]);class Ug extends tr{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(Bg)}decode(t){return t.readBytes(0),null}}const Rg=BigInt(0),Dg=BigInt(1),Lg=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Fg extends tr{constructor(e,n,s){const i=(n?"int":"uint")+e*8;super(i,i,s,!1);E(this,"size");E(this,"signed");Q(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let s=V(Dt.dereference(n,this.type)),i=on(Lg,Vt*8);if(this.signed){let a=on(i,this.size*8-1);(s>a||s<-(a+Dg))&&this._throwError("value out-of-bounds",n),s=Oo(s,8*Vt)}else(s<Rg||s>on(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(s)}decode(e){let n=on(e.readValue(),this.size*8);return this.signed&&(n=ba(n,this.size*8)),n}}class Mg extends Zu{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Ee(Dt.dereference(e,"string")))}decode(t){return Ea(super.decode(t))}}class Ba extends tr{constructor(e,n){let s=!1;const i=[];e.forEach(o=>{o.dynamic&&(s=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,n,s);E(this,"coders");Q(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const a=i.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});return this.coders.forEach((s,i)=>{let a=s.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[i]))}),Object.freeze(e)}encode(e,n){const s=Dt.dereference(n,"tuple");return qu(e,this.coders,s)}decode(e){return Wu(e,this.coders)}}function pn(r){return pt(Ee(r))}var Hg="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";const Yu=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Xu=4;function Gg(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let O=1;O<n;O++)i.push(s+=e());let a=e(),o=t;t+=a;let c=0,l=0;function h(){return c==0&&(l=l<<8|r[t++],c=8),l>>--c&1}const u=31,f=2**u,y=f>>>1,w=y>>1,g=f-1;let b=0;for(let O=0;O<u;O++)b=b<<1|h();let v=[],C=0,I=f;for(;;){let O=Math.floor(((b-C+1)*s-1)/I),T=0,S=n;for(;S-T>1;){let D=T+S>>>1;O<i[D]?S=D:T=D}if(T==0)break;v.push(T);let B=C+Math.floor(I*i[T]/s),j=C+Math.floor(I*i[T+1]/s)-1;for(;!((B^j)&y);)b=b<<1&g|h(),B=B<<1&g,j=j<<1&g|1;for(;B&~j&w;)b=b&y|b<<1&g>>>1|h(),B=B<<1^y,j=(j^y)<<1|y|1;C=B,I=1+j-B}let R=n-4;return v.map(O=>{switch(O-R){case 3:return R+65792+(r[o++]<<16|r[o++]<<8|r[o++]);case 2:return R+256+(r[o++]<<8|r[o++]);case 1:return R+r[o++];default:return O-1}})}function Vg(r){let t=0;return()=>r[t++]}function $u(r){return Vg(Gg(_g(r)))}function _g(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,a=0,o=0;s<e;s++)o=o<<6|t[r.charCodeAt(s)],a+=6,a>=8&&(n[i++]=o>>(a-=8));return n}function jg(r){return r&1?~r>>1:r>>1}function Qg(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=jg(t());return e}function Pi(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function th(r){return Si(()=>{let t=Pi(r);if(t.length)return t})}function eh(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(zg(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(Jg(e,r))}return t.flat()}function Si(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function rh(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)Qg(r,e).forEach((i,a)=>n[a].push(i));return n}function zg(r,t){let e=1+t(),n=t(),s=Si(t);return rh(s.length,1+r,t).flatMap((i,a)=>{let[o,...c]=i;return Array(s[a]).fill().map((l,h)=>{let u=h*n;return[o+h*e,c.map(f=>f+u)]})})}function Jg(r,t){let e=1+t();return rh(e,1+r,t).map(n=>[n[0],n.slice(1)])}function Kg(r){let t=[],e=Pi(r);return s(n([]),[]),t;function n(i){let a=r(),o=Si(()=>{let c=Pi(r).map(l=>e[l]);if(c.length)return n(c)});return{S:a,B:o,Q:i}}function s({S:i,B:a},o,c){if(!(i&4&&c===o[o.length-1])){i&2&&(c=o[o.length-1]),i&1&&t.push(o);for(let l of a)for(let h of l.Q)s(l,[...o,h],c)}}}function qg(r){return r.toString(16).toUpperCase().padStart(2,"0")}function nh(r){return`{${qg(r)}}`}function Wg(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function ms(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let e=[];for(let n=0;n<t;)e.push(String.fromCodePoint(...r.slice(n,n+=4096)));return e.join("")}function Zg(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var Yg="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";const Bi=44032,Ua=4352,Ra=4449,Da=4519,sh=19,ih=21,bs=28,La=ih*bs,Xg=sh*La,$g=Bi+Xg,tw=Ua+sh,ew=Ra+ih,rw=Da+bs;function Ui(r){return r>>24&255}function ah(r){return r&16777215}let rc,oh,nc,Fa;function nw(){let r=$u(Yg);rc=new Map(th(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),oh=new Set(Pi(r)),nc=new Map,Fa=new Map;for(let[t,e]of eh(r)){if(!oh.has(t)&&e.length==2){let[n,s]=e,i=Fa.get(n);i||(i=new Map,Fa.set(n,i)),i.set(s,t)}nc.set(t,e.reverse())}}function ch(r){return r>=Bi&&r<$g}function sw(r,t){if(r>=Ua&&r<tw&&t>=Ra&&t<ew)return Bi+(r-Ua)*La+(t-Ra)*bs;if(ch(r)&&t>Da&&t<rw&&(r-Bi)%bs==0)return r+(t-Da);{let e=Fa.get(r);return e&&(e=e.get(t),e)?e:-1}}function lh(r){rc||nw();let t=[],e=[],n=!1;function s(i){let a=rc.get(i);a&&(n=!0,i|=a),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(ch(i)){let a=i-Bi,o=a/La|0,c=a%La/bs|0,l=a%bs;s(Ua+o),s(Ra+c),l>0&&s(Da+l)}else{let a=nc.get(i);a?e.push(...a):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=Ui(t[0]);for(let a=1;a<t.length;a++){let o=Ui(t[a]);if(o==0||i<=o){i=o;continue}let c=a-1;for(;;){let l=t[c+1];if(t[c+1]=t[c],t[c]=l,!c||(i=Ui(t[--c]),i<=o))break}i=Ui(t[a])}}return t}function iw(r){let t=[],e=[],n=-1,s=0;for(let i of r){let a=Ui(i),o=ah(i);if(n==-1)a==0?n=o:t.push(o);else if(s>0&&s>=a)a==0?(t.push(n,...e),e.length=0,n=o):e.push(o),s=a;else{let c=sw(n,o);c>=0?n=c:s==0&&a==0?(t.push(n),n=o):(e.push(o),s=a)}}return n>=0&&t.push(n,...e),t}function uh(r){return lh(r).map(ah)}function aw(r){return iw(lh(r))}const hh=45,dh=".",fh=65039,ph=1,Ma=r=>Array.from(r);function Ri(r,t){return r.P.has(t)||r.Q.has(t)}class ow extends Array{get is_emoji(){return!0}}let sc,gh,gn,ic,wh,As,ac,Es,wn,yh,oc;function cc(){if(sc)return;let r=$u(Hg);const t=()=>Pi(r),e=()=>new Set(t()),n=(h,u)=>u.forEach(f=>h.add(f));sc=new Map(eh(r)),gh=e(),gn=t(),ic=new Set(t().map(h=>gn[h])),gn=new Set(gn),wh=e(),e();let s=th(r),i=r();const a=()=>{let h=new Set;return t().forEach(u=>n(h,s[u])),n(h,t()),h};As=Si(h=>{let u=Si(r).map(f=>f+96);if(u.length){let f=h>=i;u[0]-=32,u=ms(u),f&&(u=`Restricted[${u}]`);let y=a(),w=a(),g=!r();return{N:u,P:y,Q:w,M:g,R:f}}}),ac=e(),Es=new Map;let o=t().concat(Ma(ac)).sort((h,u)=>h-u);o.forEach((h,u)=>{let f=r(),y=o[u]=f?o[u-f]:{V:[],M:new Map};y.V.push(h),ac.has(h)||Es.set(h,y)});for(let{V:h,M:u}of new Set(Es.values())){let f=[];for(let w of h){let g=As.filter(v=>Ri(v,w)),b=f.find(({G:v})=>g.some(C=>v.has(C)));b||(b={G:new Set,V:[]},f.push(b)),b.V.push(w),n(b.G,g)}let y=f.flatMap(w=>Ma(w.G));for(let{G:w,V:g}of f){let b=new Set(y.filter(v=>!w.has(v)));for(let v of g)u.set(v,b)}}wn=new Set;let c=new Set;const l=h=>wn.has(h)?c.add(h):wn.add(h);for(let h of As){for(let u of h.P)l(u);for(let u of h.Q)l(u)}for(let h of wn)!Es.has(h)&&!c.has(h)&&Es.set(h,ph);n(wn,uh(wn)),yh=Kg(r).map(h=>ow.from(h)).sort(Zg),oc=new Map;for(let h of yh){let u=[oc];for(let f of h){let y=u.map(w=>{let g=w.get(f);return g||(g=new Map,w.set(f,g)),g});f===fh?u.push(...y):u=y}for(let f of u)f.V=h}}function lc(r){return(mh(r)?"":`${uc(Ha([r]))} `)+nh(r)}function uc(r){return`"${r}"‎`}function cw(r){if(r.length>=4&&r[2]==hh&&r[3]==hh)throw new Error(`invalid label extension: "${ms(r.slice(0,4))}"`)}function lw(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function uw(r){let t=r[0],e=Yu.get(t);if(e)throw Di(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let a=Yu.get(t);if(a){if(s==i)throw Di(`${e} + ${a}`);s=i+1,e=a}}if(s==n)throw Di(`trailing ${e}`)}function Ha(r,t=1/0,e=nh){let n=[];hw(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let a=0;a<i;a++){let o=r[a];mh(o)&&(n.push(ms(r.slice(s,a))),n.push(e(o)),s=a+1)}return n.push(ms(r.slice(s,i))),n.join("")}function hw(r){return cc(),gn.has(r)}function mh(r){return cc(),wh.has(r)}function dw(r){return ww(fw(r,aw,bw))}function fw(r,t,e){if(!r)return[];cc();let n=0;return r.split(dh).map(s=>{let i=Wg(s),a={input:i,offset:n};n+=i.length+1;try{let o=a.tokens=mw(i,t,e),c=o.length,l;if(!c)throw new Error("empty label");let h=a.output=o.flat();if(lw(h),!(a.emoji=c>1||o[0].is_emoji)&&h.every(u=>u<128))cw(h),l="ASCII";else{let u=o.flatMap(f=>f.is_emoji?[]:f);if(!u.length)l="Emoji";else{if(gn.has(h[0]))throw Di("leading combining mark");for(let w=1;w<c;w++){let g=o[w];if(!g.is_emoji&&gn.has(g[0]))throw Di(`emoji + combining mark: "${ms(o[w-1])} + ${Ha([g[0]])}"`)}uw(h);let f=Ma(new Set(u)),[y]=gw(f);yw(y,u),pw(y,f),l=y.N}}a.type=l}catch(o){a.error=o}return a})}function pw(r,t){let e,n=[];for(let s of t){let i=Es.get(s);if(i===ph)return;if(i){let a=i.M.get(s);if(e=e?e.filter(o=>a.has(o)):Ma(a),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>Ri(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function gw(r){let t=As;for(let e of r){let n=t.filter(s=>Ri(s,e));if(!n.length)throw As.some(s=>Ri(s,e))?Ah(t[0],e):bh(e);if(t=n,n.length==1)break}return t}function ww(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${uc(Ha(t,63))}: ${s}`)}return ms(n)}).join(dh)}function bh(r){return new Error(`disallowed character: ${lc(r)}`)}function Ah(r,t){let e=lc(t),n=As.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function Di(r){return new Error(`illegal placement: ${r}`)}function yw(r,t){for(let e of t)if(!Ri(r,e))throw Ah(r,e);if(r.M){let e=uh(t);for(let n=1,s=e.length;n<s;n++)if(ic.has(e[n])){let i=n+1;for(let a;i<s&&ic.has(a=e[i]);i++)for(let o=n;o<i;o++)if(e[o]==a)throw new Error(`duplicate non-spacing marks: ${lc(a)}`);if(i-n>Xu)throw new Error(`excessive non-spacing marks: ${uc(Ha(e.slice(n-1,i)))} (${i-n}/${Xu})`);n=i}}}function mw(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=Aw(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let a=r.pop();if(wn.has(a))s.push(a);else{let o=sc.get(a);if(o)s.push(...o);else if(!gh.has(a))throw bh(a)}}}return s.length&&n.push(t(s)),n}function bw(r){return r.filter(t=>t!=fh)}function Aw(r,t){let e=oc,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const Eh=new Uint8Array(32);Eh.fill(0);function vh(r){return A(r.length!==0,"invalid ENS name; empty component","comp",r),r}function xh(r){const t=Ee(Ew(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(vh(t.slice(n,s))),n=s+1);return A(n<t.length,"invalid ENS name; empty component","name",r),e.push(vh(t.slice(n))),e}function Ew(r){try{if(r.length===0)throw new Error("empty label");return dw(r)}catch(t){A(!1,`invalid ENS name (${t.message})`,"name",r)}}function hc(r){A(typeof r=="string","invalid ENS name; not a string","name",r),A(r.length,"invalid ENS name (empty label)","name",r);let t=Eh;const e=xh(r);for(;e.length;)t=pt(ut([t,pt(e.pop())]));return H(t)}function vw(r,t){const e=t;return A(e<=255,"DNS encoded label cannot exceed 255","length",e),H(ut(xh(r).map(n=>{A(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}function dc(r,t){return{address:st(r),storageKeys:t.map((e,n)=>(A(ot(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function yn(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(A(e.length===2,"invalid slot set",`value[${n}]`,e),dc(e[0],e[1])):(A(e!=null&&typeof e=="object","invalid address-slot set","value",r),dc(e.address,e.storageKeys)));A(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return dc(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function xw(r){let t;return typeof r=="string"?t=Oi.computePublicKey(r,!1):t=r.publicKey,st(pt("0x"+t.substring(4)).substring(26))}function Nh(r,t){return xw(Oi.recoverPublicKey(r,t))}const It=BigInt(0),Nw=BigInt(2),Iw=BigInt(27),Tw=BigInt(28),kw=BigInt(35),Cw=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),fc=4096*32;function Ih(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=Br(t).substring(4),"0x"+e}function Ga(r){return r==="0x"?null:st(r)}function pc(r,t){try{return yn(r)}catch(e){A(!1,e.message,t,r)}}function Li(r,t){return r==="0x"?0:W(r,t)}function yt(r,t){if(r==="0x")return It;const e=V(r,t);return A(e<=Cw,"value exceeds uint size",t,e),e}function lt(r,t){const e=V(r,"value"),n=Et(e);return A(n.length<=32,"value too large",`tx.${t}`,e),n}function gc(r){return yn(r).map(t=>[t.address,t.storageKeys])}function Ow(r,t){A(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)A(ot(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function Pw(r){const t=Na(r);A(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:Li(t[0],"nonce"),gasPrice:yt(t[1],"gasPrice"),gasLimit:yt(t[2],"gasLimit"),to:Ga(t[3]),value:yt(t[4],"value"),data:H(t[5]),chainId:It};if(t.length===6)return e;const n=yt(t[6],"v"),s=yt(t[7],"r"),i=yt(t[8],"s");if(s===It&&i===It)e.chainId=n;else{let a=(n-kw)/Nw;a<It&&(a=It),e.chainId=a,A(a!==It||n===Iw||n===Tw,"non-canonical legacy v","v",t[6]),e.signature=he.from({r:Le(t[7],32),s:Le(t[8],32),v:n})}return e}function Sw(r,t){const e=[lt(r.nonce,"nonce"),lt(r.gasPrice||0,"gasPrice"),lt(r.gasLimit,"gasLimit"),r.to||"0x",lt(r.value,"value"),r.data];let n=It;if(r.chainId!=It)n=V(r.chainId,"tx.chainId"),A(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==It&&(e.push(Et(n)),e.push("0x"),e.push("0x")),ln(e);let s=BigInt(27+t.yParity);return n!==It?s=he.getChainIdV(n,t.v):BigInt(t.v)!==s&&A(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(Et(s)),e.push(Et(t.r)),e.push(Et(t.s)),ln(e)}function wc(r,t){let e;try{if(e=Li(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{A(!1,"invalid yParity","yParity",t[0])}const n=Le(t[1],32),s=Le(t[2],32),i=he.from({r:n,s,yParity:e});r.signature=i}function Bw(r){const t=Na(q(r).slice(1));A(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",H(r));const e={type:2,chainId:yt(t[0],"chainId"),nonce:Li(t[1],"nonce"),maxPriorityFeePerGas:yt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:yt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:yt(t[4],"gasLimit"),to:Ga(t[5]),value:yt(t[6],"value"),data:H(t[7]),accessList:pc(t[8],"accessList")};return t.length===9||wc(e,t.slice(9)),e}function Uw(r,t){const e=[lt(r.chainId,"chainId"),lt(r.nonce,"nonce"),lt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),lt(r.maxFeePerGas||0,"maxFeePerGas"),lt(r.gasLimit,"gasLimit"),r.to||"0x",lt(r.value,"value"),r.data,gc(r.accessList||[])];return t&&(e.push(lt(t.yParity,"yParity")),e.push(Et(t.r)),e.push(Et(t.s))),ut(["0x02",ln(e)])}function Rw(r){const t=Na(q(r).slice(1));A(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",H(r));const e={type:1,chainId:yt(t[0],"chainId"),nonce:Li(t[1],"nonce"),gasPrice:yt(t[2],"gasPrice"),gasLimit:yt(t[3],"gasLimit"),to:Ga(t[4]),value:yt(t[5],"value"),data:H(t[6]),accessList:pc(t[7],"accessList")};return t.length===8||wc(e,t.slice(8)),e}function Dw(r,t){const e=[lt(r.chainId,"chainId"),lt(r.nonce,"nonce"),lt(r.gasPrice||0,"gasPrice"),lt(r.gasLimit,"gasLimit"),r.to||"0x",lt(r.value,"value"),r.data,gc(r.accessList||[])];return t&&(e.push(lt(t.yParity,"recoveryParam")),e.push(Et(t.r)),e.push(Et(t.s))),ut(["0x01",ln(e)])}function Lw(r){let t=Na(q(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],a=t[2],o=t[3];A(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),A(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),A(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),A(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",t),A(i.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:i[c],commitment:a[c],proof:o[c]});t=t[0]}A(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",H(r));const s={type:3,chainId:yt(t[0],"chainId"),nonce:Li(t[1],"nonce"),maxPriorityFeePerGas:yt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:yt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:yt(t[4],"gasLimit"),to:Ga(t[5]),value:yt(t[6],"value"),data:H(t[7]),accessList:pc(t[8],"accessList"),maxFeePerBlobGas:yt(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),A(s.to!=null,`invalid address for transaction type: ${e}`,"data",r),A(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)A(ot(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return t.length===11||wc(s,t.slice(11)),s}function Fw(r,t,e){const n=[lt(r.chainId,"chainId"),lt(r.nonce,"nonce"),lt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),lt(r.maxFeePerGas||0,"maxFeePerGas"),lt(r.gasLimit,"gasLimit"),r.to||ws,lt(r.value,"value"),r.data,gc(r.accessList||[]),lt(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Ow(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(lt(t.yParity,"yParity")),n.push(Et(t.r)),n.push(Et(t.s)),e)?ut(["0x03",ln([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):ut(["0x03",ln(n)])}const gr=class gr{constructor(){N(this,$s);N(this,je);N(this,_s);N(this,js);N(this,Qs);N(this,zs);N(this,Js);N(this,Ks);N(this,qs);N(this,Ws);N(this,Zs);N(this,Ys);N(this,Xs);N(this,Qn);N(this,_r);N(this,pr);N(this,jr);p(this,je,null),p(this,_s,null),p(this,Qs,0),p(this,zs,It),p(this,Js,null),p(this,Ks,null),p(this,qs,null),p(this,js,"0x"),p(this,Ws,It),p(this,Zs,It),p(this,Ys,null),p(this,Xs,null),p(this,Qn,null),p(this,_r,null),p(this,jr,null),p(this,pr,null)}get type(){return d(this,je)}set type(t){switch(t){case null:p(this,je,null);break;case 0:case"legacy":p(this,je,0);break;case 1:case"berlin":case"eip-2930":p(this,je,1);break;case 2:case"london":case"eip-1559":p(this,je,2);break;case 3:case"cancun":case"eip-4844":p(this,je,3);break;default:A(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=d(this,_s);return t==null&&this.type===3?ws:t}set to(t){p(this,_s,t==null?null:st(t))}get nonce(){return d(this,Qs)}set nonce(t){p(this,Qs,W(t,"value"))}get gasLimit(){return d(this,zs)}set gasLimit(t){p(this,zs,V(t))}get gasPrice(){const t=d(this,Js);return t==null&&(this.type===0||this.type===1)?It:t}set gasPrice(t){p(this,Js,t==null?null:V(t,"gasPrice"))}get maxPriorityFeePerGas(){return d(this,Ks)??(this.type===2||this.type===3?It:null)}set maxPriorityFeePerGas(t){p(this,Ks,t==null?null:V(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){return d(this,qs)??(this.type===2||this.type===3?It:null)}set maxFeePerGas(t){p(this,qs,t==null?null:V(t,"maxFeePerGas"))}get data(){return d(this,js)}set data(t){p(this,js,H(t))}get value(){return d(this,Ws)}set value(t){p(this,Ws,V(t,"value"))}get chainId(){return d(this,Zs)}set chainId(t){p(this,Zs,V(t))}get signature(){return d(this,Ys)||null}set signature(t){p(this,Ys,t==null?null:he.from(t))}get accessList(){return(d(this,Xs)||null)??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){p(this,Xs,t==null?null:yn(t))}get maxFeePerBlobGas(){const t=d(this,Qn);return t==null&&this.type===3?It:t}set maxFeePerBlobGas(t){p(this,Qn,t==null?null:V(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=d(this,_r);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){A(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)A(ot(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}p(this,_r,t)}get blobs(){return d(this,jr)==null?null:d(this,jr).map(t=>Object.assign({},t))}set blobs(t){if(t==null){p(this,jr,null);return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(ko(i)){P(d(this,pr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=q(i);if(A(a.length<=fc,"blob is too large",`blobs[${s}]`,i),a.length!==fc){const l=new Uint8Array(fc);l.set(a),a=l}const o=d(this,pr).blobToKzgCommitment(a),c=H(d(this,pr).computeBlobKzgProof(a,o));e.push({data:H(a),commitment:H(o),proof:c}),n.push(Ih(1,o))}else{const a=H(i.commitment);e.push({data:H(i.data),commitment:a,proof:H(i.proof)}),n.push(Ih(1,a))}}p(this,jr,e),p(this,_r,n)}get kzg(){return d(this,pr)}set kzg(t){p(this,pr,t)}get hash(){return this.signature==null?null:pt(U(this,$s,yo).call(this,!0,!1))}get unsignedHash(){return pt(this.unsignedSerialized)}get from(){return this.signature==null?null:Nh(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Oi.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return U(this,$s,yo).call(this,!0,!0)}get unsignedSerialized(){return U(this,$s,yo).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=d(this,Qn)!=null||d(this,_r);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&P(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),P(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),P(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return gr.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new gr;if(typeof t=="string"){const n=q(t);if(n[0]>=127)return gr.from(Pw(n));switch(n[0]){case 1:return gr.from(Rw(n));case 2:return gr.from(Bw(n));case 3:return gr.from(Lw(n))}P(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new gr;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=he.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(A(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),A(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(A(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),A(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};je=new WeakMap,_s=new WeakMap,js=new WeakMap,Qs=new WeakMap,zs=new WeakMap,Js=new WeakMap,Ks=new WeakMap,qs=new WeakMap,Ws=new WeakMap,Zs=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Qn=new WeakMap,_r=new WeakMap,pr=new WeakMap,jr=new WeakMap,$s=new WeakSet,yo=function(t,e){P(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return Sw(this,n);case 1:return Dw(this,n);case 2:return Uw(this,n);case 3:return Fw(this,n,e?this.blobs:null)}P(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Va=gr;const Mw=new RegExp("^bytes([0-9]+)$"),Hw=new RegExp("^(u?int)([0-9]*)$"),Gw=new RegExp("^(.*)\\[([0-9]*)\\]$");function Th(r,t,e){switch(r){case"address":return q(e?Le(t,32):st(t));case"string":return Ee(t);case"bytes":return q(t);case"bool":return t=t?"0x01":"0x00",q(e?Le(t,32):t)}let n=r.match(Hw);if(n){let s=n[1]==="int",i=parseInt(n[2]||"256");return A((!n[2]||n[2]===String(i))&&i%8===0&&i!==0&&i<=256,"invalid number type","type",r),e&&(i=256),s&&(t=Oo(t,i)),q(Le(Et(t),i/8))}if(n=r.match(Mw),n){const s=parseInt(n[1]);return A(String(s)===n[1]&&s!==0&&s<=32,"invalid bytes type","type",r),A(an(t)===s,`invalid value for ${r}`,"value",t),e?q(Co(t,32)):t}if(n=r.match(Gw),n&&Array.isArray(t)){const s=n[1],i=parseInt(n[2]||String(t.length));A(i===t.length,`invalid array length for ${r}`,"value",t);const a=[];return t.forEach(function(o){a.push(Th(s,o,!0))}),q(ut(a))}A(!1,"invalid type","type",r)}function Vw(r,t){A(r.length===t.length,"wrong number of values; expected ${ types.length }","values",t);const e=[];return r.forEach(function(n,s){e.push(Th(n,t[s]))}),H(ut(e))}function _w(r,t){return pt(Vw(r,t))}const kh=new Uint8Array(32);kh.fill(0);const jw=BigInt(-1),Ch=BigInt(0),Oh=BigInt(1),Qw=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function zw(r){const t=q(r),e=t.length%32;return e?ut([t,kh.slice(e)]):H(t)}const Jw=Tr(Oh,32),Kw=Tr(Ch,32),Ph={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},yc=["name","version","chainId","verifyingContract","salt"];function Sh(r){return function(t){return A(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const qw={name:Sh("name"),version:Sh("version"),chainId:function(r){const t=V(r,"domain.chainId");return A(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):os(t)},verifyingContract:function(r){try{return st(r).toLowerCase()}catch{}A(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=q(r,"domain.salt");return A(t.length===32,'invalid domain value "salt"',"domain.salt",r),H(t)}};function mc(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);A(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=on(Qw,e?n-1:n),i=e?(s+Oh)*jw:Ch;return function(a){const o=V(a,"value");return A(o>=i&&o<=s,`value out-of-bounds for ${r}`,"value",o),Tr(e?Oo(o,256):o,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return A(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=q(n);return A(s.length===e,`invalid length for ${r}`,"value",n),zw(n)}}}switch(r){case"address":return function(t){return Le(st(t),32)};case"bool":return function(t){return t?Jw:Kw};case"bytes":return function(t){return pt(t)};case"string":return function(t){return pn(t)}}return null}function Bh(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function _a(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}const pe=class pe{constructor(t){N(this,lo);E(this,"primaryType");N(this,Xi);N(this,wr);N(this,ti);p(this,wr,new Map),p(this,ti,new Map);const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:l,type:h})=>{let{base:u,index:f}=_a(h);return u==="int"&&!t.int&&(u="int256"),u==="uint"&&!t.uint&&(u="uint256"),{name:l,type:u+(f||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),p(this,Xi,JSON.stringify(i));for(const c in i){const l=new Set;for(const h of i[c]){A(!l.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(c)}`,"types",t),l.add(h.name);const u=_a(h.type).base;A(u!==c,`circular type reference to ${JSON.stringify(u)}`,"types",t),!mc(u)&&(A(n.has(u),`unknown type ${JSON.stringify(u)}`,"types",t),n.get(u).push(c),e.get(c).add(u))}}const a=Array.from(n.keys()).filter(c=>n.get(c).length===0);A(a.length!==0,"missing primary type","types",t),A(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),Q(this,{primaryType:a[0]});function o(c,l){A(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),l.add(c);for(const h of e.get(c))if(n.has(h)){o(h,l);for(const u of l)s.get(u).add(h)}l.delete(c)}o(this.primaryType,new Set);for(const[c,l]of s){const h=Array.from(l);h.sort(),d(this,wr).set(c,Bh(c,i[c])+h.map(u=>Bh(u,i[u])).join(""))}}get types(){return JSON.parse(d(this,Xi))}getEncoder(t){let e=d(this,ti).get(t);return e||(e=U(this,lo,pf).call(this,t),d(this,ti).set(t,e)),e}encodeType(t){const e=d(this,wr).get(t);return A(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return pt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(mc(t))return n(t,e);const s=_a(t).array;if(s)return A(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(a=>this._visit(s.prefix,a,n));const i=this.types[t];if(i)return i.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,e[o],n),a),{});A(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new pe(t)}static getPrimaryType(t){return pe.from(t).primaryType}static hashStruct(t,e,n){return pe.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=Ph[n];A(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>yc.indexOf(n.name)-yc.indexOf(s.name)),pe.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return ut(["0x1901",pe.hashDomain(t),pe.from(e).hash(n)])}static hash(t,e,n){return pt(pe.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const o in t)t[o]==null&&delete t[o];const i={};t.verifyingContract&&!ot(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const a=pe.from(e);a.visit(n,(o,c)=>(o==="address"&&!ot(c,20)&&(i[c]="0x"),c));for(const o in i)i[o]=await s(o);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){pe.hashDomain(t);const s={},i=[];yc.forEach(c=>{const l=t[c];l!=null&&(s[c]=qw[c](l),i.push({name:c,type:Ph[c]}))});const a=pe.from(e);e=a.types;const o=Object.assign({},e);return A(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=i,a.encode(n),{types:o,domain:s,primaryType:a.primaryType,message:a.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return H(q(l));if(c.match(/^u?int/))return V(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return A(typeof l=="string","invalid string","value",l),l}A(!1,"unsupported type","type",c)})}}};Xi=new WeakMap,wr=new WeakMap,ti=new WeakMap,lo=new WeakSet,pf=function(t){{const s=mc(t);if(s)return s}const e=_a(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return a=>{A(e.count===-1||e.count===a.length,`array length mismatch; expected length ${e.count}`,"value",a);let o=a.map(i);return d(this,wr).has(s)&&(o=o.map(pt)),pt(ut(o))}}const n=this.types[t];if(n){const s=pn(d(this,wr).get(t));return i=>{const a=n.map(({name:o,type:c})=>{const l=this.getEncoder(c)(i[o]);return d(this,wr).has(c)?pt(l):l});return a.unshift(s),ut(a)}}A(!1,`unknown type: ${t}`,"type",t)};let ja=pe;function jt(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const Ww="external public payable override",Zw=jt(Ww.split(" ")),Uh="constant external internal payable private public pure view override",Yw=jt(Uh.split(" ")),Rh="constructor error event fallback function receive struct",Dh=jt(Rh.split(" ")),Lh="calldata memory storage payable indexed",Xw=jt(Lh.split(" ")),$w="tuple returns",ty=[Rh,Lh,$w,Uh].join(" "),ey=jt(ty.split(" ")),ry={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},ny=new RegExp("^(\\s*)"),sy=new RegExp("^([0-9]+)"),iy=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Fh=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Mh=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),uo=class uo{constructor(t){N(this,$i);N(this,Bt);N(this,Se);p(this,Bt,0),p(this,Se,t.slice())}get offset(){return d(this,Bt)}get length(){return d(this,Se).length-d(this,Bt)}clone(){return new uo(d(this,Se))}reset(){p(this,Bt,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=U(this,$i,fl).call(this,d(this,Bt)+1,t.match+1);return p(this,Bt,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;d(this,Bt)<t.match-1;){const n=this.peek().linkNext;e.push(U(this,$i,fl).call(this,d(this,Bt)+1,n)),p(this,Bt,n)}return p(this,Bt,t.match+1),e}peek(){if(d(this,Bt)>=d(this,Se).length)throw new Error("out-of-bounds");return d(this,Se)[d(this,Bt)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return ua(this,Bt)._++,t}toString(){const t=[];for(let e=d(this,Bt);e<d(this,Se).length;e++){const n=d(this,Se)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};Bt=new WeakMap,Se=new WeakMap,$i=new WeakSet,fl=function(t=0,e=0){return new uo(d(this,Se).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let Ne=uo;function Rr(r){const t=[],e=a=>{const o=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let n=[],s=[],i=0;for(;i<r.length;){let a=r.substring(i),o=a.match(ny);o&&(i+=o[1].length,a=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=ry[a[0]]||"";if(l){if(c.type=l,c.text=a[0],i++,l==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(l=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(l==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let h=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const u=t.pop().text;h=u+h,t[t.length-1].value=W(u)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=h}continue}if(o=a.match(iy),o){if(c.text=o[1],i+=c.text.length,ey.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Mh)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(sy),o){c.text=o[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new Ne(t.map(a=>Object.freeze(a)))}function Hh(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Qa(r,t){if(t.peekKeyword(Dh)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function nr(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function Gh(r){let t=nr(r,Yw);return Hh(t,jt("constant payable nonpayable".split(" "))),Hh(t,jt("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function sr(r,t){return r.popParams().map(e=>Ct.from(e,t))}function Vh(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return V(r.pop().text);throw new Error("invalid gas")}return null}function mn(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const ay=new RegExp(/^(.*)\[([0-9]*)\]$/);function _h(r){const t=r.match(Mh);if(A(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);A(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);A(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const ht={},Wt=Symbol.for("_ethers_internal"),jh="_ParamTypeInternal",Qh="_ErrorInternal",zh="_EventInternal",Jh="_ConstructorInternal",Kh="_FallbackInternal",qh="_FunctionInternal",Wh="_StructInternal",ge=class ge{constructor(t,e,n,s,i,a,o,c){N(this,ei);E(this,"name");E(this,"type");E(this,"baseType");E(this,"indexed");E(this,"components");E(this,"arrayLength");E(this,"arrayChildren");if(xi(t,ht,"ParamType"),Object.defineProperty(this,Wt,{value:jh}),a&&(a=Object.freeze(a.slice())),s==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(s==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");Q(this,{name:e,type:n,baseType:s,indexed:i,components:a,arrayLength:o,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],s=[t];return U(this,ei,mo).call(this,n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if(ge.isParamType(t))return t;if(typeof t=="string")try{return ge.from(Rr(t),e)}catch{A(!1,"invalid param type","obj",t)}else if(t instanceof Ne){let o="",c="",l=null;nr(t,jt(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",l=t.popParams().map(w=>ge.from(w)),o=`tuple(${l.map(w=>w.format()).join(",")})`):(o=_h(t.popType("TYPE")),c=o);let h=null,u=null;for(;t.length&&t.peekType("BRACKET");){const w=t.pop();h=new ge(ht,"",o,c,null,l,u,h),u=w.value,o+=w.text,c="array",l=null}let f=null;if(nr(t,Xw).has("indexed")){if(!e)throw new Error("");f=!0}const y=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new ge(ht,y,o,c,f,l,u,h)}const n=t.name;A(!n||typeof n=="string"&&n.match(Fh),"invalid name","obj.name",n);let s=t.indexed;s!=null&&(A(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,a=i.match(ay);if(a){const o=parseInt(a[2]||"-1"),c=ge.from({type:a[1],components:t.components});return new ge(ht,n||"",i,"array",s,null,o,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=t.components!=null?t.components.map(c=>ge.from(c)):null;return new ge(ht,n||"",i,"tuple",s,o,null,null)}return i=_h(t.type),new ge(ht,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[Wt]===jh}};ei=new WeakSet,mo=function(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=e.slice();o.forEach((c,l)=>{var h;U(h=a,ei,mo).call(h,t,c,n,u=>{o[l]=u})}),s(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,l)=>{var h;U(h=a[l],ei,mo).call(h,t,c,n,u=>{o[l]=u})}),s(o);return}const i=n(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Ct=ge;class bn{constructor(t,e,n){E(this,"type");E(this,"inputs");xi(t,ht,"Fragment"),n=Object.freeze(n.slice()),Q(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{bn.from(JSON.parse(t))}catch{}return bn.from(Rr(t))}if(t instanceof Ne)switch(t.peekKeyword(Dh)){case"constructor":return ir.from(t);case"error":return Zt.from(t);case"event":return Me.from(t);case"fallback":case"receive":return ar.from(t);case"function":return He.from(t);case"struct":return An.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return ir.from(t);case"error":return Zt.from(t);case"event":return Me.from(t);case"fallback":case"receive":return ar.from(t);case"function":return He.from(t);case"struct":return An.from(t)}P(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}A(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return ir.isFragment(t)}static isError(t){return Zt.isFragment(t)}static isEvent(t){return Me.isFragment(t)}static isFunction(t){return He.isFragment(t)}static isStruct(t){return An.isFragment(t)}}class za extends bn{constructor(e,n,s,i){super(e,n,i);E(this,"name");A(typeof s=="string"&&s.match(Fh),"invalid identifier","name",s),i=Object.freeze(i.slice()),Q(this,{name:s})}}function Fi(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class Zt extends za{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,Wt,{value:Qh})}get selector(){return pn(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+Fi(t,this.inputs)),e.join(" ")}static from(t){if(Zt.isFragment(t))return t;if(typeof t=="string")return Zt.from(Rr(t));if(t instanceof Ne){const e=Qa("error",t),n=sr(t);return mn(t),new Zt(ht,e,n)}return new Zt(ht,t.name,t.inputs?t.inputs.map(Ct.from):[])}static isFragment(t){return t&&t[Wt]===Qh}}class Me extends za{constructor(e,n,s,i){super(e,"event",n,s);E(this,"anonymous");Object.defineProperty(this,Wt,{value:zh}),Q(this,{anonymous:i})}get topicHash(){return pn(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Fi(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(s=>Ct.from(s)),new Me(ht,e,n,!1).topicHash}static from(e){if(Me.isFragment(e))return e;if(typeof e=="string")try{return Me.from(Rr(e))}catch{A(!1,"invalid event fragment","obj",e)}else if(e instanceof Ne){const n=Qa("event",e),s=sr(e,!0),i=!!nr(e,jt(["anonymous"])).has("anonymous");return mn(e),new Me(ht,n,s,i)}return new Me(ht,e.name,e.inputs?e.inputs.map(n=>Ct.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Wt]===zh}}class ir extends bn{constructor(e,n,s,i,a){super(e,n,s);E(this,"payable");E(this,"gas");Object.defineProperty(this,Wt,{value:Jh}),Q(this,{payable:i,gas:a})}format(e){if(P(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[`constructor${Fi(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(ir.isFragment(e))return e;if(typeof e=="string")try{return ir.from(Rr(e))}catch{A(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Ne){nr(e,jt(["constructor"]));const n=sr(e),s=!!nr(e,Zw).has("payable"),i=Vh(e);return mn(e),new ir(ht,"constructor",n,s,i)}return new ir(ht,"constructor",e.inputs?e.inputs.map(Ct.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Wt]===Jh}}class ar extends bn{constructor(e,n,s){super(e,"fallback",n);E(this,"payable");Object.defineProperty(this,Wt,{value:Kh}),Q(this,{payable:s})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(e){if(ar.isFragment(e))return e;if(typeof e=="string")try{return ar.from(Rr(e))}catch{A(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Ne){const n=e.toString(),s=e.peekKeyword(jt(["fallback","receive"]));if(A(s,"type must be fallback or receive","obj",n),e.popKeyword(jt(["fallback","receive"]))==="receive"){const o=sr(e);return A(o.length===0,"receive cannot have arguments","obj.inputs",o),nr(e,jt(["payable"])),mn(e),new ar(ht,[],!0)}let i=sr(e);i.length?A(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(o=>o.format("minimal")).join(", ")):i=[Ct.from("bytes")];const a=Gh(e);if(A(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),nr(e,jt(["returns"])).has("returns")){const o=sr(e);A(o.length===1&&o[0].type==="bytes","invalid fallback outputs","obj.outputs",o.map(c=>c.format("minimal")).join(", "))}return mn(e),new ar(ht,i,a==="payable")}if(e.type==="receive")return new ar(ht,[],!0);if(e.type==="fallback"){const n=[Ct.from("bytes")],s=e.stateMutability==="payable";return new ar(ht,n,s)}A(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Wt]===Kh}}class He extends za{constructor(e,n,s,i,a,o){super(e,"function",n,i);E(this,"constant");E(this,"outputs");E(this,"stateMutability");E(this,"payable");E(this,"gas");Object.defineProperty(this,Wt,{value:qh}),a=Object.freeze(a.slice()),Q(this,{constant:s==="view"||s==="pure",gas:o,outputs:a,payable:s==="payable",stateMutability:s})}get selector(){return pn(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Fi(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Fi(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(s=>Ct.from(s)),new He(ht,e,"view",n,[],null).selector}static from(e){if(He.isFragment(e))return e;if(typeof e=="string")try{return He.from(Rr(e))}catch{A(!1,"invalid function fragment","obj",e)}else if(e instanceof Ne){const s=Qa("function",e),i=sr(e),a=Gh(e);let o=[];nr(e,jt(["returns"])).has("returns")&&(o=sr(e));const c=Vh(e);return mn(e),new He(ht,s,a,i,o,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new He(ht,e.name,n,e.inputs?e.inputs.map(Ct.from):[],e.outputs?e.outputs.map(Ct.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Wt]===qh}}class An extends za{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,Wt,{value:Wh})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return An.from(Rr(t))}catch{A(!1,"invalid struct fragment","obj",t)}else if(t instanceof Ne){const e=Qa("struct",t),n=sr(t);return mn(t),new An(ht,e,n)}return new An(ht,t.name,t.inputs?t.inputs.map(Ct.from):[])}static isFragment(t){return t&&t[Wt]===Wh}}const Ie=new Map;Ie.set(0,"GENERIC_PANIC"),Ie.set(1,"ASSERT_FALSE"),Ie.set(17,"OVERFLOW"),Ie.set(18,"DIVIDE_BY_ZERO"),Ie.set(33,"ENUM_RANGE_ERROR"),Ie.set(34,"BAD_STORAGE_DATA"),Ie.set(49,"STACK_UNDERFLOW"),Ie.set(50,"ARRAY_RANGE_ERROR"),Ie.set(65,"OUT_OF_MEMORY"),Ie.set(81,"UNINITIALIZED_FUNCTION_CALL");const oy=new RegExp(/^bytes([0-9]*)$/),cy=new RegExp(/^(u?int)([0-9]*)$/);let bc=null,Zh=1024;function ly(r,t,e,n){let s="missing revert data",i=null;const a=null;let o=null;if(e){s="execution reverted";const l=q(e);if(e=H(e),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(H(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(H(l.slice(0,4))==="0x4e487b71")try{const h=Number(n.decode(["uint256"],l.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${Ie.get(h)||"UNKNOWN"}(${h})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?st(t.to):null,data:t.data||"0x"};return t.from&&(c.from=st(t.from)),dt(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:a,revert:o})}const ho=class ho{constructor(){N(this,Qr)}getDefaultValue(t){const e=t.map(n=>U(this,Qr,bi).call(this,Ct.from(n)));return new Ba(e,"_").defaultValue()}encode(t,e){Cl(e.length,t.length,"types/values length mismatch");const n=t.map(a=>U(this,Qr,bi).call(this,Ct.from(a))),s=new Ba(n,"_"),i=new Do;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(i=>U(this,Qr,bi).call(this,Ct.from(i)));return new Ba(s,"_").decode(new Lo(e,n,Zh))}static _setDefaultMaxInflation(t){A(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Zh=t}static defaultAbiCoder(){return bc==null&&(bc=new ho),bc}static getBuiltinCallException(t,e,n){return ly(t,e,n,ho.defaultAbiCoder())}};Qr=new WeakSet,bi=function(t){if(t.isArray())return new Cg(U(this,Qr,bi).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ba(t.components.map(n=>U(this,Qr,bi).call(this,n)),t.name);switch(t.baseType){case"address":return new Tg(t.name);case"bool":return new Og(t.name);case"string":return new Mg(t.name);case"bytes":return new Pg(t.name);case"":return new Ug(t.name)}let e=t.type.match(cy);if(e){let n=parseInt(e[2]||"256");return A(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new Fg(n/8,e[1]==="int",t.name)}if(e=t.type.match(oy),e){let n=parseInt(e[1]);return A(n!==0&&n<=32,"invalid bytes length","param",t),new Sg(n,t.name)}A(!1,"invalid type","type",t.type)};let En=ho;function Ac(r){const t=Ee(r);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Co(t,32)}class uy{constructor(t,e,n){E(this,"fragment");E(this,"name");E(this,"signature");E(this,"topic");E(this,"args");const s=t.name,i=t.format();Q(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class hy{constructor(t,e,n,s){E(this,"fragment");E(this,"name");E(this,"args");E(this,"signature");E(this,"selector");E(this,"value");const i=t.name,a=t.format();Q(this,{fragment:t,name:i,args:n,signature:a,selector:e,value:s})}}class dy{constructor(t,e,n){E(this,"fragment");E(this,"name");E(this,"args");E(this,"signature");E(this,"selector");const s=t.name,i=t.format();Q(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class Yh{constructor(t){E(this,"hash");E(this,"_isIndexed");Q(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Xh={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},$h={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&Xh[r.toString()]&&(t=Xh[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}},zn=class zn{constructor(t){N(this,Ke);E(this,"fragments");E(this,"deploy");E(this,"fallback");E(this,"receive");N(this,Qe);N(this,ze);N(this,Je);N(this,Lt);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,p(this,Je,new Map),p(this,Qe,new Map),p(this,ze,new Map);const n=[];for(const a of e)try{n.push(bn.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}Q(this,{fragments:Object.freeze(n)});let s=null,i=!1;p(this,Lt,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Q(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(A(!s||a.payable!==s.payable,"conflicting fallback fragments",`fragments[${o}]`,a),s=a,i=s.payable);return;case"function":c=d(this,Je);break;case"event":c=d(this,ze);break;case"error":c=d(this,Qe);break;default:return}const l=a.format();c.has(l)||c.set(l,a)}),this.deploy||Q(this,{deploy:ir.from("constructor()")}),Q(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(n=>n.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return En.defaultAbiCoder()}getFunctionName(t){const e=U(this,Ke,bo).call(this,t,null,!1);return A(e,"no matching function","key",t),e.name}hasFunction(t){return!!U(this,Ke,bo).call(this,t,null,!1)}getFunction(t,e){return U(this,Ke,bo).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(d(this,Je).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(d(this,Je).get(s),n)}}getEventName(t){const e=U(this,Ke,Ao).call(this,t,null,!1);return A(e,"no matching event","key",t),e.name}hasEvent(t){return!!U(this,Ke,Ao).call(this,t,null,!1)}getEvent(t,e){return U(this,Ke,Ao).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(d(this,ze).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(d(this,ze).get(s),n)}}getError(t,e){if(ot(t)){const s=t.toLowerCase();if($h[s])return Zt.from($h[s].signature);for(const i of d(this,Qe).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,a]of d(this,Qe))i.split("(")[0]===t&&s.push(a);if(s.length===0)return t==="Error"?Zt.from("error Error(string)"):t==="Panic"?Zt.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(a=>JSON.stringify(a.format())).join(", ");A(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}return t=Zt.from(t).format(),t==="Error(string)"?Zt.from("error Error(string)"):t==="Panic(uint256)"?Zt.from("error Panic(uint256)"):d(this,Qe).get(t)||null}forEachError(t){const e=Array.from(d(this,Qe).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(d(this,Qe).get(s),n)}}_decodeParams(t,e){return d(this,Lt).decode(t,e)}_encodeParams(t,e){return d(this,Lt).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);A(n,"unknown error","fragment",t),t=n}return A(ft(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,ft(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);A(n,"unknown error","fragment",t),t=n}return ut([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);A(n,"unknown function","fragment",t),t=n}return A(ft(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,ft(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);A(n,"unknown function","fragment",t),t=n}return ut([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);A(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=Gt(e);if(s.length%32===0)try{return d(this,Lt).decode(t.outputs,s)}catch{n="could not decode result data"}P(!1,n,"BAD_DATA",{value:H(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=q(t,"data"),s=En.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=H(n.slice(0,4)),o=this.getError(a);if(o)try{const c=d(this,Lt).decode(o.inputs,n.slice(4));s.revert={name:o.name,signature:o.format(),args:c},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const i=this.parseTransaction(e);return i&&(s.invocation={method:i.name,signature:i.signature,args:i.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);A(n,"unknown function","fragment",t),t=n}return H(d(this,Lt).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);A(i,"unknown event","eventFragment",t),t=i}P(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,a)=>i.type==="string"?pn(a):i.type==="bytes"?pt(H(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=Tr(a):i.type.match(/^bytes/)?a=Co(a,32):i.type==="address"&&d(this,Lt).encode(["address"],[a]),Le(H(a),32));for(e.forEach((i,a)=>{const o=t.inputs[a];if(!o.indexed){A(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?A(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?n.push(i.map(c=>s(o,c))):n.push(s(o,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const a=this.getEvent(t);A(a,"unknown event","eventFragment",t),t=a}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),A(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((a,o)=>{const c=e[o];if(a.indexed)if(a.type==="string")n.push(pn(c));else if(a.type==="bytes")n.push(pt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(d(this,Lt).encode([a.type],[c]))}else s.push(a),i.push(c)}),{data:d(this,Lt).encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const y=this.getEvent(t);A(y,"unknown event","eventFragment",t),t=y}if(n!=null&&!t.anonymous){const y=t.topicHash;A(ot(n[0],32)&&n[0].toLowerCase()===y,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],a=[];t.inputs.forEach((y,w)=>{y.indexed?y.type==="string"||y.type==="bytes"||y.baseType==="tuple"||y.baseType==="array"?(s.push(Ct.from({type:"bytes32",name:y.name})),a.push(!0)):(s.push(y),a.push(!1)):(i.push(y),a.push(!1))});const o=n!=null?d(this,Lt).decode(s,ut(n)):null,c=d(this,Lt).decode(i,e,!0),l=[],h=[];let u=0,f=0;return t.inputs.forEach((y,w)=>{let g=null;if(y.indexed)if(o==null)g=new Yh(null);else if(a[w])g=new Yh(o[f++]);else try{g=o[f++]}catch(b){g=b}else try{g=c[u++]}catch(b){g=b}l.push(g),h.push(y.name||null)}),hs.fromItems(l,h)}parseTransaction(t){const e=q(t.data,"tx.data"),n=V(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(H(e.slice(0,4)));if(!s)return null;const i=d(this,Lt).decode(s.inputs,e.slice(4));return new hy(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new uy(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=H(t),n=this.getError(ft(e,0,4));if(!n)return null;const s=d(this,Lt).decode(n.inputs,ft(e,4));return new dy(n,n.selector,s)}static from(t){return t instanceof zn?t:typeof t=="string"?new zn(JSON.parse(t)):typeof t.formatJson=="function"?new zn(t.formatJson()):typeof t.format=="function"?new zn(t.format("json")):new zn(t)}};Qe=new WeakMap,ze=new WeakMap,Je=new WeakMap,Lt=new WeakMap,Ke=new WeakSet,bo=function(t,e,n){if(ot(t)){const i=t.toLowerCase();for(const a of d(this,Je).values())if(i===a.selector)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of d(this,Je))a.split("(")[0]===t&&i.push(o);if(e){const a=e.length>0?e[e.length-1]:null;let o=e.length,c=!0;Dt.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let l=i.length-1;l>=0;l--){const h=i[l].inputs.length;h!==o&&(!c||h!==o-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const h=i[l].inputs;for(let u=0;u<e.length;u++)if(Dt.isTyped(e[u])){if(u>=h.length){if(e[u].type==="overrides")continue;i.splice(l,1);break}if(e[u].type!==h[u].baseType){i.splice(l,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const a=e[e.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous function description (i.e. matches ${a})`,"key",t)}return i[0]}return d(this,Je).get(He.from(t).format())||null},Ao=function(t,e,n){if(ot(t)){const i=t.toLowerCase();for(const a of d(this,ze).values())if(i===a.topicHash)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of d(this,ze))a.split("(")[0]===t&&i.push(o);if(e){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<e.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let c=0;c<e.length;c++)if(Dt.isTyped(e[c])&&e[c].type!==o[c].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous event description (i.e. matches ${a})`,"key",t)}return i[0]}return d(this,ze).get(Me.from(t).format())||null};let Dr=zn;const td=BigInt(0);function vs(r){return r??null}function mt(r){return r==null?null:r.toString()}class ed{constructor(t,e,n){E(this,"gasPrice");E(this,"maxFeePerGas");E(this,"maxPriorityFeePerGas");Q(this,{gasPrice:vs(t),maxFeePerGas:vs(e),maxPriorityFeePerGas:vs(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:mt(t),maxFeePerGas:mt(e),maxPriorityFeePerGas:mt(n)}}}function Ja(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=H(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=V(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=W(r[s],`request.${s}`));return r.accessList&&(t.accessList=yn(r.accessList)),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>ko(s)?H(s):Object.assign({},s))),t}class fy{constructor(t,e){E(this,"provider");E(this,"number");E(this,"hash");E(this,"timestamp");E(this,"parentHash");E(this,"parentBeaconBlockRoot");E(this,"nonce");E(this,"difficulty");E(this,"gasLimit");E(this,"gasUsed");E(this,"stateRoot");E(this,"receiptsRoot");E(this,"blobGasUsed");E(this,"excessBlobGas");E(this,"miner");E(this,"prevRandao");E(this,"extraData");E(this,"baseFeePerGas");N(this,yr);p(this,yr,t.transactions.map(n=>typeof n!="string"?new Hi(n,e):n)),Q(this,{provider:e,hash:vs(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:vs(t.prevRandao),extraData:t.extraData,baseFeePerGas:vs(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return d(this,yr).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=d(this,yr).slice();return t.length===0?[]:(P(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:a,miner:o,prevRandao:c,nonce:l,number:h,parentHash:u,parentBeaconBlockRoot:f,stateRoot:y,receiptsRoot:w,timestamp:g,transactions:b}=this;return{_type:"Block",baseFeePerGas:mt(t),difficulty:mt(e),extraData:n,gasLimit:mt(s),gasUsed:mt(i),blobGasUsed:mt(this.blobGasUsed),excessBlobGas:mt(this.excessBlobGas),hash:a,miner:o,prevRandao:c,nonce:l,number:h,parentHash:u,timestamp:g,parentBeaconBlockRoot:f,stateRoot:y,receiptsRoot:w,transactions:b}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return d(this,yr).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=d(this,yr)[t];else{const n=t.toLowerCase();for(const s of d(this,yr))if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash===n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;A(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return py(this)}}yr=new WeakMap;class Mi{constructor(t,e){E(this,"provider");E(this,"transactionHash");E(this,"blockHash");E(this,"blockNumber");E(this,"removed");E(this,"address");E(this,"data");E(this,"topics");E(this,"index");E(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());Q(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:l}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return P(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return P(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return P(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return gy(this)}}class rd{constructor(t,e){E(this,"provider");E(this,"to");E(this,"from");E(this,"contractAddress");E(this,"hash");E(this,"index");E(this,"blockHash");E(this,"blockNumber");E(this,"logsBloom");E(this,"gasUsed");E(this,"blobGasUsed");E(this,"cumulativeGasUsed");E(this,"gasPrice");E(this,"blobGasPrice");E(this,"type");E(this,"status");E(this,"root");N(this,ta);p(this,ta,Object.freeze(t.logs.map(s=>new Mi(s,e))));let n=td;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),Q(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return d(this,ta)}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:l,status:h,root:u}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:n,cumulativeGasUsed:mt(this.cumulativeGasUsed),from:e,gasPrice:mt(this.gasPrice),blobGasUsed:mt(this.blobGasUsed),blobGasPrice:mt(this.blobGasPrice),gasUsed:mt(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:u,status:h,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return sd(this)}reorderedEvent(t){return P(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),nd(this,t)}}ta=new WeakMap;const il=class il{constructor(t,e){E(this,"provider");E(this,"blockNumber");E(this,"blockHash");E(this,"index");E(this,"hash");E(this,"type");E(this,"to");E(this,"from");E(this,"nonce");E(this,"gasLimit");E(this,"gasPrice");E(this,"maxPriorityFeePerGas");E(this,"maxFeePerGas");E(this,"maxFeePerBlobGas");E(this,"data");E(this,"value");E(this,"chainId");E(this,"signature");E(this,"accessList");E(this,"blobVersionedHashes");N(this,zr);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,p(this,zr,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:a,from:o,nonce:c,data:l,signature:h,accessList:u,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:t,blockHash:e,blobVersionedHashes:f,chainId:mt(this.chainId),data:l,from:o,gasLimit:mt(this.gasLimit),gasPrice:mt(this.gasPrice),hash:s,maxFeePerGas:mt(this.maxFeePerGas),maxPriorityFeePerGas:mt(this.maxPriorityFeePerGas),maxFeePerBlobGas:mt(this.maxFeePerBlobGas),nonce:c,signature:h,to:a,index:n,type:i,value:mt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:e}=await Ht({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=d(this,zr),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:u,nonce:f}=await Ht({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=u;return}if(o)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(a===-1&&(a=i-3,a<d(this,zr)&&(a=d(this,zr)));a<=u;){if(o)return null;const w=await this.provider.getBlock(a,!0);if(w==null)return;for(const g of w)if(g===this.hash)return;for(let g=0;g<w.length;g++){const b=await w.getTransaction(g);if(b.from===this.from&&b.nonce===this.nonce){if(o)return null;const v=await this.provider.getTransactionReceipt(b.hash);if(v==null||u-v.blockNumber+1<n)return;let C="replaced";b.data===this.data&&b.to===this.to&&b.value===this.value?C="repriced":b.data==="0x"&&b.from===b.to&&b.value===td&&(C="cancelled"),P(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:b.replaceableTransaction(i),hash:b.hash,receipt:v})}}a++}},l=u=>{if(u==null||u.status!==0)return u;P(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:u.to,from:u.from,data:""},receipt:u})},h=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(h);if(h){if(await h.confirmations()>=n)return l(h)}else if(await c(),n===0)return null;return await new Promise((u,f)=>{const y=[],w=()=>{y.forEach(b=>b())};if(y.push(()=>{o=!0}),s>0){const b=setTimeout(()=>{w(),f(dt("wait for transaction timeout","TIMEOUT"))},s);y.push(()=>{clearTimeout(b)})}const g=async b=>{if(await b.confirmations()>=n){w();try{u(l(b))}catch(v){f(v)}}};if(y.push(()=>{this.provider.off(this.hash,g)}),this.provider.on(this.hash,g),i>=0){const b=async()=>{try{await c()}catch(v){if(Rt(v,"TRANSACTION_REPLACED")){w(),f(v);return}}o||this.provider.once("block",b)};y.push(()=>{this.provider.off("block",b)}),this.provider.once("block",b)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return P(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),sd(this)}reorderedEvent(t){return P(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),P(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),nd(this,t)}replaceableTransaction(t){A(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new il(this,this.provider);return p(e,zr,t),e}};zr=new WeakMap;let Hi=il;function py(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function nd(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function sd(r){return{orphan:"drop-transaction",tx:r}}function gy(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class Ec extends Mi{constructor(e,n,s){super(e,e.provider);E(this,"interface");E(this,"fragment");E(this,"args");const i=n.decodeEventLog(s,e.data,e.topics);Q(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class id extends Mi{constructor(e,n){super(e,e.provider);E(this,"error");Q(this,{error:n})}}class wy extends rd{constructor(e,n,s){super(s,n);N(this,ri);p(this,ri,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?d(this,ri).getEvent(e.topics[0]):null;if(n)try{return new Ec(e,d(this,ri),n)}catch(s){return new id(e,s)}return e})}}ri=new WeakMap;class vc extends Hi{constructor(e,n,s){super(s,n);N(this,ea);p(this,ea,e)}async wait(e,n){const s=await super.wait(e,n);return s==null?null:new wy(d(this,ea),this.provider,s)}}ea=new WeakMap;class ad extends Dl{constructor(e,n,s,i){super(e,n,s);E(this,"log");Q(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class yy extends ad{constructor(t,e,n,s,i){super(t,e,n,new Ec(i,t.interface,s));const a=t.interface.decodeEventLog(s,this.log.data,this.log.topics);Q(this,{args:a,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const od=BigInt(0);function cd(r){return r&&typeof r.call=="function"}function ld(r){return r&&typeof r.estimateGas=="function"}function Ka(r){return r&&typeof r.resolveName=="function"}function ud(r){return r&&typeof r.sendTransaction=="function"}function hd(r){if(r!=null){if(Ka(r))return r;if(r.provider)return r.provider}}class my{constructor(t,e,n){N(this,ra);E(this,"fragment");if(Q(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=vn(t.runner,"resolveName"),i=Ka(s)?s:null;p(this,ra,async function(){const a=await Promise.all(e.inputs.map((o,c)=>n[c]==null?null:o.walkAsync(n[c],(l,h)=>l==="address"?Array.isArray(h)?Promise.all(h.map(u=>_t(u,i))):_t(h,i):h)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return d(this,ra)}}ra=new WeakMap;function vn(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function xn(r){return r==null?null:r.provider||null}async function dd(r,t){const e=Dt.dereference(r,"overrides");A(typeof e=="object","invalid overrides parameter","overrides",r);const n=Ja(e);return A(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),A(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function by(r,t,e){const n=vn(r,"resolveName"),s=Ka(n)?n:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,c)=>(c=Dt.dereference(c,o),o==="address"?_t(c,s):c))))}function Ay(r){const t=async function(a){const o=await dd(a,["data"]);o.to=await r.getAddress(),o.from&&(o.from=await _t(o.from,hd(r.runner)));const c=r.interface,l=V(o.value||od,"overrides.value")===od,h=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!l&&A(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),A(c.fallback||h,"cannot send data to receive-only contract","overrides.data",o.data);const u=c.receive||c.fallback&&c.fallback.payable;return A(u||l,"cannot send value to non-payable fallback","overrides.value",o.value),A(c.fallback||h,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=vn(r.runner,"call");P(cd(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(a);try{return await o.call(c)}catch(l){throw To(l)&&l.data?r.interface.makeError(l.data,c):l}},n=async function(a){const o=r.runner;P(ud(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await t(a)),l=xn(r.runner);return new vc(r.interface,l,c)},s=async function(a){const o=vn(r.runner,"estimateGas");return P(ld(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await n(a);return Q(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function Ey(r,t){const e=function(...l){const h=r.interface.getFunction(t,l);return P(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:l}}),h},n=async function(...l){const h=e(...l);let u={};if(h.inputs.length+1===l.length&&(u=await dd(l.pop()),u.from&&(u.from=await _t(u.from,hd(r.runner)))),h.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await by(r.runner,h.inputs,l);return Object.assign({},u,await Ht({to:r.getAddress(),data:r.interface.encodeFunctionData(h,f)}))},s=async function(...l){const h=await o(...l);return h.length===1?h[0]:h},i=async function(...l){const h=r.runner;P(ud(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const u=await h.sendTransaction(await n(...l)),f=xn(r.runner);return new vc(r.interface,f,u)},a=async function(...l){const h=vn(r.runner,"estimateGas");return P(ld(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await n(...l))},o=async function(...l){const h=vn(r.runner,"call");P(cd(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const u=await n(...l);let f="0x";try{f=await h.call(u)}catch(w){throw To(w)&&w.data?r.interface.makeError(w.data,u):w}const y=e(...l);return r.interface.decodeFunctionResult(y,f)},c=async(...l)=>e(...l).constant?await s(...l):await i(...l);return Q(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:a,populateTransaction:n,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=r.interface.getFunction(t);return P(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),l}}),c}function vy(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return P(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new my(r,e(...s),s)};return Q(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return P(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const qa=Symbol.for("_ethersInternal_contract"),fd=new WeakMap;function xy(r,t){fd.set(r[qa],t)}function $t(r){return fd.get(r[qa])}function Ny(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function xc(r,t){let e,n=null;if(Array.isArray(t)){const i=function(a){if(ot(a,32))return a;const o=r.interface.getEvent(a);return A(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?ot(t,32)?e=[t]:(n=r.interface.getEvent(t),A(n,"unknown fragment","event",t),e=[n.topicHash]):Ny(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):A(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function Gi(r,t){const{subs:e}=$t(r);return e.get((await xc(r,t)).tag)||null}async function pd(r,t,e){const n=xn(r.runner);P(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:a}=await xc(r,e),{addr:o,subs:c}=$t(r);let l=c.get(i);if(!l){const h={address:o||r,topics:a},u=y=>{let w=s;if(w==null)try{w=r.interface.getEvent(y.topics[0])}catch{}if(w){const g=w,b=s?r.interface.decodeEventLog(s,y.data,y.topics):[];Ic(r,e,b,v=>new yy(r,v,e,g,y))}else Ic(r,e,[],g=>new ad(r,g,e,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(n.on(h,u))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),n.off(h,u)}},c.set(i,l)}return l}let Nc=Promise.resolve();async function Iy(r,t,e,n){await Nc;const s=await Gi(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:o})=>{const c=Array.from(e);n&&c.push(n(o?null:a));try{a.call(r,...c)}catch{}return!o}),s.listeners.length===0&&(s.stop(),$t(r).subs.delete(s.tag)),i>0}async function Ic(r,t,e,n){try{await Nc}catch{}const s=Iy(r,t,e,n);return Nc=s,await s}const Wa=["then"];uf=qa;const na=class na{constructor(t,e,n,s){E(this,"target");E(this,"interface");E(this,"runner");E(this,"filters");E(this,uf);E(this,"fallback");A(typeof t=="string"||Ju(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=Dr.from(e);Q(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,qa,{value:{}});let a,o=null,c=null;if(s){const u=xn(n);c=new vc(this.interface,u,s)}let l=new Map;if(typeof t=="string")if(ot(t))o=t,a=Promise.resolve(t);else{const u=vn(n,"resolveName");if(!Ka(u))throw dt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=u.resolveName(t).then(f=>{if(f==null)throw dt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return $t(this).addr=f,f})}else a=t.getAddress().then(u=>{if(u==null)throw new Error("TODO");return $t(this).addr=u,u});xy(this,{addrPromise:a,addr:o,deployTx:c,subs:l});const h=new Proxy({},{get:(u,f,y)=>{if(typeof f=="symbol"||Wa.indexOf(f)>=0)return Reflect.get(u,f,y);try{return this.getEvent(f)}catch(w){if(!Rt(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(u,f)=>Wa.indexOf(f)>=0?Reflect.has(u,f):Reflect.has(u,f)||this.interface.hasEvent(String(f))});return Q(this,{filters:h}),Q(this,{fallback:i.receive||i.fallback?Ay(this):null}),new Proxy(this,{get:(u,f,y)=>{if(typeof f=="symbol"||f in u||Wa.indexOf(f)>=0)return Reflect.get(u,f,y);try{return u.getFunction(f)}catch(w){if(!Rt(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(u,f)=>typeof f=="symbol"||f in u||Wa.indexOf(f)>=0?Reflect.has(u,f):u.interface.hasFunction(f)})}connect(t){return new na(this.target,this.interface,t)}attach(t){return new na(t,this.interface,this.runner)}async getAddress(){return await $t(this).addrPromise}async getDeployedCode(){const t=xn(this.runner);P(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const e=xn(this.runner);return P(e!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((n,s)=>{const i=async()=>{try{if(await this.getDeployedCode()!=null)return n(this);e.once("block",i)}catch(a){s(a)}};i()})}deploymentTransaction(){return $t(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Ey(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),vy(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=$t(this),a=s||await i,{fragment:o,topics:c}=await xc(this,t),l={address:a,topics:c,fromBlock:e,toBlock:n},h=xn(this.runner);return P(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(l)).map(u=>{let f=o;if(f==null)try{f=this.interface.getEvent(u.topics[0])}catch{}if(f)try{return new Ec(u,this.interface,f)}catch(y){return new id(u,y)}return new Mi(u,h)})}async on(t,e){const n=await pd(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await pd(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Ic(this,t,e,null)}async listenerCount(t){if(t){const s=await Gi(this,t);return s?s.listeners.length:0}const{subs:e}=$t(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await Gi(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=$t(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await Gi(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),$t(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await Gi(this,t);if(!e)return this;e.stop(),$t(this).subs.delete(e.tag)}else{const{subs:e}=$t(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends na{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let Tc=na;function Ty(){return Tc}class Nn extends Ty(){}function kc(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):A(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class ky{constructor(t){E(this,"name");Q(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const gd=new RegExp("^(ipfs)://(.*)$","i"),wd=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),gd,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],ni=class ni{constructor(t,e,n){N(this,Kr);E(this,"provider");E(this,"address");E(this,"name");N(this,Jr);N(this,Jn);Q(this,{provider:t,address:e,name:n}),p(this,Jr,null),p(this,Jn,new Nn(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return d(this,Jr)==null&&p(this,Jr,(async()=>{try{return await d(this,Jn).supportsInterface("0x9061b923")}catch(t){if(Rt(t,"CALL_EXCEPTION"))return!1;throw p(this,Jr,null),t}})()),await d(this,Jr)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await U(this,Kr,Ai).call(this,"addr(bytes32)");return i==null||i===ws?null:i}catch(i){if(Rt(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const a=await U(this,Kr,Ai).call(this,"addr(bytes32,uint)",[i]);if(ot(a,20))return st(a)}let e=null;for(const i of this.provider.plugins)if(i instanceof ky&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await U(this,Kr,Ai).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;P(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await U(this,Kr,Ai).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await U(this,Kr,Ai).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${Bf("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;P(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<wd.length;n++){const s=e.match(wd[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const a=kc(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:a}),{linkage:t,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const o=await this.getAddress();if(o==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const l=c[1],h=new Nn(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await h.ownerOf(l);if(o!==g)return t.push({type:"!owner",value:g}),{url:null,linkage:t};t.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await h.balanceOf(o,l);if(!g)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:g.toString()})}let u=await h[a](l);if(u==null||u==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:u}),i==="erc1155"&&(u=u.replace("{id}",Tr(l,32).substring(2)),t.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=kc(u)),t.push({type:"metadata-url",value:u});let f={};const y=await new $e(u).send();y.assertOk();try{f=y.bodyJson}catch{try{t.push({type:"!metadata",value:y.bodyText})}catch{const g=y.body;return g&&t.push({type:"!metadata",value:H(g)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!f)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(f)});let w=f.image;if(typeof w!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(gd)==null)return t.push({type:"!imageUrl-ipfs",value:w}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:w}),w=kc(w)}return t.push({type:"url",value:w}),{linkage:t,url:w}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return P(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var s;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await U(s=ni,fo,gf).call(s,t,n);if(i!=null){const a=new ni(t,i,e);return n!==e&&!await a.supportsWildcard()?null:a}n=n.split(".").slice(1).join(".")}}};Jr=new WeakMap,Jn=new WeakMap,Kr=new WeakSet,Ai=async function(t,e){e=(e||[]).slice();const n=d(this,Jn).interface;e.unshift(hc(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),P(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[vw(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await d(this,Jn)[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Rt(i,"CALL_EXCEPTION"))throw i}return null},fo=new WeakSet,gf=async function(t,e){const n=await ni.getEnsAddress(t);try{const s=await new Nn(n,["function resolver(bytes32) view returns (address)"],t).resolver(hc(e),{enableCcipRead:!0});return s===ws?null:s}catch(s){throw s}return null},N(ni,fo);let Za=ni;const yd=BigInt(0);function tt(r,t){return function(e){return e==null?t:r(e)}}function Ya(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function Vi(r,t){return e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const a of t[s])if(a in e){i=a;break}}try{const a=r[s](e[i]);a!==void 0&&(n[s]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";P(!1,`invalid value for value.${s} (${o})`,"BAD_DATA",{value:e})}}return n}}function Cy(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}A(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function xs(r){return A(ot(r,!0),"invalid data","value",r),r}function Ot(r){return A(ot(r,32),"invalid hash","value",r),r}const Oy=Vi({address:st,blockHash:Ot,blockNumber:W,data:xs,index:W,removed:tt(Cy,!1),topics:Ya(Ot),transactionHash:Ot,transactionIndex:W},{index:["logIndex"]});function Py(r){return Oy(r)}const Sy=Vi({hash:tt(Ot),parentHash:Ot,parentBeaconBlockRoot:tt(Ot,null),number:W,timestamp:W,nonce:tt(xs),difficulty:V,gasLimit:V,gasUsed:V,stateRoot:tt(Ot,null),receiptsRoot:tt(Ot,null),blobGasUsed:tt(V,null),excessBlobGas:tt(V,null),miner:tt(st),prevRandao:tt(Ot,null),extraData:xs,baseFeePerGas:tt(V)},{prevRandao:["mixHash"]});function By(r){const t=Sy(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:md(e)),t}const Uy=Vi({transactionIndex:W,blockNumber:W,transactionHash:Ot,address:st,topics:Ya(Ot),data:xs,index:W,blockHash:Ot},{index:["logIndex"]});function Ry(r){return Uy(r)}const Dy=Vi({to:tt(st,null),from:tt(st,null),contractAddress:tt(st,null),index:W,root:tt(H),gasUsed:V,blobGasUsed:tt(V,null),logsBloom:tt(xs),blockHash:Ot,hash:Ot,logs:Ya(Ry),blockNumber:W,cumulativeGasUsed:V,effectiveGasPrice:tt(V),blobGasPrice:tt(V,null),status:tt(W),type:tt(W,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Ly(r){return Dy(r)}function md(r){r.to&&V(r.to)===yd&&(r.to="0x0000000000000000000000000000000000000000");const t=Vi({hash:Ot,index:tt(W,void 0),type:e=>e==="0x"||e==null?0:W(e),accessList:tt(yn,null),blobVersionedHashes:tt(Ya(Ot,!0),null),blockHash:tt(Ot,null),blockNumber:tt(W,null),transactionIndex:tt(W,null),from:st,gasPrice:tt(V),maxPriorityFeePerGas:tt(V),maxFeePerGas:tt(V),maxFeePerBlobGas:tt(V,null),gasLimit:V,to:tt(st,null),value:V,nonce:W,data:xs,creates:tt(st,null),chainId:tt(V,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=Ig(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=he.from(r.signature):t.signature=he.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&V(t.blockHash)===yd&&(t.blockHash=null),t}const Fy="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class _i{constructor(t){E(this,"name");Q(this,{name:t})}clone(){return new _i(this.name)}}class Xa extends _i{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);E(this,"effectiveBlock");E(this,"txBase");E(this,"txCreate");E(this,"txDataZero");E(this,"txDataNonzero");E(this,"txAccessListStorageKey");E(this,"txAccessListAddress");const s={effectiveBlock:e};function i(a,o){let c=(n||{})[a];c==null&&(c=o),A(typeof c=="number",`invalud value for ${a}`,"costs",n),s[a]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Q(this,s)}clone(){return new Xa(this.effectiveBlock,this)}}class $a extends _i{constructor(e,n){super("org.ethers.plugins.network.Ens");E(this,"address");E(this,"targetNetwork");Q(this,{address:e||Fy,targetNetwork:n??1})}clone(){return new $a(this.address,this.targetNetwork)}}class My extends _i{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");N(this,sa);N(this,ia);p(this,sa,e),p(this,ia,n)}get url(){return d(this,sa)}get processFunc(){return d(this,ia)}clone(){return this}}sa=new WeakMap,ia=new WeakMap;const Cc=new Map,ai=class ai{constructor(t,e){N(this,si);N(this,ii);N(this,qr);p(this,si,t),p(this,ii,V(e)),p(this,qr,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return d(this,si)}set name(t){p(this,si,t)}get chainId(){return d(this,ii)}set chainId(t){p(this,ii,V(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===V(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===V(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===V(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(d(this,qr).values())}attachPlugin(t){if(d(this,qr).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return d(this,qr).set(t.name,t.clone()),this}getPlugin(t){return d(this,qr).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new ai(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Xa;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=yn(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(Hy(),t==null)return ai.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Cc.get(t);if(e)return e();if(typeof t=="bigint")return new ai("unknown",t);A(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){A(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new ai(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new $a(t.ensAddress,t.ensNetwork)),e}A(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=Cc.get(t);n&&A(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),Cc.set(t,e)}};si=new WeakMap,ii=new WeakMap,qr=new WeakMap;let Ge=ai;function bd(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function Ad(r){return new My(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,a]=await Promise.all([n.send(),t()]);s=i;const o=s.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:bd(o.maxFee,9),maxPriorityFeePerGas:bd(o.maxPriorityFee,9)}}catch(i){P(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let Ed=!1;function Hy(){if(Ed)return;Ed=!0;function r(t,e,n){const s=function(){const i=new Ge(t,e);return n.ensNetwork!=null&&i.attachPlugin(new $a(null,n.ensNetwork)),i.attachPlugin(new Xa),(n.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};Ge.register(t,s),Ge.register(e,s),n.altNames&&n.altNames.forEach(i=>{Ge.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Ad("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Ad("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function Oc(r){return JSON.parse(JSON.stringify(r))}class Gy{constructor(t){N(this,oi);N(this,mr);N(this,we);N(this,Wr);N(this,qe);p(this,mr,t),p(this,we,null),p(this,Wr,4e3),p(this,qe,-2)}get pollingInterval(){return d(this,Wr)}set pollingInterval(t){p(this,Wr,t)}start(){d(this,we)||(p(this,we,d(this,mr)._setTimeout(U(this,oi,Eo).bind(this),d(this,Wr))),U(this,oi,Eo).call(this))}stop(){d(this,we)&&(d(this,mr)._clearTimeout(d(this,we)),p(this,we,null))}pause(t){this.stop(),t&&p(this,qe,-2)}resume(){this.start()}}mr=new WeakMap,we=new WeakMap,Wr=new WeakMap,qe=new WeakMap,oi=new WeakSet,Eo=async function(){try{const t=await d(this,mr).getBlockNumber();if(d(this,qe)===-2){p(this,qe,t);return}if(t!==d(this,qe)){for(let e=d(this,qe)+1;e<=t;e++){if(d(this,we)==null)return;await d(this,mr).emit("block",e)}p(this,qe,t)}}catch{}d(this,we)!=null&&p(this,we,d(this,mr)._setTimeout(U(this,oi,Eo).bind(this),d(this,Wr)))};class Pc{constructor(t){N(this,Kn);N(this,qn);N(this,Zr);p(this,Kn,t),p(this,Zr,!1),p(this,qn,e=>{this._poll(e,d(this,Kn))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){d(this,Zr)||(p(this,Zr,!0),d(this,qn).call(this,-2),d(this,Kn).on("block",d(this,qn)))}stop(){d(this,Zr)&&(p(this,Zr,!1),d(this,Kn).off("block",d(this,qn)))}pause(t){this.stop()}resume(){this.start()}}Kn=new WeakMap,qn=new WeakMap,Zr=new WeakMap;class Vy extends Pc{constructor(e,n){super(e);N(this,ci);N(this,br);p(this,ci,n),p(this,br,-2)}pause(e){e&&p(this,br,-2),super.pause(e)}async _poll(e,n){const s=await n.getBlock(d(this,ci));s!=null&&(d(this,br)===-2?p(this,br,s.number):s.number>d(this,br)&&(n.emit(d(this,ci),s.number),p(this,br,s.number)))}}ci=new WeakMap,br=new WeakMap;class _y extends Pc{constructor(e,n){super(e);N(this,po);p(this,po,Oc(n))}async _poll(e,n){throw new Error("@TODO")}}po=new WeakMap;class jy extends Pc{constructor(e,n){super(e);N(this,li);p(this,li,n)}async _poll(e,n){const s=await n.getTransactionReceipt(d(this,li));s&&n.emit(d(this,li),s)}}li=new WeakMap;class Sc{constructor(t,e){N(this,go);N(this,Ar);N(this,ui);N(this,hi);N(this,Yr);N(this,ye);p(this,Ar,t),p(this,ui,Oc(e)),p(this,hi,U(this,go,wf).bind(this)),p(this,Yr,!1),p(this,ye,-2)}start(){d(this,Yr)||(p(this,Yr,!0),d(this,ye)===-2&&d(this,Ar).getBlockNumber().then(t=>{p(this,ye,t)}),d(this,Ar).on("block",d(this,hi)))}stop(){d(this,Yr)&&(p(this,Yr,!1),d(this,Ar).off("block",d(this,hi)))}pause(t){this.stop(),t&&p(this,ye,-2)}resume(){this.start()}}Ar=new WeakMap,ui=new WeakMap,hi=new WeakMap,Yr=new WeakMap,ye=new WeakMap,go=new WeakSet,wf=async function(t){if(d(this,ye)===-2)return;const e=Oc(d(this,ui));e.fromBlock=d(this,ye)+1,e.toBlock=t;const n=await d(this,Ar).getLogs(e);if(n.length===0){d(this,ye)<t-60&&p(this,ye,t-60);return}for(const s of n)d(this,Ar).emit(d(this,ui),s),p(this,ye,s.blockNumber)};const Qy=BigInt(2),zy=10;function to(r){return r&&typeof r.then=="function"}function eo(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,a)=>(i[a]=n[a],i),{})}return n})}class vd{constructor(t){E(this,"name");Q(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Jy(r){return JSON.parse(JSON.stringify(r))}function Bc(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Uc(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(ot(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:eo("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:eo("orphan",e),filter:Jy(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Bc(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],a=o=>{ot(o)?s.push(o):i.push((async()=>{s.push(await _t(o,t))})())};Array.isArray(e.address)?e.address.forEach(a):a(e.address),i.length&&await Promise.all(i),n.address=Bc(s.map(o=>o.toLowerCase()))}return{filter:n,tag:eo("event",n),type:"event"}}A(!1,"unknown ProviderEvent","event",r)}function Rc(){return new Date().getTime()}const Ky={cacheTimeout:250,pollingInterval:4e3};class qy{constructor(t,e){N(this,Y);N(this,Ft);N(this,Xr);N(this,Mt);N(this,di);N(this,se);N(this,Wn);N(this,$r);N(this,Er);N(this,aa);N(this,me);N(this,fi);N(this,pi);if(p(this,pi,Object.assign({},Ky,e||{})),t==="any")p(this,Wn,!0),p(this,se,null);else if(t){const n=Ge.from(t);p(this,Wn,!1),p(this,se,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else p(this,Wn,!1),p(this,se,null);p(this,Er,-1),p(this,$r,new Map),p(this,Ft,new Map),p(this,Xr,new Map),p(this,Mt,null),p(this,di,!1),p(this,aa,1),p(this,me,new Map),p(this,fi,!1)}get pollingInterval(){return d(this,pi).pollingInterval}get provider(){return this}get plugins(){return Array.from(d(this,Xr).values())}attachPlugin(t){if(d(this,Xr).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return d(this,Xr).set(t.name,t.connect(this)),this}getPlugin(t){return d(this,Xr).get(t)||null}get disableCcipRead(){return d(this,fi)}set disableCcipRead(t){p(this,fi,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const c=n[o],l=c.replace("{sender}",s).replace("{data}",i),h=new $e(l);c.indexOf("{data}")===-1&&(h.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:o,urls:n});let u="unknown error";const f=await h.send();try{const y=f.bodyJson;if(y.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:y}),y.data;y.message&&(u=y.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:y})}catch{}P(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${u}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:u}}),a.push(u)}P(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:a}})}_wrapBlock(t,e){return new fy(By(t),this)}_wrapLog(t,e){return new Mi(Py(t),this)}_wrapTransactionReceipt(t,e){return new rd(Ly(t),this)}_wrapTransactionResponse(t,e){return new Hi(md(t),this)}_detectNetwork(){P(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){P(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=W(await U(this,Y,ce).call(this,{method:"getBlockNumber"}),"%response");return d(this,Er)>=0&&p(this,Er,t),t}_getAddress(t){return _t(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(ot(t))return ot(t,32)?t:os(t);if(typeof t=="bigint"&&(t=W(t,"blockTag")),typeof t=="number")return t>=0?os(t):d(this,Er)>=0?os(d(this,Er)+t):this.getBlockNumber().then(e=>os(e+t));A(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Bc(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,l,h)=>{let u;switch(c.length){case 0:break;case 1:u=c[0];break;default:c.sort(),u=c}if(n&&(l!=null||h!=null))throw new Error("invalid filter");const f={};return u&&(f.address=u),e.length&&(f.topics=e),l&&(f.fromBlock=l),h&&(f.toBlock=h),n&&(f.blockHash=n),f};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let a;"fromBlock"in t&&(a=this._getBlockTag(t.fromBlock));let o;return"toBlock"in t&&(o=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(c=>s(c[0],c[1],c[2])):s(i,a,o)}_getTransactionRequest(t){const e=Ja(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=_t(e[s],this);to(i)?n.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);to(s)?n.push(async function(){e.blockTag=await s}()):e.blockTag=s}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(d(this,se)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw d(this,se)===s&&p(this,se,null),i}})();return p(this,se,s),(await s).clone()}const t=d(this,se),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(d(this,Wn)?(this.emit("network",n,e),d(this,se)===t&&p(this,se,Promise.resolve(n))):P(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:a}=await Ht({_block:U(this,Y,wl).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await U(this,Y,ce).call(this,{method:"getGasPrice"});return V(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await U(this,Y,ce).call(this,{method:"getPriorityFee"});return V(h,"%response")}catch{}return null})()});let o=null,c=null;const l=this._wrapBlock(s,t);return l&&l.baseFeePerGas&&(c=a??BigInt("1000000000"),o=l.baseFeePerGas*Qy+c),new ed(i,o,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new $e(n.url),i=await n.processFunc(e,this,s);return new ed(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return to(e)&&(e=await e),V(await U(this,Y,ce).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await Ht({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await U(this,Y,gl).call(this,U(this,Y,pl).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return V(await U(this,Y,da).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return W(await U(this,Y,da).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return H(await U(this,Y,da).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const s=V(e,"position");return H(await U(this,Y,da).call(this,{method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await Ht({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=Va.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:s}=await Ht({network:this.getNetwork(),params:U(this,Y,wl).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await Ht({network:this.getNetwork(),params:U(this,Y,ce).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await Ht({network:this.getNetwork(),params:U(this,Y,ce).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await U(this,Y,ce).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await Ht({network:this.getNetwork(),result:U(this,Y,ce).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:H(e)}async getLogs(t){let e=this._getFilter(t);to(e)&&(e=await e);const{network:n,params:s}=await Ht({network:this.getNetwork(),params:U(this,Y,ce).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){P(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Za.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=st(t);const e=hc(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await Za.getEnsAddress(this),s=await new Nn(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(s==null||s===ws)return null;const i=await new Nn(s,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(i)!==t?null:i}catch(n){if(Rt(n,"BAD_DATA")&&n.value==="0x"||Rt(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,a)=>{let o=null;const c=async l=>{try{const h=await this.getTransactionReceipt(t);if(h!=null&&l-h.blockNumber+1>=s){i(h),o&&(clearTimeout(o),o=null);return}}catch(h){console.log("EEE",h)}this.once("block",c)};n!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",c),a(dt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){P(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=d(this,me).get(t);e&&(e.timer&&clearTimeout(e.timer),d(this,me).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=ua(this,aa)._++,s=()=>{d(this,me).delete(n),t()};if(this.paused)d(this,me).set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);d(this,me).set(n,{timer:i,func:s,time:Rc()})}return n}_forEachSubscriber(t){for(const e of d(this,Ft).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new vd(t.type);case"block":{const e=new Gy(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new Vy(this,t.type);case"event":return new Sc(this,t.filter);case"transaction":return new jy(this,t.hash);case"orphan":return new _y(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of d(this,Ft).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),d(this,Mt)!=null&&e.pause(d(this,Mt));break}}async on(t,e){const n=await U(this,Y,vo).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,d(this,Mt)!=null&&n.subscriber.pause(d(this,Mt))),this}async once(t,e){const n=await U(this,Y,vo).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,d(this,Mt)!=null&&n.subscriber.pause(d(this,Mt))),this}async emit(t,...e){const n=await U(this,Y,fa).call(this,t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:a})=>{const o=new Dl(this,a?null:i,t);try{i.call(this,...e,o)}catch{}return!a}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),d(this,Ft).delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await U(this,Y,fa).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of d(this,Ft).values())e+=n.length;return e}async listeners(t){if(t){const n=await U(this,Y,fa).call(this,t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of d(this,Ft).values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await U(this,Y,fa).call(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),d(this,Ft).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await U(this,Y,vo).call(this,t);n&&s.stop(),d(this,Ft).delete(e)}else for(const[e,{started:n,subscriber:s}]of d(this,Ft))n&&s.stop(),d(this,Ft).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return d(this,di)}destroy(){this.removeAllListeners();for(const t of d(this,me).keys())this._clearTimeout(t);p(this,di,!0)}get paused(){return d(this,Mt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(p(this,Er,-1),d(this,Mt)!=null){if(d(this,Mt)==!!t)return;P(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),p(this,Mt,!!t);for(const e of d(this,me).values())e.timer&&clearTimeout(e.timer),e.time=Rc()-e.time}resume(){if(d(this,Mt)!=null){this._forEachSubscriber(t=>t.resume()),p(this,Mt,null);for(const t of d(this,me).values()){let e=t.time;e<0&&(e=0),t.time=Rc(),setTimeout(t.func,e)}}}}Ft=new WeakMap,Xr=new WeakMap,Mt=new WeakMap,di=new WeakMap,se=new WeakMap,Wn=new WeakMap,$r=new WeakMap,Er=new WeakMap,aa=new WeakMap,me=new WeakMap,fi=new WeakMap,pi=new WeakMap,Y=new WeakSet,ce=async function(t){const e=d(this,pi).cacheTimeout;if(e<0)return await this._perform(t);const n=eo(t.method,t);let s=d(this,$r).get(n);return s||(s=this._perform(t),d(this,$r).set(n,s),setTimeout(()=>{d(this,$r).get(n)===s&&d(this,$r).delete(n)},e)),await s},pl=async function(t,e,n){P(n<zy,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=Ja(t);try{return H(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&To(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&ft(i.data,0,4)==="0x556f1830"){const a=i.data,o=await _t(s.to,this);let c;try{c=$y(ft(i.data,4))}catch(u){P(!1,u.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:a}})}P(c.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);P(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const h={to:o,data:ut([c.selector,Xy([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const u=await U(this,Y,pl).call(this,h,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:u}),u}catch(u){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:u}),u}}throw i}},gl=async function(t){const{value:e}=await Ht({network:this.getNetwork(),value:t});return e},da=async function(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await U(this,Y,gl).call(this,U(this,Y,ce).call(this,Object.assign(t,{address:s,blockTag:i})))},wl=async function(t,e){if(ot(t,32))return await U(this,Y,ce).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await U(this,Y,ce).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},fa=async function(t,e){let n=await Uc(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await Uc({orphan:"drop-log",log:e[0]},this)),d(this,Ft).get(n.tag)||null},vo=async function(t){const e=await Uc(t,this),n=e.tag;let s=d(this,Ft).get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},d(this,Ft).set(n,s)),s};function Wy(r,t){try{const e=Dc(r,t);if(e)return Ea(e)}catch{}return null}function Dc(r,t){if(r==="0x")return null;try{const e=W(ft(r,t,t+32)),n=W(ft(r,e,e+32));return ft(r,e+32,e+32+n)}catch{}return null}function xd(r){const t=Et(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function Zy(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const Yy=new Uint8Array([]);function Xy(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(Yy),e+=32;for(let n=0;n<r.length;n++){const s=q(r[n]);t[n]=xd(e),t.push(xd(s.length)),t.push(Zy(s)),e+=32+Math.ceil(s.length/32)*32}return ut(t)}const Nd="0x0000000000000000000000000000000000000000000000000000000000000000";function $y(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};P(an(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=ft(r,0,32);P(ft(e,0,12)===ft(Nd,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=ft(e,12);try{const n=[],s=W(ft(r,32,64)),i=W(ft(r,s,s+32)),a=ft(r,s+32);for(let o=0;o<i;o++){const c=Wy(a,o*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{P(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Dc(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{P(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}P(ft(r,100,128)===ft(Nd,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=ft(r,96,100);try{const n=Dc(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{P(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Ns(r,t){if(r.provider)return r.provider;P(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Id(r,t){let e=Ja(t);if(e.to!=null&&(e.to=_t(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),_t(n,r)]).then(([s,i])=>(A(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await Ht(e)}class Td{constructor(t){E(this,"provider");Q(this,{provider:t||null})}async getNonce(t){return Ns(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Id(this,t)}async populateTransaction(t){const e=Ns(this,"populateTransaction"),n=await Id(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const a=V(n.chainId);A(a===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?A(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&A(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const a=await e.getFeeData();P(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice)}else{const a=await e.getFeeData();if(n.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const o=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=o,n.maxPriorityFeePerGas=o}else n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(P(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice),n.type=0):P(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await Ht(n)}async estimateGas(t){return Ns(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Ns(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Ns(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Ns(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=Va.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}}const al=class al extends Td{constructor(e,n){super(n);N(this,gi);E(this,"address");Q(this,{address:e})}async getAddress(){return this.address}connect(e){return new al(this.address,e)}async signTransaction(e){U(this,gi,xo).call(this,"transactions","signTransaction")}async signMessage(e){U(this,gi,xo).call(this,"messages","signMessage")}async signTypedData(e,n,s){U(this,gi,xo).call(this,"typed-data","signTypedData")}};gi=new WeakSet,xo=function(e,n){P(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:n})};let ro=al;function tm(r){return JSON.parse(JSON.stringify(r))}class kd{constructor(t){N(this,en);N(this,Jt);N(this,We);N(this,Zn);N(this,tn);N(this,Yn);N(this,wi);p(this,Jt,t),p(this,We,null),p(this,Zn,U(this,en,yl).bind(this)),p(this,tn,!1),p(this,Yn,null),p(this,wi,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){d(this,tn)||(p(this,tn,!0),U(this,en,yl).call(this,-2))}stop(){d(this,tn)&&(p(this,tn,!1),p(this,wi,!0),U(this,en,ml).call(this),d(this,Jt).off("block",d(this,Zn)))}pause(t){t&&U(this,en,ml).call(this),d(this,Jt).off("block",d(this,Zn))}resume(){this.start()}}Jt=new WeakMap,We=new WeakMap,Zn=new WeakMap,tn=new WeakMap,Yn=new WeakMap,wi=new WeakMap,en=new WeakSet,yl=async function(t){try{d(this,We)==null&&p(this,We,this._subscribe(d(this,Jt)));let e=null;try{e=await d(this,We)}catch(i){if(!Rt(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){p(this,We,null),d(this,Jt)._recoverSubscriber(this,this._recover(d(this,Jt)));return}const n=await d(this,Jt).getNetwork();if(d(this,Yn)||p(this,Yn,n),d(this,Yn).chainId!==n.chainId)throw new Error("chaid changed");if(d(this,wi))return;const s=await d(this,Jt).send("eth_getFilterChanges",[e]);await this._emitResults(d(this,Jt),s)}catch(e){console.log("@TODO",e)}d(this,Jt).once("block",d(this,Zn))},ml=function(){const t=d(this,We);t&&(p(this,We,null),t.then(e=>{d(this,Jt).destroyed||d(this,Jt).send("eth_uninstallFilter",[e])}))};class em extends kd{constructor(e,n){super(e);N(this,Xn);p(this,Xn,tm(n))}_recover(e){return new Sc(e,d(this,Xn))}async _subscribe(e){return await e.send("eth_newFilter",[d(this,Xn)])}async _emitResults(e,n){for(const s of n)e.emit(d(this,Xn),e._wrapLog(s,e._network))}}Xn=new WeakMap;class rm extends kd{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const nm="bigint,boolean,function,number,string,symbol".split(/,/g);function no(r){if(r==null||nm.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(no);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function sm(r){return new Promise(t=>{setTimeout(t,r)})}function Is(r){return r&&r.toLowerCase()}function Cd(r){return r&&typeof r.pollingInterval=="number"}const Od={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Lc extends Td{constructor(e,n){super(e);E(this,"address");n=st(n),Q(this,{address:n})}connect(e){P(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=no(e),s=[];if(n.from){const a=n.from;s.push((async()=>{const o=await _t(a,this.provider);A(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=o})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const a=n.to;s.push((async()=>{n.to=await _t(a,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,a)=>{const o=[1e3,100];let c=0;const l=async()=>{try{const h=await this.provider.getTransaction(s);if(h!=null){i(h.replaceableTransaction(n));return}}catch(h){if(Rt(h,"CANCELLED")||Rt(h,"BAD_DATA")||Rt(h,"NETWORK_ERROR")){h.info==null&&(h.info={}),h.info.sendTransactionHash=s,a(h);return}if(Rt(h,"INVALID_ARGUMENT")&&(c++,h.info==null&&(h.info={}),h.info.sendTransactionHash=s,c>10)){a(h);return}this.provider.emit("error",dt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{l()},o.pop()||4e3)};l()})}async signTransaction(e){const n=no(e);if(n.from){const i=await _t(n.from,this.provider);A(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const n=typeof e=="string"?Ee(e):e;return await this.provider.send("personal_sign",[H(n),this.address.toLowerCase()])}async signTypedData(e,n,s){const i=no(s),a=await ja.resolveNames(e,n,i,async o=>{const c=await _t(o);return A(c!=null,"TypedData does not support null address","value",o),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ja.getPayload(a.domain,n,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?Ee(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),H(n)])}}class im extends qy{constructor(e,n){super(e,n);N(this,oa);N(this,$n);N(this,yi);N(this,vr);N(this,Ze);N(this,Be);N(this,be);N(this,Xt);p(this,yi,1),p(this,$n,Object.assign({},Od,n||{})),p(this,vr,[]),p(this,Ze,null),p(this,be,null),p(this,Xt,null);{let i=null;const a=new Promise(o=>{i=o});p(this,Be,{promise:a,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(A(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&e!=null&&p(this,be,Ge.from(e))):s&&(A(e==null||s.matches(e),"staticNetwork MUST match network object","options",n),p(this,be,s))}_getOption(e){return d(this,$n)[e]}get _network(){return P(d(this,be),"network is not available yet","NETWORK_ERROR"),d(this,be)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&V(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(d(this,be))return d(this,be)}else return e;return d(this,Xt)?await d(this,Xt):this.ready?(p(this,Xt,(async()=>{try{const n=Ge.from(V(await this.send("eth_chainId",[])));return p(this,Xt,null),n}catch(n){throw p(this,Xt,null),n}})()),await d(this,Xt)):(p(this,Xt,(async()=>{const n={id:ua(this,yi)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],p(this,Xt,null)}catch(i){throw p(this,Xt,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ge.from(V(s.result));throw this.getRpcError(n,s)})()),await d(this,Xt))}_start(){d(this,Be)==null||d(this,Be).resolve==null||(d(this,Be).resolve(),p(this,Be,null),(async()=>{for(;d(this,be)==null&&!this.destroyed;)try{p(this,be,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",dt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await sm(1e3)}U(this,oa,bl).call(this)})())}async _waitUntilReady(){if(d(this,Be)!=null)return await d(this,Be).promise}_getSubscriber(e){return e.type==="pending"?new rm(this):e.type==="event"?this._getOption("polling")?new Sc(this,e.filter):new em(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new vd("orphan"):super._getSubscriber(e)}get ready(){return d(this,Be)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=os(V(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(n[s]=H(e[s]))}),e.accessList&&(n.accessList=yn(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Is(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Is(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Is(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Is(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Is):e.filter.address=Is(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:s}=e,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return dt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=Mc(i),l=En.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return l.info={error:i,payload:e},l}const a=JSON.stringify(om(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return dt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return dt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return dt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return dt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(a.match(/only replay-protected/i))return dt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?dt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):dt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=ua(this,yi)._++,i=new Promise((a,o)=>{d(this,vr).push({resolve:a,reject:o,payload:{method:e,params:n,id:s,jsonrpc:"2.0"}})});return U(this,oa,bl).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Lc(this,i[e])}const{accounts:s}=await Ht({network:this.getNetwork(),accounts:n});e=st(e);for(const i of s)if(st(i)===e)return new Lc(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new Lc(this,e))}destroy(){d(this,Ze)&&(clearTimeout(d(this,Ze)),p(this,Ze,null));for(const{payload:e,reject:n}of d(this,vr))n(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));p(this,vr,[]),super.destroy()}}$n=new WeakMap,yi=new WeakMap,vr=new WeakMap,Ze=new WeakMap,Be=new WeakMap,be=new WeakMap,Xt=new WeakMap,oa=new WeakSet,bl=function(){if(d(this,Ze))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");p(this,Ze,setTimeout(()=>{p(this,Ze,null);const n=d(this,vr);for(p(this,vr,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==d(this,$n).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(i=>i.payload)).length>d(this,$n).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:c,payload:l}of s){if(this.destroyed){c(dt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const h=a.filter(u=>u.id===l.id)[0];if(h==null){const u=dt("missing response for request","BAD_DATA",{value:a,info:{payload:l}});this.emit("error",u),c(u);continue}if("error"in h){c(this.getRpcError(l,h));continue}o(h.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of s)o(a)}})()}},e))};class am extends im{constructor(e,n){super(e,n);N(this,rn);let s=this._getOption("pollingInterval");s==null&&(s=Od.pollingInterval),p(this,rn,s)}_getSubscriber(e){const n=super._getSubscriber(e);return Cd(n)&&(n.pollingInterval=d(this,rn)),n}get pollingInterval(){return d(this,rn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");p(this,rn,e),this._forEachSubscriber(n=>{Cd(n)&&(n.pollingInterval=d(this,rn))})}}rn=new WeakMap;class Fc extends am{constructor(e,n,s){e==null&&(e="http://localhost:8545");super(n,s);N(this,mi);typeof e=="string"?p(this,mi,new $e(e)):p(this,mi,e.clone())}_getConnection(){return d(this,mi).clone()}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){const n=this._getConnection();n.body=JSON.stringify(e),n.setHeader("content-type","application/json");const s=await n.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}mi=new WeakMap;function Mc(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&ot(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=Mc(r[t]);if(e)return e}return null}if(typeof r=="string")try{return Mc(JSON.parse(r))}catch{}return null}function Hc(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)Hc(r[e],t);if(typeof r=="string")try{return Hc(JSON.parse(r),t)}catch{}}}function om(r){const t=[];return Hc(r,t),t}const Pd=["constructor()","error DER_Split_Error()","error expmod_Error()","error k256Decompress_Invalid_Length_Error()","error k256DeriveY_Invalid_Prefix_Error()","error recoverV_Error()","function createAccount((bytes32 hashedUsername, bytes credentialId, (uint8 kty, int8 alg, uint8 crv, uint256 x, uint256 y) pubkey, bytes32 optionalPassword) args)","function credentialIdsByUsername(bytes32 in_hashedUsername) view returns (bytes[] out_credentialIds)","function encryptedTx(bytes32 nonce, bytes ciphertext)","function gaspayingAddress() view returns (address)","function generateGaslessTx(bytes in_data, uint64 nonce, uint256 gasPrice, uint64 gasLimit, uint256 timestamp, bytes signature) view returns (bytes out_data)","function getAccount(bytes32 in_username) view returns (address account, address keypairAddress)","function manageCredential((bytes32 credentialIdHashed, (bytes authenticatorData, (uint8 t, string k, string v)[] clientDataTokens, uint256 sigR, uint256 sigS) resp, bytes data) args)","function manageCredentialPassword((bytes32 digest, bytes data) args)","function personalization() view returns (bytes32)","function proxyView(bytes32 in_credentialIdHashed, (bytes authenticatorData, (uint8 t, string k, string v)[] clientDataTokens, uint256 sigR, uint256 sigS) in_resp, bytes in_data) view returns (bytes out_data)","function proxyViewPassword(bytes32 in_hashedUsername, bytes32 in_digest, bytes in_data) view returns (bytes out_data)","function salt() view returns (bytes32)","function userExists(bytes32 in_username) view returns (bool)"],cm=["constructor()","error DER_Split_Error()","error expmod_Error()","error k256Decompress_Invalid_Length_Error()","error k256DeriveY_Invalid_Prefix_Error()","error recoverV_Error()","function createAccount((bytes32 hashedUsername, bytes credentialId, (uint8 kty, int8 alg, uint8 crv, uint256 x, uint256 y) pubkey, bytes32 optionalPassword) args)","function credentialIdsByUsername(bytes32 in_hashedUsername) view returns (bytes[] out_credentialIds)","function encryptedTx(bytes32 nonce, bytes ciphertext)","function gaspayingAddress() view returns (address)","function generateGaslessTx(bytes in_data, uint64 nonce, uint256 gasPrice) view returns (bytes out_data)","function getAccount(bytes32 in_username) view returns (address account, address keypairAddress)","function manageCredential((bytes32 credentialIdHashed, (bytes authenticatorData, (uint8 t, string k, string v)[] clientDataTokens, uint256 sigR, uint256 sigS) resp, bytes data) args)","function manageCredentialPassword((bytes32 digest, bytes data) args)","function personalization() view returns (bytes32)","function proxyView(bytes32 in_credentialIdHashed, (bytes authenticatorData, (uint8 t, string k, string v)[] clientDataTokens, uint256 sigR, uint256 sigS) in_resp, bytes in_data) view returns (bytes out_data)","function proxyViewPassword(bytes32 in_hashedUsername, bytes32 in_digest, bytes in_data) view returns (bytes out_data)","function salt() view returns (bytes32)","function userExists(bytes32 in_username) view returns (bool)"],so=["constructor()","error DER_Split_Error()","error expmod_Error()","error k256Decompress_Invalid_Length_Error()","error k256DeriveY_Invalid_Prefix_Error()","error recoverV_Error()","function call(address in_contract, bytes in_data) returns (bytes out_data)","function init(address starterOwner)","function isController(address who) view returns (bool)","function keypairAddress() view returns (address)","function modifyController(address who, bool status)","function sign(bytes32 digest) view returns ((bytes32 r, bytes32 s, uint256 v))","function signEIP155((uint64 nonce, uint256 gasPrice, uint64 gasLimit, address to, uint256 value, bytes data, uint256 chainId) txToSign) view returns (bytes)","function staticcall(address in_contract, bytes in_data) view returns (bytes out_data)","function transfer(address in_target, uint256 amount)"],Ts=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"_receiver",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"maxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function Sd(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function lm(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function io(r,...t){if(!lm(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function um(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Sd(r.outputLen),Sd(r.blockLen)}function ao(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function hm(r,t){io(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Gc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vc=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ve=(r,t)=>r<<32-t|r>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function dm(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function _c(r){return typeof r=="string"&&(r=dm(r)),io(r),r}function fm(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];io(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class Bd{clone(){return this._cloneInto()}}function pm(r){const t=n=>r().update(_c(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function gm(r=32){if(Gc&&typeof Gc.getRandomValues=="function")return Gc.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function wm(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),o=Number(e&i),c=n?4:0,l=n?0:4;r.setUint32(t+c,a,n),r.setUint32(t+l,o,n)}const ym=(r,t,e)=>r&t^~r&e,mm=(r,t,e)=>r&t^r&e^t&e;class bm extends Bd{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vc(this.buffer)}update(t){ao(this);const{view:e,buffer:n,blockLen:s}=this;t=_c(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Vc(t);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ao(this),hm(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let u=a;u<s;u++)e[u]=0;wm(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=Vc(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)o.setUint32(4*u,h[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%e&&t.buffer.set(n),t}}const Am=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fr=new Uint32Array(64);class Em extends bm{constructor(){super(64,32,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:a,G:o,H:c}=this;return[t,e,n,s,i,a,o,c]}set(t,e,n,s,i,a,o,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,e){for(let u=0;u<16;u++,e+=4)Fr[u]=t.getUint32(e,!1);for(let u=16;u<64;u++){const f=Fr[u-15],y=Fr[u-2],w=Ve(f,7)^Ve(f,18)^f>>>3,g=Ve(y,17)^Ve(y,19)^y>>>10;Fr[u]=g+Fr[u-7]+w+Fr[u-16]|0}let{A:n,B:s,C:i,D:a,E:o,F:c,G:l,H:h}=this;for(let u=0;u<64;u++){const f=Ve(o,6)^Ve(o,11)^Ve(o,25),y=h+f+ym(o,c,l)+Am[u]+Fr[u]|0,w=(Ve(n,2)^Ve(n,13)^Ve(n,22))+mm(n,s,i)|0;h=l,l=c,c=o,o=a+y|0,a=i,i=s,s=n,n=y+w|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,h=h+this.H|0,this.set(n,s,i,a,o,c,l,h)}roundClean(){Fr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const vm=pm(()=>new Em);class Ud extends Bd{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,um(t);const n=_c(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return ao(this),this.iHash.update(t),this}digestInto(t){ao(this),io(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Rd=(r,t,e)=>new Ud(r,t).update(e).digest();Rd.create=(r,t)=>new Ud(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dd=BigInt(0),oo=BigInt(1),xm=BigInt(2);function In(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function ji(r){if(!In(r))throw new Error("Uint8Array expected")}const Nm=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Tn(r){ji(r);let t="";for(let e=0;e<r.length;e++)t+=Nm[r[e]];return t}function Ld(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function jc(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const or={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Fd(r){if(r>=or._0&&r<=or._9)return r-or._0;if(r>=or._A&&r<=or._F)return r-(or._A-10);if(r>=or._a&&r<=or._f)return r-(or._a-10)}function ks(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const a=Fd(r.charCodeAt(i)),o=Fd(r.charCodeAt(i+1));if(a===void 0||o===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=a*16+o}return n}function kn(r){return jc(Tn(r))}function Qc(r){return ji(r),jc(Tn(Uint8Array.from(r).reverse()))}function Cs(r,t){return ks(r.toString(16).padStart(t*2,"0"))}function zc(r,t){return Cs(r,t).reverse()}function Im(r){return ks(Ld(r))}function Te(r,t,e){let n;if(typeof t=="string")try{n=ks(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(In(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function Qi(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];ji(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}function Tm(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function km(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Cm(r){let t;for(t=0;r>Dd;r>>=oo,t+=1);return t}function Om(r,t){return r>>BigInt(t)&oo}function Pm(r,t,e){return r|(e?oo:Dd)<<BigInt(t)}const Jc=r=>(xm<<BigInt(r-1))-oo,Kc=r=>new Uint8Array(r),Md=r=>Uint8Array.from(r);function Hd(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=Kc(r),s=Kc(r),i=0;const a=()=>{n.fill(1),s.fill(0),i=0},o=(...h)=>e(s,n,...h),c=(h=Kc())=>{s=o(Md([0]),h),n=o(),h.length!==0&&(s=o(Md([1]),h),n=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const u=[];for(;h<t;){n=o();const f=n.slice();u.push(f),h+=n.length}return Qi(...u)};return(h,u)=>{a(),c(h);let f;for(;!(f=u(l()));)c();return a(),f}}const Sm={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||In(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function zi(r,t,e={}){const n=(s,i,a)=>{const o=Sm[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(a&&c===void 0)&&!o(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Bm=Object.freeze(Object.defineProperty({__proto__:null,abytes:ji,bitGet:Om,bitLen:Cm,bitMask:Jc,bitSet:Pm,bytesToHex:Tn,bytesToNumberBE:kn,bytesToNumberLE:Qc,concatBytes:Qi,createHmacDrbg:Hd,ensureBytes:Te,equalBytes:Tm,hexToBytes:ks,hexToNumber:jc,isBytes:In,numberToBytesBE:Cs,numberToBytesLE:zc,numberToHexUnpadded:Ld,numberToVarBytesBE:Im,utf8ToBytes:km,validateObject:zi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pt=BigInt(0),bt=BigInt(1),Cn=BigInt(2),Um=BigInt(3),qc=BigInt(4),Gd=BigInt(5),Vd=BigInt(8);BigInt(9),BigInt(16);function de(r,t){const e=r%t;return e>=Pt?e:t+e}function Rm(r,t,e){if(e<=Pt||t<Pt)throw new Error("Expected power/modulo > 0");if(e===bt)return Pt;let n=bt;for(;t>Pt;)t&bt&&(n=n*r%e),r=r*r%e,t>>=bt;return n}function Wc(r,t){if(r===Pt||t<=Pt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=de(r,t),n=t,s=Pt,i=bt;for(;e!==Pt;){const a=n/e,o=n%e,c=s-i*a;n=e,e=o,s=i,i=c}if(n!==bt)throw new Error("invert: does not exist");return de(s,t)}function Dm(r){const t=(r-bt)/Cn;let e,n,s;for(e=r-bt,n=0;e%Cn===Pt;e/=Cn,n++);for(s=Cn;s<r&&Rm(s,t,r)!==r-bt;s++);if(n===1){const a=(r+bt)/qc;return function(o,c){const l=o.pow(c,a);if(!o.eql(o.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(e+bt)/Cn;return function(a,o){if(a.pow(o,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),e),h=a.pow(o,i),u=a.pow(o,e);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let f=1;for(let w=a.sqr(u);f<c&&!a.eql(w,a.ONE);f++)w=a.sqr(w);const y=a.pow(l,bt<<BigInt(c-f-1));l=a.sqr(y),h=a.mul(h,y),u=a.mul(u,l),c=f}return h}}function Lm(r){if(r%qc===Um){const t=(r+bt)/qc;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}if(r%Vd===Gd){const t=(r-Gd)/Vd;return function(e,n){const s=e.mul(n,Cn),i=e.pow(s,t),a=e.mul(n,i),o=e.mul(e.mul(a,Cn),i),c=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return Dm(r)}const Fm=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Mm(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Fm.reduce((n,s)=>(n[s]="function",n),t);return zi(r,e)}function Hm(r,t,e){if(e<Pt)throw new Error("Expected power > 0");if(e===Pt)return r.ONE;if(e===bt)return t;let n=r.ONE,s=t;for(;e>Pt;)e&bt&&(n=r.mul(n,s)),s=r.sqr(s),e>>=bt;return n}function Gm(r,t){const e=new Array(t.length),n=t.reduce((i,a,o)=>r.is0(a)?i:(e[o]=i,r.mul(i,a)),r.ONE),s=r.inv(n);return t.reduceRight((i,a,o)=>r.is0(a)?i:(e[o]=r.mul(i,e[o]),r.mul(i,a)),s),e}function _d(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Vm(r,t,e=!1,n={}){if(r<=Pt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=_d(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Lm(r),o=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:Jc(s),ZERO:Pt,ONE:bt,create:c=>de(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Pt<=c&&c<r},is0:c=>c===Pt,isOdd:c=>(c&bt)===bt,neg:c=>de(-c,r),eql:(c,l)=>c===l,sqr:c=>de(c*c,r),add:(c,l)=>de(c+l,r),sub:(c,l)=>de(c-l,r),mul:(c,l)=>de(c*l,r),pow:(c,l)=>Hm(o,c,l),div:(c,l)=>de(c*Wc(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Wc(c,r),sqrt:n.sqrt||(c=>a(o,c)),invertBatch:c=>Gm(o,c),cmov:(c,l,h)=>h?l:c,toBytes:c=>e?zc(c,i):Cs(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?Qc(c):kn(c)}});return Object.freeze(o)}function jd(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Qd(r){const t=jd(r);return t+Math.ceil(t/2)}function _m(r,t,e=!1){const n=r.length,s=jd(t),i=Qd(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const a=e?kn(r):Qc(r),o=de(a,t-bt)+bt;return e?zc(o,s):Cs(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jm=BigInt(0),Zc=BigInt(1);function Qm(r,t){const e=(s,i)=>{const a=i.negate();return s?a:i},n=s=>{const i=Math.ceil(t/s)+1,a=2**(s-1);return{windows:i,windowSize:a}};return{constTimeNegate:e,unsafeLadder(s,i){let a=r.ZERO,o=s;for(;i>jm;)i&Zc&&(a=a.add(o)),o=o.double(),i>>=Zc;return a},precomputeWindow(s,i){const{windows:a,windowSize:o}=n(i),c=[];let l=s,h=l;for(let u=0;u<a;u++){h=l,c.push(h);for(let f=1;f<o;f++)h=h.add(l),c.push(h);l=h.double()}return c},wNAF(s,i,a){const{windows:o,windowSize:c}=n(s);let l=r.ZERO,h=r.BASE;const u=BigInt(2**s-1),f=2**s,y=BigInt(s);for(let w=0;w<o;w++){const g=w*c;let b=Number(a&u);a>>=y,b>c&&(b-=f,a+=Zc);const v=g,C=g+Math.abs(b)-1,I=w%2!==0,R=b<0;b===0?h=h.add(e(I,i[v])):l=l.add(e(R,i[C]))}return{p:l,f:h}},wNAFCached(s,i,a,o){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,o(l))),this.wNAF(c,l,a)}}}function zd(r){return Mm(r.Fp),zi(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({..._d(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zm(r){const t=zd(r);zi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Jm,hexToBytes:Km}=Bm,On={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(r){const{Err:t}=On;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Jm(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=On,e=typeof r=="string"?Km(r):r;ji(e);let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=On._parseInt(e.subarray(2)),{d:a,l:o}=On._parseInt(i);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(r){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,e=l=>{const h=l.toString(16);return h.length&1?`0${h}`:h},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,a=s.length/2,o=e(i),c=e(a);return`30${e(a+i+4)}02${c}${s}02${o}${n}`}},cr=BigInt(0),fe=BigInt(1);BigInt(2);const Jd=BigInt(3);BigInt(4);function qm(r){const t=zm(r),{Fp:e}=t,n=t.toBytes||((w,g,b)=>{const v=g.toAffine();return Qi(Uint8Array.from([4]),e.toBytes(v.x),e.toBytes(v.y))}),s=t.fromBytes||(w=>{const g=w.subarray(1),b=e.fromBytes(g.subarray(0,e.BYTES)),v=e.fromBytes(g.subarray(e.BYTES,2*e.BYTES));return{x:b,y:v}});function i(w){const{a:g,b}=t,v=e.sqr(w),C=e.mul(v,w);return e.add(e.add(C,e.mul(w,g)),b)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return typeof w=="bigint"&&cr<w&&w<t.n}function o(w){if(!a(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:g,nByteLength:b,wrapPrivateKey:v,n:C}=t;if(g&&typeof w!="bigint"){if(In(w)&&(w=Tn(w)),typeof w!="string"||!g.includes(w.length))throw new Error("Invalid key");w=w.padStart(b*2,"0")}let I;try{I=typeof w=="bigint"?w:kn(Te("private key",w,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof w}`)}return v&&(I=de(I,C)),o(I),I}const l=new Map;function h(w){if(!(w instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(g,b,v){if(this.px=g,this.py=b,this.pz=v,g==null||!e.isValid(g))throw new Error("x required");if(b==null||!e.isValid(b))throw new Error("y required");if(v==null||!e.isValid(v))throw new Error("z required")}static fromAffine(g){const{x:b,y:v}=g||{};if(!g||!e.isValid(b)||!e.isValid(v))throw new Error("invalid affine point");if(g instanceof u)throw new Error("projective point not allowed");const C=I=>e.eql(I,e.ZERO);return C(b)&&C(v)?u.ZERO:new u(b,v,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const b=e.invertBatch(g.map(v=>v.pz));return g.map((v,C)=>v.toAffine(b[C])).map(u.fromAffine)}static fromHex(g){const b=u.fromAffine(s(Te("pointHex",g)));return b.assertValidity(),b}static fromPrivateKey(g){return u.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:b}=this.toAffine();if(!e.isValid(g)||!e.isValid(b))throw new Error("bad point: x or y not FE");const v=e.sqr(b),C=i(g);if(!e.eql(v,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(e.isOdd)return!e.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){h(g);const{px:b,py:v,pz:C}=this,{px:I,py:R,pz:O}=g,T=e.eql(e.mul(b,O),e.mul(I,C)),S=e.eql(e.mul(v,O),e.mul(R,C));return T&&S}negate(){return new u(this.px,e.neg(this.py),this.pz)}double(){const{a:g,b}=t,v=e.mul(b,Jd),{px:C,py:I,pz:R}=this;let O=e.ZERO,T=e.ZERO,S=e.ZERO,B=e.mul(C,C),j=e.mul(I,I),D=e.mul(R,R),M=e.mul(C,I);return M=e.add(M,M),S=e.mul(C,R),S=e.add(S,S),O=e.mul(g,S),T=e.mul(v,D),T=e.add(O,T),O=e.sub(j,T),T=e.add(j,T),T=e.mul(O,T),O=e.mul(M,O),S=e.mul(v,S),D=e.mul(g,D),M=e.sub(B,D),M=e.mul(g,M),M=e.add(M,S),S=e.add(B,B),B=e.add(S,B),B=e.add(B,D),B=e.mul(B,M),T=e.add(T,B),D=e.mul(I,R),D=e.add(D,D),B=e.mul(D,M),O=e.sub(O,B),S=e.mul(D,j),S=e.add(S,S),S=e.add(S,S),new u(O,T,S)}add(g){h(g);const{px:b,py:v,pz:C}=this,{px:I,py:R,pz:O}=g;let T=e.ZERO,S=e.ZERO,B=e.ZERO;const j=t.a,D=e.mul(t.b,Jd);let M=e.mul(b,I),z=e.mul(v,R),et=e.mul(C,O),vt=e.add(b,v),x=e.add(I,R);vt=e.mul(vt,x),x=e.add(M,z),vt=e.sub(vt,x),x=e.add(b,C);let k=e.add(I,O);return x=e.mul(x,k),k=e.add(M,et),x=e.sub(x,k),k=e.add(v,C),T=e.add(R,O),k=e.mul(k,T),T=e.add(z,et),k=e.sub(k,T),B=e.mul(j,x),T=e.mul(D,et),B=e.add(T,B),T=e.sub(z,B),B=e.add(z,B),S=e.mul(T,B),z=e.add(M,M),z=e.add(z,M),et=e.mul(j,et),x=e.mul(D,x),z=e.add(z,et),et=e.sub(M,et),et=e.mul(j,et),x=e.add(x,et),M=e.mul(z,x),S=e.add(S,M),M=e.mul(k,x),T=e.mul(vt,T),T=e.sub(T,M),M=e.mul(vt,z),B=e.mul(k,B),B=e.add(B,M),new u(T,S,B)}subtract(g){return this.add(g.negate())}is0(){return this.equals(u.ZERO)}wNAF(g){return y.wNAFCached(this,l,g,b=>{const v=e.invertBatch(b.map(C=>C.pz));return b.map((C,I)=>C.toAffine(v[I])).map(u.fromAffine)})}multiplyUnsafe(g){const b=u.ZERO;if(g===cr)return b;if(o(g),g===fe)return this;const{endo:v}=t;if(!v)return y.unsafeLadder(this,g);let{k1neg:C,k1:I,k2neg:R,k2:O}=v.splitScalar(g),T=b,S=b,B=this;for(;I>cr||O>cr;)I&fe&&(T=T.add(B)),O&fe&&(S=S.add(B)),B=B.double(),I>>=fe,O>>=fe;return C&&(T=T.negate()),R&&(S=S.negate()),S=new u(e.mul(S.px,v.beta),S.py,S.pz),T.add(S)}multiply(g){o(g);let b=g,v,C;const{endo:I}=t;if(I){const{k1neg:R,k1:O,k2neg:T,k2:S}=I.splitScalar(b);let{p:B,f:j}=this.wNAF(O),{p:D,f:M}=this.wNAF(S);B=y.constTimeNegate(R,B),D=y.constTimeNegate(T,D),D=new u(e.mul(D.px,I.beta),D.py,D.pz),v=B.add(D),C=j.add(M)}else{const{p:R,f:O}=this.wNAF(b);v=R,C=O}return u.normalizeZ([v,C])[0]}multiplyAndAddUnsafe(g,b,v){const C=u.BASE,I=(O,T)=>T===cr||T===fe||!O.equals(C)?O.multiplyUnsafe(T):O.multiply(T),R=I(this,b).add(I(g,v));return R.is0()?void 0:R}toAffine(g){const{px:b,py:v,pz:C}=this,I=this.is0();g==null&&(g=I?e.ONE:e.inv(C));const R=e.mul(b,g),O=e.mul(v,g),T=e.mul(C,g);if(I)return{x:e.ZERO,y:e.ZERO};if(!e.eql(T,e.ONE))throw new Error("invZ was invalid");return{x:R,y:O}}isTorsionFree(){const{h:g,isTorsionFree:b}=t;if(g===fe)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:b}=t;return g===fe?this:b?b(u,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),n(u,this,g)}toHex(g=!0){return Tn(this.toRawBytes(g))}}u.BASE=new u(t.Gx,t.Gy,e.ONE),u.ZERO=new u(e.ZERO,e.ONE,e.ZERO);const f=t.nBitLength,y=Qm(u,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function Wm(r){const t=zd(r);return zi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Zm(r){const t=Wm(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function a(x){return cr<x&&x<e.ORDER}function o(x){return de(x,n)}function c(x){return Wc(x,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:h,weierstrassEquation:u,isWithinCurveOrder:f}=qm({...t,toBytes(x,k,L){const J=k.toAffine(),_=e.toBytes(J.x),X=Qi;return L?X(Uint8Array.from([k.hasEvenY()?2:3]),_):X(Uint8Array.from([4]),_,e.toBytes(J.y))},fromBytes(x){const k=x.length,L=x[0],J=x.subarray(1);if(k===s&&(L===2||L===3)){const _=kn(J);if(!a(_))throw new Error("Point is not on curve");const X=u(_);let ct;try{ct=e.sqrt(X)}catch(kt){const xt=kt instanceof Error?": "+kt.message:"";throw new Error("Point is not on curve"+xt)}const at=(ct&fe)===fe;return(L&1)===1!==at&&(ct=e.neg(ct)),{x:_,y:ct}}else if(k===i&&L===4){const _=e.fromBytes(J.subarray(0,e.BYTES)),X=e.fromBytes(J.subarray(e.BYTES,2*e.BYTES));return{x:_,y:X}}else throw new Error(`Point of length ${k} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),y=x=>Tn(Cs(x,t.nByteLength));function w(x){const k=n>>fe;return x>k}function g(x){return w(x)?o(-x):x}const b=(x,k,L)=>kn(x.slice(k,L));class v{constructor(k,L,J){this.r=k,this.s=L,this.recovery=J,this.assertValidity()}static fromCompact(k){const L=t.nByteLength;return k=Te("compactSignature",k,L*2),new v(b(k,0,L),b(k,L,2*L))}static fromDER(k){const{r:L,s:J}=On.toSig(Te("DER",k));return new v(L,J)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new v(this.r,this.s,k)}recoverPublicKey(k){const{r:L,s:J,recovery:_}=this,X=S(Te("msgHash",k));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const ct=_===2||_===3?L+t.n:L;if(ct>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const at=_&1?"03":"02",kt=l.fromHex(at+y(ct)),xt=c(ct),ie=o(-X*xt),Ue=o(J*xt),Ut=l.BASE.multiplyAndAddUnsafe(kt,ie,Ue);if(!Ut)throw new Error("point at infinify");return Ut.assertValidity(),Ut}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ks(this.toDERHex())}toDERHex(){return On.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ks(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}const C={isValidPrivateKey(x){try{return h(x),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const x=Qd(t.n);return _m(t.randomBytes(x),t.n)},precompute(x=8,k=l.BASE){return k._setWindowSize(x),k.multiply(BigInt(3)),k}};function I(x,k=!0){return l.fromPrivateKey(x).toRawBytes(k)}function R(x){const k=In(x),L=typeof x=="string",J=(k||L)&&x.length;return k?J===s||J===i:L?J===2*s||J===2*i:x instanceof l}function O(x,k,L=!0){if(R(x))throw new Error("first arg must be private key");if(!R(k))throw new Error("second arg must be public key");return l.fromHex(k).multiply(h(x)).toRawBytes(L)}const T=t.bits2int||function(x){const k=kn(x),L=x.length*8-t.nBitLength;return L>0?k>>BigInt(L):k},S=t.bits2int_modN||function(x){return o(T(x))},B=Jc(t.nBitLength);function j(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(cr<=x&&x<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Cs(x,t.nByteLength)}function D(x,k,L=M){if(["recovered","canonical"].some(Kt=>Kt in L))throw new Error("sign() legacy options not supported");const{hash:J,randomBytes:_}=t;let{lowS:X,prehash:ct,extraEntropy:at}=L;X==null&&(X=!0),x=Te("msgHash",x),ct&&(x=Te("prehashed msgHash",J(x)));const kt=S(x),xt=h(k),ie=[j(xt),j(kt)];if(at!=null&&at!==!1){const Kt=at===!0?_(e.BYTES):at;ie.push(Te("extraEntropy",Kt))}const Ue=Qi(...ie),Ut=kt;function ts(Kt){const ae=T(Kt);if(!f(ae))return;const xr=c(ae),At=l.BASE.multiply(ae).toAffine(),oe=o(At.x);if(oe===cr)return;const Nr=o(xr*o(Ut+oe*xt));if(Nr===cr)return;let ca=(At.x===oe?0:2)|Number(At.y&fe),la=Nr;return X&&w(Nr)&&(la=g(Nr),ca^=1),new v(oe,la,ca)}return{seed:Ue,k2sig:ts}}const M={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function et(x,k,L=M){const{seed:J,k2sig:_}=D(x,k,L),X=t;return Hd(X.hash.outputLen,X.nByteLength,X.hmac)(J,_)}l.BASE._setWindowSize(8);function vt(x,k,L,J=z){var xr;const _=x;if(k=Te("msgHash",k),L=Te("publicKey",L),"strict"in J)throw new Error("options.strict was renamed to lowS");const{lowS:X,prehash:ct}=J;let at,kt;try{if(typeof _=="string"||In(_))try{at=v.fromDER(_)}catch(At){if(!(At instanceof On.Err))throw At;at=v.fromCompact(_)}else if(typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint"){const{r:At,s:oe}=_;at=new v(At,oe)}else throw new Error("PARSE");kt=l.fromHex(L)}catch(At){if(At.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(X&&at.hasHighS())return!1;ct&&(k=t.hash(k));const{r:xt,s:ie}=at,Ue=S(k),Ut=c(ie),ts=o(Ue*Ut),Kt=o(xt*Ut),ae=(xr=l.BASE.multiplyAndAddUnsafe(kt,ts,Kt))==null?void 0:xr.toAffine();return ae?o(ae.x)===xt:!1}return{CURVE:t,getPublicKey:I,getSharedSecret:O,sign:et,verify:vt,ProjectivePoint:l,Signature:v,utils:C}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ym(r){return{hash:r,hmac:(t,...e)=>Rd(r,t,fm(...e)),randomBytes:gm}}function Xm(r,t){const e=n=>Zm({...r,...Ym(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kd=Vm(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),$m=Kd.create(BigInt("-3")),t0=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),e0=Xm({a:$m,b:t0,Fp:Kd,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},vm),qd=e0,Ji="embeddedWallet",Yc=23294,Xc=23295,Os={WALLET_CONTEXT:"oaw_context",TRANSACTIONS_CONTEXT:"oaw_transactions",TOKENS_CONTEXT:"oaw_tokens"},Qt={SAPPHIRE_PROVIDER_NOT_INITIALIZED:"OAW_SAPPHIRE_PROVIDER_NOT_INITIALIZED",ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED:"OAW_ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED",NO_USERNAME:"OAW_NO_USERNAME",NO_PASSWORD:"OAW_NO_PASSWORD",NO_LOGIN_PROXY_DATA:"OAW_NO_LOGIN_PROXY_DATA",AUTHENTICATION_DATA_NOT_PROVIDED:"OAW_AUTHENTICATION_DATA_NOT_PROVIDED",CANT_GET_ACCOUNT_ADDRESS:"OAW_CANT_GET_ACCOUNT_ADDRESS",NO_RPC_URL_CONFIGURED_FOR_SELECTED_CHAINID:"OAW_NO_RPC_URL_CONFIGURED_FOR_SELECTED_CHAINID",CROSS_CHAIN_PROVIDER_NOT_INITIALIZED:"OAW_CROSS_CHAIN_PROVIDER_NOT_INITIALIZED",OASIS_WALLET_NOT_INITIALIZED:"OAW_OASIS_WALLET_NOT_INITIALIZED",CANT_HASH_USERNAME:"OAW_CANT_HASH_USERNAME",CANT_GET_SIGNATURE:"CANT_GET_SIGNATURE",NO_APILLON_SESSION_TOKEN_CALLBACK:"NO_APILLON_SESSION_TOKEN_CALLBACK",INVALID_APILLON_SESSION_TOKEN:"INVALID_APILLON_SESSION_TOKEN"},Wd={[Qt.SAPPHIRE_PROVIDER_NOT_INITIALIZED]:"Sapphire provider not initialized",[Qt.ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED]:"Account manager contract not initialized",[Qt.NO_USERNAME]:"No username",[Qt.NO_PASSWORD]:"No password",[Qt.NO_LOGIN_PROXY_DATA]:"No login proxy data",[Qt.AUTHENTICATION_DATA_NOT_PROVIDED]:"Authentication data not provided",[Qt.CANT_GET_ACCOUNT_ADDRESS]:"Can't get account address",[Qt.NO_RPC_URL_CONFIGURED_FOR_SELECTED_CHAINID]:"No rpc url configured for selected chainid",[Qt.CROSS_CHAIN_PROVIDER_NOT_INITIALIZED]:"Cross chain provider not initialized",[Qt.OASIS_WALLET_NOT_INITIALIZED]:"Embedded wallet not initialized",[Qt.CANT_HASH_USERNAME]:"Can't hash username",[Qt.NO_APILLON_SESSION_TOKEN_CALLBACK]:"Session token callback must be provided",[Qt.INVALID_APILLON_SESSION_TOKEN]:"Session token is not valid"};function Zd(r){if(typeof window<"u")return window[Ji]=new $d(r),window[Ji]}function Ki(){if(typeof window<"u")return window[Ji]||(window[Ji]=new $d),window[Ji]}async function Pn(r=""){var e,n;const t=await((n=(e=Ki())==null?void 0:e.accountManagerContract)==null?void 0:n.salt());if(t)return mf.pbkdf2Sync(r,Et(t),1e5,32,"sha256")}function $c(r){return[Xc,Yc].includes(r)}function $(r,t="Error"){const e=new Error(t);throw e.name=Qt[r],e}class Yd{constructor(){E(this,"abiCoder",En.defaultAbiCoder())}async getRegisterData(t){t.username||$("NO_USERNAME"),t.password||$("NO_PASSWORD");const e=await Pn(t.username);if(!e){$("CANT_HASH_USERNAME");return}const n=this.generateNewKeypair();return{hashedUsername:e,credentialId:n.credentialId,pubkey:{kty:2,alg:-7,crv:1,x:n.decoded_x,y:n.decoded_y},optionalPassword:Ac(t.password)}}async getProxyResponse(t,e,n){n.username||$("NO_USERNAME"),n.password||$("NO_PASSWORD");const s=await Pn(n.username);s||$("CANT_HASH_USERNAME");const i=_w(["bytes32","bytes"],[Ac(n.password),e]);return await t.proxyViewPassword(s,i,e)}generateNewKeypair(){const t=qd.utils.randomPrivateKey(),e=qd.getPublicKey(t,!1),n="0x"+Tn(e),s=this.abiCoder.encode(["string"],[n]),i=n.slice(4,n.length),a=BigInt("0x"+i.slice(0,64)),o=BigInt("0x"+i.slice(64,i.length));return{credentialId:s,privateKey:t,decoded_x:a,decoded_y:o}}}function r0(r){return r[0]<<24|r[1]<<16|r[2]<<8|r[3]}function n0(r){return r[0]<<8|r[1]}function s0(r){const t=Al.CBOR.decode(r),e=t[1];if(e==2){const n={kty:e,alg:t[3],crv:t[-1],x:as(t[-2]),y:as(t[-3])};if(!(n.alg==-7&&n.crv==1)&&!(n.alg==-8&&n.crv==6))throw new Error(`Unknown alg: ${n.alg}, crv: ${n.crv}`);return n}throw new Error(`Unsupported kty: ${e}`)}function i0(r){if(r.byteLength-r.byteOffset<37)throw new Error("Attestation Object must be at least 37 bytes or longer");const t=r.slice(32,33)[0],e={rpIdHash:r.slice(0,32),flags:{UP:(t&1)!=0,UV:(t&4)!=0,BE:(t&8)!=0,BS:(t&16)!=0,AT:(t&64)!=0,ED:(t&128)!=0},signCount:r0(r.slice(33,37))};if(e.flags.ED)throw new Error("Extension Data not supported!");if(e.flags.AT){const n=n0(r.slice(53,55));e.attestedCredentialData={aaguid:r.slice(37,53),credentialId:r.slice(55,55+n),credentialPublicKey:s0(r.slice(55+n).buffer)}}return e}function a0(r){const t=Al.CBOR.decode(new Uint8Array(r).buffer).authData;return i0(t)}async function o0(r,t,e){const n=await navigator.credentials.create({publicKey:{attestation:"none",challenge:e.buffer,pubKeyCredParams:[{alg:-7,type:"public-key"}],rp:r,user:t}});if(!n)throw new Error("No PublicKeyCredential returned!");const s=n.response,i=new TextDecoder("utf-8").decode(s.clientDataJSON);return{id:new Uint8Array(n.rawId),cd:i,ad:a0(s.attestationObject)}}function c0(r){return Object.entries(r).map(([t,e])=>{if(typeof e=="boolean")return{t:1,k:t,v:e?"true":"false"};if(typeof e=="string")return{t:0,k:t,v:e};throw new Error(`Incompatible value type! Key:${t} Value:${e}`)})}const l0=new ga.Sequence({name:"sig",value:[new ga.Integer({name:"r"}),new ga.Integer({name:"s"})]});async function u0(r,t){t||(t=crypto.getRandomValues(new Uint8Array(32)));const e=await navigator.credentials.get({publicKey:{allowCredentials:r.map(l=>({id:l,type:"public-key"})),challenge:t}}),n=e.response,s=ga.verifySchema(n.signature,l0);if(!s.verified)throw new Error("Unable to decode ASN.1 signature!");const i=s.result,a=i.r.toBigInt(),o=i.s.toBigInt(),c=JSON.parse(new TextDecoder().decode(n.clientDataJSON));return{credentialIdHashed:pt(new Uint8Array(e.rawId)),challenge:t,resp:{authenticatorData:new Uint8Array(n.authenticatorData),clientDataTokens:c0(c),sigR:a,sigS:o}}}class Xd{async getRegisterData(t){t.username||$("NO_USERNAME");const e=await Pn(t.username);if(!e){$("CANT_HASH_USERNAME");return}const n=await o0({name:"Embedded Wallet Account",id:window.location.hostname},{id:e,name:t.username,displayName:t.username},crypto.getRandomValues(new Uint8Array(32)));return{hashedUsername:e,credentialId:n.id,pubkey:n.ad.attestedCredentialData.credentialPublicKey,optionalPassword:$o}}async getProxyResponse(t,e,n){n.username||$("NO_USERNAME");const s=n.hashedUsername||await Pn(n.username);s||$("CANT_HASH_USERNAME");const i=await t.personalization(),a=await t.credentialIdsByUsername(s),o=await u0(a.map(c=>Et(c)),Et(Br(i+Br(e).slice(2))));return await t.proxyView(o.credentialIdHashed,o.resp,e)}}class h0 extends El.ProviderRpcError{constructor(){super(new Error(Wd[Qt.OASIS_WALLET_NOT_INITIALIZED]),{code:4900,shortMessage:"Disconnected"})}}class tl extends El.ProviderRpcError{constructor(){super(new Error("Request rejected by user"),{code:4001,shortMessage:"User Rejected Request"})}}var d0={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};class $d{constructor(t){E(this,"sapphireProvider");E(this,"accountManagerContract");E(this,"abiCoder",En.defaultAbiCoder());E(this,"events");E(this,"onGetSignature");E(this,"onGetApillonSessionToken");E(this,"isTest",!1);E(this,"defaultNetworkId",0);E(this,"rpcUrls",{});E(this,"rpcProviders",{});E(this,"explorerUrls",{[Yc]:"https://explorer.oasis.io/mainnet/sapphire",[Xc]:"https://explorer.oasis.io/testnet/sapphire"});E(this,"lastAccount",{username:"",authStrategy:"passkey",address:"",contractAddress:""});E(this,"waitForAccountResolver",null);const e=new Fc(t!=null&&t.test?"https://testnet.sapphire.oasis.io":"https://sapphire.oasis.io");if(this.sapphireProvider=xf.wrap(e),this.accountManagerContract=new Nn((t==null?void 0:t.accountManagerAddress)||"0xF35C3eB93c6D3764A7D5efC6e9DEB614779437b1",!(t!=null&&t.onGetSignature)&&!(t!=null&&t.onGetApillonSessionToken)?cm:Pd,new ro(ws,this.sapphireProvider)),this.defaultNetworkId=(t==null?void 0:t.defaultNetworkId)||this.defaultNetworkId,t==null?void 0:t.networkConfig)for(const n in t.networkConfig)this.rpcUrls[n]=t.networkConfig[n].rpcUrl,this.explorerUrls[n]=t.networkConfig[n].explorerUrl;this.events=Af(),this.isTest=!!(t!=null&&t.test),this.onGetSignature=t==null?void 0:t.onGetSignature,this.onGetApillonSessionToken=t==null?void 0:t.onGetApillonSessionToken;try{this.getRpcProviderForChainId(this.defaultNetworkId)&&this.events.emit("connect",{chainId:`0x${this.defaultNetworkId.toString(16)}`})}catch{}}async userExists(t){return this.sapphireProvider||$("SAPPHIRE_PROVIDER_NOT_INITIALIZED"),this.accountManagerContract||$("ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED"),await this.accountManagerContract.userExists(await Pn(t))||!1}async register(t,e){this.sapphireProvider||$("SAPPHIRE_PROVIDER_NOT_INITIALIZED"),this.accountManagerContract||$("ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED");let n;t==="password"?n=await new Yd().getRegisterData(e):t==="passkey"&&(n=await new Xd().getRegisterData(e));const s=this.abiCoder.encode(["tuple(bytes funcData, uint8 txType)"],[{funcData:this.abiCoder.encode(["tuple(bytes32 hashedUsername, bytes credentialId, tuple(uint8 kty, int8 alg, uint8 crv, uint256 x, uint256 y) pubkey, bytes32 optionalPassword)"],[n]),txType:0}]),i=(await this.sapphireProvider.getFeeData()).gasPrice,a=await this.sapphireProvider.getTransactionCount(await this.accountManagerContract.gaspayingAddress());let o="";if(this.onGetSignature||this.onGetApillonSessionToken){this.onGetSignature||(this.onGetSignature=this.getApillonSignature);const l=await this.onGetSignature(s);l.signature||$("CANT_GET_SIGNATURE"),o=await this.accountManagerContract.generateGaslessTx(s,a,l.gasPrice?BigInt(l.gasPrice):i,l.gasLimit?BigInt(l.gasLimit):1000000n,BigInt(l.timestamp),l.signature)}else o=await this.accountManagerContract.generateGaslessTx(s,a,i);const c=await this.sapphireProvider.send("eth_sendRawTransaction",[o]);if(this.events.emit("dataUpdated",{name:"authStrategy",newValue:t,oldValue:this.lastAccount.authStrategy}),this.events.emit("dataUpdated",{name:"username",newValue:e.username,oldValue:this.lastAccount.username}),this.lastAccount.authStrategy=t,this.lastAccount.username=e.username,await this.waitForTxReceipt(c))return await this.handleAccountAfterAuth(e.username)}async authenticate(t,e){this.sapphireProvider||$("SAPPHIRE_PROVIDER_NOT_INITIALIZED"),this.accountManagerContract||$("ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED"),e.username||$("NO_USERNAME");const n="0x000000000000000000000000000000000000000000000000000000000000DEAD",s=await Pn(e.username),i=new Dr(so),a=i.encodeFunctionData("sign",[n]),o=await this.getProxyForStrategy(t,a,{...e,hashedUsername:s});o||$("NO_LOGIN_PROXY_DATA");const[[c,l,h]]=i.decodeFunctionResult("sign",o).toArray(),u=Nh(n,{r:c,s:l,v:h}),f=await this.accountManagerContract.getAccount(s);if(this.events.emit("dataUpdated",{name:"authStrategy",newValue:t,oldValue:this.lastAccount.authStrategy}),this.events.emit("dataUpdated",{name:"username",newValue:e.username,oldValue:this.lastAccount.username}),this.lastAccount.authStrategy=t,this.lastAccount.username=e.username,f.length>1&&u===f[1])return await this.handleAccountAfterAuth(e.username)}async getAccountAddress(t){if(this.sapphireProvider||$("SAPPHIRE_PROVIDER_NOT_INITIALIZED"),this.accountManagerContract||$("ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED"),!t){if(this.lastAccount.address)return{publicAddress:this.lastAccount.address,accountContractAddress:this.lastAccount.contractAddress};$("NO_USERNAME")}const e=await Pn(t),n=await this.accountManagerContract.getAccount(e);if(Array.isArray(n)&&n.length>1)return this.events.emit("dataUpdated",{name:"address",newValue:n[1],oldValue:this.lastAccount.address}),this.lastAccount.address=n[1],this.lastAccount.contractAddress=n[0],{publicAddress:n[1],accountContractAddress:n[0]}}async getAccountBalance(t,e=this.defaultNetworkId,n=18){var i;if(!e||$c(e))return Wl(await((i=this.sapphireProvider)==null?void 0:i.getBalance(t))||0n,n);if(!this.rpcUrls[e])return"0";const s=this.rpcProviders[e]||new Fc(this.rpcUrls[e]);return Wl(await s.getBalance(t),n)}async getApillonSignature(t){if(!this.onGetApillonSessionToken)return $("NO_APILLON_SESSION_TOKEN_CALLBACK"),{signature:"",gasLimit:0,timestamp:0};try{const e=await this.onGetApillonSessionToken();e||$("INVALID_APILLON_SESSION_TOKEN");const{data:n}=await(await fetch(`${d0.VITE_APILLON_BASE_URL??"https://api.apillon.io"}/embedded-wallet/signature`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,data:t})})).json();return{signature:n.signature,gasLimit:n.gasLimit||0,gasPrice:n.gasPrice||0,timestamp:n.timestamp}}catch(e){console.error("Signature request error",e)}return{signature:"",gasLimit:0,timestamp:0}}setAccount(t){this.events.emit("dataUpdated",{name:"username",newValue:t.username,oldValue:this.lastAccount.username}),this.events.emit("dataUpdated",{name:"authStrategy",newValue:t.strategy,oldValue:this.lastAccount.authStrategy}),this.events.emit("dataUpdated",{name:"address",newValue:t.address,oldValue:this.lastAccount.address}),this.lastAccount.username=t.username,this.lastAccount.authStrategy=t.strategy,this.lastAccount.address=t.address,this.lastAccount.contractAddress=t.contractAddress}async handleAccountAfterAuth(t){const e=await this.getAccountAddress(t);return e&&this.waitForAccountResolver&&(this.waitForAccountResolver(e.publicAddress),this.waitForAccountResolver=null),e&&this.events.emit("accountsChanged",[e.publicAddress]),e}async waitForAccount(){return await new Promise(t=>{this.waitForAccountResolver=t,this.events.emit("providerRequestAccounts",t)})}async signMessage(t){this.sapphireProvider||$("SAPPHIRE_PROVIDER_NOT_INITIALIZED");const e=new Dr(so);let n=t.data||"";const s=t.message;if((!n||t.mustConfirm)&&(typeof t.message=="string"&&!t.message.startsWith("0x")&&(t.message=Ac(t.message)),n=e.encodeFunctionData("sign",[t.message]),t.mustConfirm))return await new Promise((a,o)=>{this.events.emit("signatureRequest",{...t,data:n,message:s,mustConfirm:!1,resolve:a,reject:o})});t.authData||(t.strategy==="passkey"&&this.lastAccount.username?t.authData={username:this.lastAccount.username}:$("AUTHENTICATION_DATA_NOT_PROVIDED"));const i=await this.getProxyForStrategy(t.strategy||this.lastAccount.authStrategy,n,t.authData);if(i){const[a]=e.decodeFunctionResult("sign",i).toArray();if(Array.isArray(a)&&a.length>2){const o=he.from({r:a[0],s:a[1],v:a[2]}).serialized;return t.resolve&&t.resolve(o),o}}}async signPlainTransaction(t){var a;const e=this.validateChainId(((a=t==null?void 0:t.tx)==null?void 0:a.chainId)&&+t.tx.chainId.toString()||0);if(t.tx.chainId=e,t.tx.nonce||(t.tx.nonce=await this.getRpcProviderForChainId(e).getTransactionCount(this.lastAccount.address)),t.tx.type==="eip1559"&&(t.tx.type=2,t.tx.gasLimit=t.tx.gas),t.tx.gasPrice||(t.tx.gasPrice=(await this.getRpcProviderForChainId(t.tx.chainId).getFeeData()).gasPrice),t.tx.gasLimit||(t.tx.gasLimit=1e6),(t.tx.type===2&&!t.tx.value||"value"in t.tx&&typeof t.tx.value>"u")&&(t.tx.value=0n),t.mustConfirm)return await new Promise((o,c)=>{this.events.emit("txApprove",{plain:{...t,mustConfirm:!1,resolve:o,reject:c}})});t.authData||$("AUTHENTICATION_DATA_NOT_PROVIDED");const n=new Dr(so),s=n.encodeFunctionData("signEIP155",[t.tx]),i=await this.getProxyForStrategy(t.strategy,s,t.authData);if(i){const[o]=n.decodeFunctionResult("signEIP155",i).toArray();return t.resolve&&t.resolve({signedTxData:o,chainId:e}),{signedTxData:o,chainId:e}}}async broadcastTransaction(t,e,n="Transaction"){const s=this.getRpcProviderForChainId(e),i=await s.send("eth_sendRawTransaction",[t]),a={hash:i,label:n,rawData:t,owner:this.lastAccount.address||"none",status:"pending",chainId:e||this.defaultNetworkId,explorerUrl:this.explorerUrls[e||this.defaultNetworkId]?`${this.explorerUrls[e||this.defaultNetworkId]}/tx/${i}`:"",createdAt:Date.now()};return this.events.emit("txSubmitted",a),{txHash:i,ethProvider:s,txItem:a}}async signContractWrite(t){const e=this.validateChainId(t.chainId);if(t.mustConfirm)return await new Promise((l,h)=>{this.events.emit("txApprove",{contractWrite:{...t,mustConfirm:!1,resolve:l,reject:h}})});t.authData||$("AUTHENTICATION_DATA_NOT_PROVIDED");const n=await this.getAccountAddress(t.authData.username);n!=null&&n.publicAddress||$("CANT_GET_ACCOUNT_ADDRESS");const s=new Dr(t.contractAbi).encodeFunctionData(t.contractFunctionName,t.contractFunctionValues),i=await new ro(n.publicAddress,this.getRpcProviderForChainId(e)).populateTransaction({from:n.publicAddress,to:t.contractAddress,gasLimit:1e6,value:0,data:s});i.gasPrice=2e10;const a=new Dr(so),o=a.encodeFunctionData("signEIP155",[i]),c=await this.getProxyForStrategy(t.strategy||this.lastAccount.authStrategy,o,t.authData);if(c){const[l]=a.decodeFunctionResult("signEIP155",c).toArray();return t.resolve&&t.resolve({signedTxData:l,chainId:e}),{signedTxData:l,chainId:e}}}async contractRead(t){const e=this.validateChainId(t.chainId),n=this.getRpcProviderForChainId(e),s=new Nn(t.contractAddress,t.contractAbi,n);return t.contractFunctionValues?await s[t.contractFunctionName](...t.contractFunctionValues):await s[t.contractFunctionName]()}async getProxyForStrategy(t,e,n){if(this.accountManagerContract||$("ACCOUNT_MANAGER_CONTRACT_NOT_INITIALIZED"),t==="password")return await new Yd().getProxyResponse(this.accountManagerContract,e,n);if(t==="passkey")return await new Xd().getProxyResponse(this.accountManagerContract,e,n)}async waitForTxReceipt(t,e){!e&&!this.sapphireProvider&&$("SAPPHIRE_PROVIDER_NOT_INITIALIZED");const n=60;let s=0;for(;;){const i=await(e||this.sapphireProvider).getTransactionReceipt(t);if(i)return i;if(s+=1,s>=n)return;await new Promise(a=>setTimeout(a,1e3))}}setDefaultNetworkId(t){return this.rpcUrls[t]?(this.events.emit("dataUpdated",{name:"defaultNetworkId",newValue:t,oldValue:this.defaultNetworkId}),this.events.emit("chainChanged",{chainId:`0x${t.toString(16)}`}),this.defaultNetworkId=t,!0):!1}validateChainId(t){return(t&&!$c(t)&&!this.rpcUrls[t]||!t&&this.defaultNetworkId&&!this.rpcUrls[this.defaultNetworkId])&&$("NO_RPC_URL_CONFIGURED_FOR_SELECTED_CHAINID"),!t&&this.defaultNetworkId&&(t=this.defaultNetworkId),t}getRpcProviderForChainId(t){if(!t||t&&$c(+t.toString()))return this.sapphireProvider||(this.events.emit("disconnect",{error:new h0}),$("SAPPHIRE_PROVIDER_NOT_INITIALIZED")),this.sapphireProvider;{const e=this.rpcProviders[t]||new Fc(this.rpcUrls[t]);return this.rpcProviders[t]=e,e||$("CROSS_CHAIN_PROVIDER_NOT_INITIALIZED"),e}}}Ef.parseAbi(Pd);const tf=(r=0)=>({username:"",address:"",contractAddress:"",balance:"",authStrategy:"passkey",networkId:r,walletScreen:"main",displayedError:""});function f0(r,t){switch(t.type){case"setValue":return{...r,[t.payload.key]:t.payload.value};case"setState":return{...r,...t.payload};case"reset":return tf(r.networkId);default:throw new Error("Unhandled action type."+JSON.stringify(t))}}const ef=F.createContext(void 0);function p0({children:r,networks:t=[],defaultNetworkId:e=0,...n}){t=n!=null&&n.test?[{name:"Sapphire Testnet",id:Xc,rpcUrl:"https://testnet.sapphire.oasis.io",explorerUrl:"https://explorer.oasis.io/testnet/sapphire"},...t]:[{name:"Oasis Sapphire",id:Yc,rpcUrl:"https://sapphire.oasis.io",explorerUrl:"https://explorer.oasis.io/mainnet/sapphire"}];const[s,i]=F.useReducer(f0,tf(e||t[0].id)),[a,o]=F.useState(!1),[c,l]=F.useState();F.useEffect(()=>{if(a){const{walletScreen:u,displayedError:f,...y}=s;localStorage.setItem(Os.WALLET_CONTEXT,JSON.stringify(y))}},[s]),F.useEffect(()=>{const u=localStorage.getItem(Os.WALLET_CONTEXT);if(u)try{const f=JSON.parse(u);i({type:"setState",payload:f})}catch(f){console.error("Cant parse global state localStorage",f)}setTimeout(()=>o(!0),10)},[]),F.useEffect(()=>{if(a&&!c){let u;t&&t.length?u=Zd({...n,defaultNetworkId:s.networkId||e,networkConfig:t.reduce((f,y)=>(f[y.id]={rpcUrl:y.rpcUrl,explorerUrl:y.explorerUrl},f),{})}):u=Zd(),u&&(l(u),h(u),u.setAccount({username:s.username,strategy:s.authStrategy,address:s.address,contractAddress:s.contractAddress}))}},[t,e,a]);async function h(u){const f=u||c;if(f&&s.address)try{const y=await(f==null?void 0:f.getAccountBalance(s.address));i({type:"setValue",payload:{key:"balance",value:y}})}catch(y){console.error("Reloading balance",y)}}return m.jsx(ef.Provider,{value:{state:s,dispatch:i,networks:t,networksById:t.reduce((u,f)=>(u[f.id]=f,u),{}),defaultNetworkId:e||0,wallet:c,setWallet:l,reloadUserBalance:h,setScreen:u=>i({type:"setValue",payload:{key:"walletScreen",value:u}}),handleError:u=>{var f;if(u){console.error(u);let y="";u!=null&&u.name&&(y=Wd[u.name]),!y&&(u!=null&&u.error)&&((f=u==null?void 0:u.error)!=null&&f.message?y=u.error.message:typeof u.error=="string"&&(y=u.error)),!y&&(u!=null&&u.message)&&(y=u.message),y&&i({type:"setValue",payload:{key:"displayedError",value:y}})}else i({type:"setValue",payload:{key:"displayedError",value:""}})}},children:r})}function te(){const r=F.useContext(ef);if(r===void 0)throw new Error("useWalletContext usage must be wrapped with WalletContext provider.");return r}function rf(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(e=rf(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function el(){for(var r,t,e=0,n="",s=arguments.length;e<s;e++)(r=arguments[e])&&(t=rf(r))&&(n&&(n+=" "),n+=t);return n}function g0({size:r=36,width:t=2,color:e="currentColor",className:n}){return m.jsx("svg",{style:{margin:`-${r/2}px 0 0 -${r/2}px`,width:`${r}px`,height:`${r}px`,animation:"rotate 2s linear infinite",zIndex:2,position:"absolute",top:"50%",left:"50%"},viewBox:"0 0 50 50",className:n,children:m.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:e,strokeWidth:t,style:{strokeDasharray:"8, 10",animation:"dash 8s ease-in-out infinite"}})})}const w0="160px",y0="40px",m0="px-4 py-2.5",St=F.forwardRef(({blank:r=!1,self:t=!1,variant:e="primary",minWidth:n=w0,minHeight:s=y0,paddingClass:i=m0,disabled:a=!1,loading:o=!1,type:c="button",className:l,...h},u)=>{const f=el(i,l,"oaw-button relative inline-block rounded-lg text-sm font-bold border-b-[4px] border-t-[4px] border-x-0",{"transition-all hover:border-b-blue/50 hover:translate-y-[-2px] focus:translate-y-px focus:border-b-yellow/50":!o&&!a,"bg-yellow text-dark border-b-yellow border-t-yellow":e==="primary","bg-lightdark text-offwhite border-b-lightdark border-t-lightdark":e==="secondary","opacity-60":a}),y={minWidth:n,minHeight:s},w=m.jsxs(m.Fragment,{children:[!!o&&m.jsxs(m.Fragment,{children:[" ",m.jsx(g0,{color:"#141721"})]})," ",!o&&h.children]});return(r||t)&&typeof h.href=="string"?m.jsx("a",{ref:u,href:h.href,target:r?"_blank":"_self",rel:"noreferrer",title:h.title,className:f,style:y,onClick:h.onClick,children:w}):m.jsx("button",{ref:u,type:c,disabled:o||a,className:f,style:y,...h,children:w})});St.displayName="Btn";function qi({text:r,show:t,className:e}){const{state:n,handleError:s}=te();return!n.displayedError&&!r||!t?m.jsx(m.Fragment,{}):m.jsxs("div",{className:el("flex gap-2 justify-between items-start py-2 pl-3 pr-2 break-all text-sm text-white bg-red/75 rounded-md overflow-auto",e),style:{maxHeight:"250px"},children:[n.displayedError||r||"",m.jsx("button",{title:"Dismiss",className:"!text-white/50 hover:!text-white -mt-0.5 shrink-0",onClick:()=>s(),children:m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 10.6569L6.34317 5L4.92896 6.41421L10.5858 12.0711L4.92898 17.7279L6.3432 19.1421L12 13.4853L17.6569 19.1421L19.0711 17.7279L13.4143 12.0711L19.0711 6.41421L17.6569 5L12 10.6569Z",fill:"currentColor"})})})]})}var nf={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function b0({authFormPlaceholder:r="your e-mail@email.com",isAuthEmail:t=!0,isEmailConfirm:e=!0,onEmailConfirmRequest:n,onEmailConfirm:s,onGetApillonSessionToken:i}){const{dispatch:a,defaultNetworkId:o,handleError:c}=te(),[l,h]=F.useState(""),[u,f]=F.useState(!1),[y,w]=F.useState(!1),[g,b]=F.useState(!1);async function v(R){if(R.preventDefault(),!l)return;const O=Ki();f(!0),c();try{if(await(O==null?void 0:O.userExists(l))){const T=await(O==null?void 0:O.authenticate("passkey",{username:l}));T&&I({username:l,address:T.publicAddress,authStrategy:"passkey"})}else if(e&&n)await n(l),w(!0);else if(e&&i){const T=await i();T||$("INVALID_APILLON_SESSION_TOKEN"),await fetch(`${nf.VITE_APILLON_BASE_URL??"https://api.apillon.io"}/embedded-wallet/otp/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:T,email:l})}),w(!0)}else C()}catch(T){c(T)}f(!1)}async function C(){f(!0),c();try{const R=Ki(),O=await(R==null?void 0:R.register("passkey",{username:l}));O&&I({username:l,address:O.publicAddress,authStrategy:"passkey"})}catch(R){c(R)}f(!1)}async function I({username:R,address:O,authStrategy:T}){const S=Ki(),B=await(S==null?void 0:S.getAccountBalance(O))||"0";a({type:"setState",payload:{address:O,username:R,balance:B,authStrategy:T,networkId:o||void 0}})}return g?m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"mb-12",children:n?"Email succesfully confirmed.":"Welcome"}),m.jsx("p",{className:"text-xl mb-12",children:"Passkey configuration will now start."}),m.jsx(St,{loading:u,onClick:()=>C(),children:"Retry"}),m.jsx(qi,{show:!0,className:"mt-6"})]}):y?m.jsxs(m.Fragment,{children:[m.jsx(A0,{isCodeSubmitted:g,loading:u,onConfirm:async R=>{if(!s&&!i)return C();f(!0),c();try{if(s)await s(l,R);else if(i){const O=await i();O||$("INVALID_APILLON_SESSION_TOKEN");const{data:T}=await(await fetch(`${nf.VITE_APILLON_BASE_URL??"https://api.apillon.io"}/embedded-wallet/otp/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:O,email:l,code:R})})).json();if(!T)throw new Error("Verification code is not valid.")}b(!0),C()}catch(O){c(O),f(!1)}}}),m.jsx(qi,{show:!0,className:"mt-6"})]}):m.jsxs("div",{children:[m.jsx("h2",{className:"mb-6",children:"Sign in or Sign up"}),m.jsxs("form",{onSubmit:R=>v(R),children:[m.jsx("input",{type:t?"email":"text",placeholder:r,value:l,className:"w-full mb-8",onChange:R=>h(R.target.value)}),m.jsx(St,{type:"submit",loading:u,className:"w-full",children:"Continue"})]}),m.jsx(qi,{show:!0,className:"mt-6"})]})}function A0({loading:r,onConfirm:t}){const[e,n]=F.useState(""),s=[F.useRef(null),F.useRef(null),F.useRef(null),F.useRef(null),F.useRef(null),F.useRef(null)];F.useEffect(()=>{e.length===6&&!/\s/.test(e)&&t(e)},[e]);function i(c,l){const h=c.target;if(/^[^\d]$/.test(h.value)){h.value="";return}const u=s[l-1],f=s[l+1],y=s.map((w,g)=>e[g]||" ");y[l]=h.value,n(y.join("")),h.select(),h.value===""?u!=null&&u.current&&u.current.focus():f!=null&&f.current&&f.current.select()}function a(c,l){const h=c.target,u=s[l-1];(c.key==="Backspace"||c.key==="Delete")&&h.value===""&&(c.preventDefault(),n(f=>f.slice(0,l)+" "+f.slice(l+1)),u!=null&&u.current&&u.current.focus())}function o(c){const l=c.clipboardData.getData("text");l.length===6&&(n(l),s.forEach((h,u)=>{h!=null&&h.current&&(h.current.value=l.charAt(u))}))}return m.jsxs("div",{className:"text-center",children:[m.jsx("p",{children:"We just sent a confirmation code to your email. Paste the code below to proceed with account creation."}),m.jsx("h2",{className:"my-6",children:"Check your email"}),m.jsx("p",{className:"mb-6",children:"Enter the 6-digit code you received"}),m.jsx("div",{className:"flex gap-2 mb-12 justify-center",children:[0,1,2,3,4,5].map(c=>m.jsx("input",{ref:s[c],type:"text",maxLength:1,autoFocus:c===0,disabled:r,className:"min-w-0 w-14 h-14",onFocus:l=>l.target.select(),onKeyDown:l=>a(l,c),onPaste:l=>o(l),onChange:l=>i(l,c)},c))}),m.jsx(St,{disabled:r,children:"Send again"})]})}function sf(r){return!r||r.length<=10?r:`${r.slice(0,6)}...${r.slice(-4)}`}function E0(){const{state:r,dispatch:t,networks:e,wallet:n,setScreen:s}=te();if(!Array.isArray(e)||!e.length)return m.jsx(m.Fragment,{});function i(a){t({type:"setValue",payload:{key:"networkId",value:a}}),n==null||n.setDefaultNetworkId(a),s("main")}return m.jsxs("div",{children:[m.jsx("h2",{className:"mb-4",children:"Select network"}),m.jsx("div",{className:"flex flex-col gap-3",children:e.map(a=>m.jsx(St,{variant:"secondary",disabled:a.id===r.networkId,onClick:()=>i(a.id),children:a.name},a.id))})]})}const v0=()=>({txs:{},pending:[],chainIdsForHash:{}});function x0(r,t){switch(t.type){case"setState":return{...r,...t.payload};case"addTx":return{...r,txs:{...r.txs,[t.payload.owner]:{...r.txs[t.payload.owner],[t.payload.hash]:t.payload}},chainIdsForHash:{...r.chainIdsForHash,[t.payload.hash]:t.payload.chainId}};case"setTxStatus":return{...r,txs:{...r.txs,[t.payload.tx.owner]:{...r.txs[t.payload.tx.owner],[t.payload.tx.hash]:{...r.txs[t.payload.tx.owner][t.payload.tx.hash],status:t.payload.status}}},pending:t.payload.status==="pending"?[...new Set([...r.pending,t.payload.tx.hash])]:r.pending.filter(e=>e!==t.payload.tx.hash),chainIdsForHash:t.payload.status==="pending"?{...r.chainIdsForHash,[t.payload.tx.hash]:t.payload.tx.chainId}:Object.keys(r.chainIdsForHash).reduce((e,n)=>(n!==t.payload.tx.hash&&(e[n]=t.payload.tx.chainId),e),{})};default:throw new Error("Unhandled action type."+JSON.stringify(t))}}const af=F.createContext(void 0);function N0({children:r}){const[t,e]=F.useReducer(x0,v0()),[n,s]=F.useState(!1),{state:{address:i},reloadUserBalance:a}=te();F.useEffect(()=>{if(n){const{pending:c,chainIdsForHash:l,...h}=t;localStorage.setItem(Os.TRANSACTIONS_CONTEXT,JSON.stringify(h))}},[t]),F.useEffect(()=>{const c=localStorage.getItem(Os.TRANSACTIONS_CONTEXT);if(c)try{const l=JSON.parse(c);e({type:"setState",payload:l})}catch(l){console.error("Cant parse context state localStorage",l)}setTimeout(()=>{s(!0)},100)},[]),F.useEffect(()=>{if(i&&t.txs[i]&&Object.keys(t.txs[i]).length)for(const c of Object.keys(t.txs[i]))o(c)},[i,t.txs]);async function o(c){var y;if(!i)return;const l=Ki();if(!l)throw new Error("Wallet not initialized."+c);const h=l.getRpcProviderForChainId(t.chainIdsForHash[c]);if(!h)throw new Error("Provider not initialized. "+c);const u=(y=t.txs[i])==null?void 0:y[c];if(!u||u.status==="confirmed"||u.status==="failed"||t.pending.includes(c))return;if(Date.now()-u.createdAt>15e3&&!await h.getTransaction(c)){e({type:"setTxStatus",payload:{tx:u,status:"failed"}});return}const f=await h.getTransactionReceipt(c);f?(f.status?e({type:"setTxStatus",payload:{tx:u,status:"confirmed"}}):e({type:"setTxStatus",payload:{tx:u,status:"failed"}}),a(),l.events.emit("txDone",u)):(e({type:"setTxStatus",payload:{tx:u,status:"pending"}}),h.once(c,w=>{const g=w&&!isNaN(w.status)&&w.status===0;a(),e({type:"setTxStatus",payload:{tx:u,status:g?"failed":"confirmed"}}),l.events.emit("txDone",u)}))}return m.jsx(af.Provider,{value:{state:t,dispatch:e,checkTransaction:o},children:r})}function of(){const r=F.useContext(af);if(r===void 0)throw new Error("useTransactionsContext usage must be wrapped with TransactionsContext provider.");return r}function rl(r="Copy",t="Copied!"){const[e,n]=F.useState(r);let s=null;function i(a){navigator.clipboard.writeText(a),s&&clearTimeout(s),n(t),s=setTimeout(()=>n(r),2e3)}return{text:e,onCopy:i}}function I0(){const{state:{address:r}}=te(),{state:t}=of();return!r||!t.txs[r]?m.jsx(m.Fragment,{}):m.jsx("div",{children:m.jsx("div",{className:"flex flex-col gap-1 max-h-[134px] overflow-auto pr-2",children:Object.values(t.txs[r]).sort((e,n)=>(n.createdAt||0)-(e.createdAt||0)).map(e=>m.jsx(T0,{tx:e},e.hash))})})}function T0({tx:r}){const{text:t,onCopy:e}=rl();return m.jsxs("div",{className:"rounded-md bg-offwhite/5 px-2 py-1",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-bold text-sm",children:m.jsxs("a",{href:r.explorerUrl||"#",target:"_blank",title:"View on explorer",className:"rounded-sm",children:[r.label,"  ↗"]})}),m.jsx("span",{className:el("text-sm",{"text-[#FF6188]":r.status==="failed","text-[#A9DC76]":r.status==="confirmed","text-[#F7AF39]":r.status==="pending"}),children:r.status})]}),m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsxs("span",{title:r.hash,className:"text-sm",children:[sf(r.hash)," ",m.jsx("button",{className:"text-xs",onClick:()=>e(r.hash),children:t})]}),m.jsx("span",{title:new Date(r.createdAt).toISOString(),className:"text-xs",children:new Date(r.createdAt).toISOString().slice(0,-5).replace("T"," ")})]})]})}const k0=()=>({list:{},selectedToken:""});function C0(r,t){var e;switch(t.type){case"setState":return{...r,...t.payload};case"setValue":return{...r,[t.payload.key]:t.payload.value};case"updateToken":{const n=[...((e=r.list[t.payload.owner])==null?void 0:e[t.payload.chainId])||[]],s=n.findIndex(i=>i.address===t.payload.token.address);return s<0?n.push(t.payload.token):n[s]=t.payload.token,{...r,list:{...r.list,[t.payload.owner]:{...r.list[t.payload.owner],[t.payload.chainId]:n}}}}default:throw new Error("Unhandled action type."+JSON.stringify(t))}}const cf=F.createContext(void 0);function O0({children:r}){const[t,e]=F.useReducer(C0,k0()),[n,s]=F.useState(!1),{state:i,wallet:a}=te();F.useEffect(()=>{n&&localStorage.setItem(Os.TOKENS_CONTEXT,JSON.stringify(t))},[t]),F.useEffect(()=>{var l,h;const c=localStorage.getItem(Os.TOKENS_CONTEXT);if(c)try{const u=JSON.parse(c);e({type:"setState",payload:u}),Array.isArray((h=(l=u==null?void 0:u.list)==null?void 0:l[i.address])==null?void 0:h[i.networkId])&&u.list[i.address][i.networkId].forEach(async f=>{if(a){const y=await a.contractRead({contractAddress:f.address,contractAbi:Ts,contractFunctionName:"balanceOf",contractFunctionValues:[i.address]});y&&e({type:"updateToken",payload:{owner:i.address,chainId:i.networkId,token:{...f,balance:pa.ethers.formatUnits(y,f.decimals)}}})}})}catch(u){console.error("Cant parse context state localStorage",u)}setTimeout(()=>{s(!0)},100)},[]);async function o(c){if(a){const[l,h,u,f]=await Promise.all([a.contractRead({contractAddress:c,contractAbi:Ts,contractFunctionName:"name"}),a.contractRead({contractAddress:c,contractAbi:Ts,contractFunctionName:"symbol"}),a.contractRead({contractAddress:c,contractAbi:Ts,contractFunctionName:"decimals"}),a.contractRead({contractAddress:c,contractAbi:Ts,contractFunctionName:"balanceOf",contractFunctionValues:[i.address]})]);if(h)return{address:c,name:l,symbol:h,decimals:Number(u),balance:pa.ethers.formatUnits(f,u)}}}return m.jsx(cf.Provider,{value:{state:t,dispatch:e,getTokenDetails:o},children:r})}function lf(){const r=F.useContext(cf);if(r===void 0)throw new Error("useTokensContext usage must be wrapped with TokensContext provider.");return r}function P0(){const{state:r,networksById:t,setScreen:e,wallet:n,handleError:s}=te(),{state:i}=lf(),[a,o]=F.useState(""),[c,l]=F.useState(""),[h,u]=F.useState(!1),f=F.useMemo(()=>{var w;return{address:"",name:`${(w=t==null?void 0:t[r.networkId])==null?void 0:w.name} ETH`,symbol:"ETH",decimals:18,balance:r.balance}},[r.balance,r.networkId]),y=F.useMemo(()=>{if(i.selectedToken){const w=i.list[r.address][r.networkId];if(w){const g=w.find(b=>b.address===i.selectedToken);if(g)return g}}return f},[i.selectedToken,i.list]);return r.walletScreen==="selectToken"?m.jsx(S0,{nativeToken:f}):r.walletScreen==="receiveToken"?m.jsx(B0,{}):m.jsxs("form",{onSubmit:async w=>{if(w.preventDefault(),!h){if(!a||!c){console.error("Address and amount are required");return}if(!n){console.error("Wallet not initialized");return}u(!0),s();try{y.address?await n.signContractWrite({mustConfirm:!0,contractAbi:Ts,contractAddress:y.address,contractFunctionName:"transfer",contractFunctionValues:[a,pa.ethers.parseUnits(c,y.decimals)],label:"Transfer ERC20 token"}):await n.signPlainTransaction({mustConfirm:!0,strategy:"passkey",tx:{to:a,data:"0x",gasLimit:1e6,value:pa.ethers.parseEther(c)},label:"Transfer native token"})}catch(g){s(g)}u(!1)}},children:[m.jsx("h2",{className:"mb-8",children:"Send tokens to address"}),m.jsxs(St,{variant:"secondary",className:"mb-4 w-full text-left",onClick:()=>e("selectToken"),children:["Token: ",y.name,m.jsx("br",{}),m.jsxs("span",{className:"font-normal",children:["Balance: ",y.balance," ",y.symbol]})]}),m.jsx("input",{placeholder:"Receiver address",value:a,className:"w-full mb-4",onChange:w=>o(w.target.value)}),m.jsx("input",{placeholder:"Amount",value:c,className:"w-full mb-8",onChange:w=>l(w.target.value)}),m.jsx(St,{type:"submit",className:"w-full",children:"Send"})]})}function S0({nativeToken:r}){const{state:t,setScreen:e,handleError:n}=te(),{state:s,dispatch:i,getTokenDetails:a}=lf(),[o,c]=F.useState(""),[l,h]=F.useState(!1),u=F.useMemo(()=>{var f;return Array.isArray((f=s.list[t.address])==null?void 0:f[t.networkId])?[r,...s.list[t.address][t.networkId]]:[r]},[s.list]);return m.jsxs("div",{children:[m.jsx("h2",{className:"mb-4",children:"Add token"}),m.jsxs("form",{className:"mb-8",onSubmit:async f=>{if(f.preventDefault(),!l){if(!o){console.error("No address");return}h(!0),n();try{const y=await a(o);if(!y)throw new Error("Could not get token details");i({type:"updateToken",payload:{owner:t.address,chainId:t.networkId,token:y}})}catch(y){n(y)}h(!1)}},children:[m.jsx("input",{placeholder:"Token address",value:o,className:"w-full mb-4",onChange:f=>c(f.target.value)}),m.jsx(St,{type:"submit",loading:l,className:"w-full",children:"Add"})]}),m.jsx("h2",{className:"mb-4",children:"Select token"}),m.jsx("div",{className:"flex flex-col gap-3",children:u.map(f=>m.jsxs(St,{variant:"secondary",disabled:f.address===s.selectedToken,className:"w-full text-left",onClick:()=>{i({type:"setValue",payload:{key:"selectedToken",value:f.address}}),e("sendToken")},children:["Token: ",f.name,m.jsx("br",{}),m.jsxs("span",{className:"font-normal",children:["Balance: ",f.balance," ",f.symbol]})]},f.address))})]})}function B0(){const{state:r}=te(),{text:t,onCopy:e}=rl();return r.address?m.jsxs("div",{children:[m.jsx("div",{className:"p-4 mb-4",children:m.jsx(vf,{value:`ethereum:${r.address}`,size:256,style:{height:"auto",maxWidth:"100%",width:"256px",margin:"0 auto"},viewBox:"0 0 256 256"})}),m.jsx("input",{readOnly:!0,value:r.address,className:"w-full mb-4"}),m.jsx(St,{className:"w-full",onClick:()=>e(r.address),children:t})]}):m.jsx(m.Fragment,{})}function U0(){const{wallet:r,state:t,dispatch:e,networksById:n,setScreen:s}=te(),i=F.useMemo(()=>t.walletScreen==="main"?{key:"networks",label:"Change"}:t.walletScreen==="selectToken"?{key:"sendToken",label:"Back"}:{key:"main",label:"Back"},[t.walletScreen]);return m.jsxs("div",{children:[m.jsx("div",{className:"text-center -mt-4 sm:-mt-8 mb-4",children:m.jsxs("div",{className:"inline-block opacity-50 hover:opacity-100",children:[m.jsx("p",{children:t.networkId&&n[t.networkId]?n[t.networkId].name:"No network"}),m.jsx("p",{children:m.jsx("button",{className:"text-sm",onClick:()=>s(i.key),children:i.label})})]})}),m.jsx(qi,{show:!0,className:"mb-2"}),t.walletScreen==="main"&&m.jsxs("div",{children:[m.jsx(R0,{className:"mb-6"}),m.jsxs("div",{className:"flex gap-4 mb-6",children:[m.jsx(St,{minWidth:"0",className:"w-full",onClick:()=>s("sendToken"),children:"Send"}),m.jsx(St,{minWidth:"0",className:"w-full",onClick:()=>s("receiveToken"),children:"Receive"})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"mb-2",children:"Transactions"}),m.jsx(I0,{})]}),m.jsx(St,{variant:"secondary",className:"w-full",onClick:()=>{e({type:"reset"}),r==null||r.setAccount({username:"",address:"",contractAddress:"",strategy:"passkey"})},children:"Disconnect wallet"})]}),t.walletScreen==="networks"&&m.jsx("div",{children:m.jsx(E0,{})}),["sendToken","selectToken","receiveToken"].includes(t.walletScreen)&&m.jsx("div",{children:m.jsx(O0,{children:m.jsx(P0,{})})})]})}function R0({className:r}){const{state:t}=te(),{text:e,onCopy:n}=rl();return m.jsxs("div",{className:r,children:[m.jsxs("h2",{className:"break-all mb-1",children:["Hi, ",t.username]}),m.jsxs("p",{title:t.address,className:"text-xl",children:[m.jsx("span",{className:"mr-2",children:sf(t.address)}),m.jsx("button",{className:"text-sm",onClick:()=>n(t.address),children:e})]}),m.jsxs("p",{children:[t.balance," ETH"]})]})}function D0({tx:r,signMessage:t,contractFunctionData:e,approveText:n="Approve",declineText:s="Reject",onApprove:i,onDecline:a}){const{networksById:o,wallet:c,dispatch:l}=te(),[h,u]=F.useState(!1),f="bg-offwhite/25 p-3 whitespace-pre-wrap break-all rounded-sm mt-2";return m.jsxs(m.Fragment,{children:[!!t&&m.jsxs("div",{children:[m.jsx("h2",{className:"mb-6",children:"Sign Message"}),m.jsxs("p",{className:"break-all",children:["You are signing:",m.jsx("br",{}),t]})]}),!!r&&m.jsxs("div",{children:[m.jsx("h2",{className:"mb-6",children:"Approve Transaction"}),Object.entries(r).map(([y,w])=>m.jsxs("div",{className:"mb-2 break-all",children:[m.jsx("p",{className:"font-bold text-sm",children:y}),m.jsx("div",{style:{maxHeight:"220px"},className:"overflow-auto pr-8 -mr-8 sm:pr-12 sm:-mr-12",children:typeof w=="bigint"?w.toString():typeof w=="object"?m.jsx("pre",{className:f,children:JSON.stringify(r,(g,b)=>typeof b=="bigint"?b.toString():b,2)}):w})]},y))]}),!!e&&m.jsxs("div",{children:[m.jsx("h2",{className:"mb-6",children:"Approve Contract Transaction"}),!!e.chainId&&!!o[e.chainId]&&m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-sm",children:"Chain"}),o[e.chainId].name]}),m.jsxs("div",{className:"mb-3 break-all",children:[m.jsx("p",{className:"font-bold text-sm",children:"Contract address"}),e.contractAddress]}),m.jsxs("div",{className:"mb-3 break-all",children:[m.jsx("p",{className:"font-bold text-sm",children:"Contract function"}),e.contractFunctionName]}),!!e.contractFunctionValues&&!!e.contractFunctionValues.length&&m.jsxs("div",{className:"break-all",children:[m.jsx("p",{className:"font-bold text-sm",children:"Contract function values"}),m.jsx("pre",{className:f,children:JSON.stringify(e.contractFunctionValues,(y,w)=>typeof w=="bigint"?w.toString():w,2)})]})]}),m.jsx(qi,{show:!0,className:"mt-6 -mb-6"}),m.jsxs("div",{className:"mt-12 flex gap-4",children:[m.jsx(St,{loading:h,className:"w-full",onClick:async()=>{u(!0),await i(),u(!1)},children:n}),m.jsx(St,{variant:"secondary",disabled:h,className:"w-full",onClick:a,children:s})]}),m.jsx("div",{className:"mt-4 text-center",children:m.jsx("button",{onClick:()=>{c==null||c.setAccount({username:"",address:"",contractAddress:"",strategy:"passkey"}),l({type:"setState",payload:{username:"",address:"",contractAddress:"",balance:"",authStrategy:"passkey"}})},children:"Use another account"})})]})}function L0({disableAutoBroadcastAfterSign:r=!1,disableDefaultActivatorStyle:t=!1,...e}){const{state:n,wallet:s,setScreen:i,handleError:a,reloadUserBalance:o}=te(),{dispatch:c}=of(),[l,h]=F.useState(!1),[u,f]=F.useState(),[y,w]=F.useState(),[g,b]=F.useState(""),[v,C]=F.useState({title:"",txHash:"",explorerUrl:""}),I=F.useRef(),R=n.username&&n.address;F.useEffect(()=>{const S=z=>{var et;z.plain?(f((et=z.plain)==null?void 0:et.tx),I.current=z,h(!0)):z.contractWrite&&(w({chainId:z.contractWrite.chainId,contractAddress:z.contractWrite.contractAddress,contractFunctionName:z.contractWrite.contractFunctionName,contractFunctionValues:z.contractWrite.contractFunctionValues}),I.current=z,h(!0))},B=z=>{b(z.message),I.current={signature:z},h(!0)},j=z=>{c({type:"addTx",payload:z})},D=()=>{h(!0)},M=z=>{z.name==="defaultNetworkId"&&o()};return s&&(s.events.on("txApprove",S),s.events.on("signatureRequest",B),s.events.on("txSubmitted",j),s.events.on("providerRequestAccounts",D),s.events.on("dataUpdated",M)),()=>{s&&(s.events.off("txApprove",S),s.events.off("signatureRequest",B),s.events.off("txSubmitted",j),s.events.off("providerRequestAccounts",D),s.events.off("dataUpdated",M))}},[s]),F.useEffect(()=>{l||((u||g||y)&&O(),n.walletScreen!=="main"&&setTimeout(()=>{i("main")},200),s&&s.waitForAccountResolver&&(s.waitForAccountResolver(""),s.waitForAccountResolver=null))},[l]);function O(){h(!1),setTimeout(()=>{f(void 0),w(void 0),b(""),C({title:"",txHash:"",explorerUrl:""})},200)}let T=m.jsx(m.Fragment,{});return R?u||g||y?v.title?T=m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"mb-6",children:v.title}),!!v.explorerUrl&&m.jsx("p",{className:"mb-6",children:m.jsx(St,{variant:"secondary",href:v.explorerUrl,blank:!0,children:"View on explorer"})}),!!v.txHash&&m.jsxs("p",{className:"break-all my-3",children:["Transaction hash: ",v.txHash]}),m.jsx("div",{className:"mt-12",children:m.jsx(St,{onClick:()=>O(),children:"Close"})})]}):T=m.jsx(D0,{tx:u,signMessage:g,contractFunctionData:y,onApprove:async()=>{if(I.current)try{if(a(),I.current.signature)await(s==null?void 0:s.signMessage({...I.current.signature,authData:{username:n.username}})),O();else if(I.current.plain){const S=await(s==null?void 0:s.signPlainTransaction({...I.current.plain,authData:{username:n.username}}));if(r)O();else if(S){const{signedTxData:B,chainId:j}=S,D=await(s==null?void 0:s.broadcastTransaction(B,j,I.current.plain.label||"Transaction"));C({title:"Transaction submitted",explorerUrl:(D==null?void 0:D.txItem.explorerUrl)||"",txHash:(D==null?void 0:D.txHash)||""})}}else if(I.current.contractWrite){const S=await(s==null?void 0:s.signContractWrite({...I.current.contractWrite,authData:{username:n.username}}));if(r)O();else if(S){const{signedTxData:B,chainId:j}=S,D=await(s==null?void 0:s.broadcastTransaction(B,j,I.current.contractWrite.label||"Transaction"));C({title:"Transaction submitted",explorerUrl:(D==null?void 0:D.txItem.explorerUrl)||"",txHash:(D==null?void 0:D.txHash)||""})}}}catch(S){a(S)}},onDecline:()=>{var S,B,j,D,M,z;O(),(B=(S=I.current)==null?void 0:S.contractWrite)!=null&&B.reject?I.current.contractWrite.reject(new tl):(D=(j=I.current)==null?void 0:j.plain)!=null&&D.reject?I.current.plain.reject(new tl):(z=(M=I.current)==null?void 0:M.signature)!=null&&z.reject&&I.current.signature.reject(new tl)}}):T=m.jsx(U0,{}):T=m.jsx(b0,{...e}),m.jsxs("div",{children:[m.jsx(F0,{isOpen:l,setIsOpen:h,children:T}),m.jsx("button",{id:"oaw-wallet-widget-btn",className:t?void 0:"oaw-btn-default-style",onClick:()=>h(!0),children:R?"Open wallet":"Sign in"})]})}function F0({children:r,isOpen:t,setIsOpen:e}){return m.jsx(m.Fragment,{children:m.jsx(nn.Transition,{show:t,children:m.jsxs(nn.Dialog,{id:"oaw-wallet-widget",open:t,style:{position:"relative",zIndex:"10001"},onClose:()=>e(!1),children:[m.jsx(nn.TransitionChild,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:m.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"})}),m.jsx(nn.TransitionChild,{enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:m.jsx("div",{className:"fixed inset-0 w-screen overflow-y-auto p-4",children:m.jsx("div",{className:"flex items-center justify-center min-h-full",children:m.jsxs(nn.DialogPanel,{className:"relative max-w-lg w-full min-h-[600px] bg-dark p-8 sm:py-16 sm:px-12 border border-brightdark text-offwhite",children:[m.jsx("button",{className:"absolute top-2 right-2",onClick:()=>e(!1),children:m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 10.6569L6.34317 5L4.92896 6.41421L10.5858 12.0711L4.92898 17.7279L6.3432 19.1421L12 13.4853L17.6569 19.1421L19.0711 17.7279L13.4143 12.0711L19.0711 6.41421L17.6569 5L12 10.6569Z",fill:"#9C9C95"})})}),r]})})})})]})})})}function M0(r){return m.jsx(p0,{...r,children:m.jsx(N0,{children:m.jsx(L0,{...r})})})}function H0(r,t){if(typeof document>"u"){console.error("Cannot initialize embedded wallet app UI");return}let e=null;r&&(e=document.querySelector(r)),e||(e=document.createElement("div"),e.id="embedded-wallet",e.setAttribute("style","display: none;"),document.body.appendChild(e)),Ei.createRoot(e).render(m.jsx(F.StrictMode,{children:m.jsx(M0,{...t})}))}K.initializeApp=H0,Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})});
